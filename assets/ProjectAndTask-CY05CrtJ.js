import{r as b,f as D,w as R,k as at,b2 as Se,aV as n,Z as v,bH as e,a8 as l,u as m,bM as P,a7 as o,a0 as y,_ as f,aH as ie,$ as _,bf as k,aJ as Ue,aG as V,b0 as M,F as z,n as de}from"./@vue-Cr_z6yfx.js";import{b as ot}from"./vue-router-BFBClpR6.js";import{_ as rt,u as st,a as nt,b as ut,r as it}from"./index-BBlsm_-Y.js";import{u as dt}from"./project-C-PnggKy.js";import{u as pt}from"./team-_bHli350.js";import{_ as De}from"./UserAvatar-BUCmkPKe.js";import{_ as mt}from"./CreateTeamDialog-B9paRy9g.js";import{C as ft}from"./CreateProjectDialog-4DSBhwMC.js";import{N as vt}from"./NotificationInbox-3Kyvffbr.js";import{q as Re,g as T,r as u,f as ct,o as gt,s as Be,t as qe,b as Ne,c as Ee,v as Fe,w as G,a as Ge,x as d,y as p,A as pe,B as O,C as le,D as J,m as yt,n as _t}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DacfHTdZ.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vuetify-use-dialog-C5oZ13xz.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";const kt={key:0,class:"drawer-fixed-header-project"},wt=["src"],bt={class:"card-blur pt-2 pb-4 px-2"},xt={style:{"font-size":"17px","font-weight":"600"}},Ct={key:0},Tt={class:"color-button-container pe-2"},jt={class:"color-button-container pe-2"},At={class:"drawer-fixed-header-project-mobile"},Vt=["src"],Mt={class:"card-blur pt-2 pb-4 px-2"},zt={style:{"font-size":"17px","font-weight":"600"}},Pt={key:0},$t={class:"color-button-container pe-2"},It={class:"color-button-container pe-2"},Lt={__name:"ProjectAndTask",setup(St){const{mdAndUp:I,lgAndUp:me,name:fe}=Re(),ve=ot(),ce=b(!0),L=b(!1),w=b(!1),j=b(!1),ae=b(280),W=b(!1),ge=b(0),ye=b(0),C=b([]);let B=null;const i=st(),S=dt(),q=pt(),K=nt(),{smAndUp:N}=Re(),{apiAuth:oe}=ut(),X=b(!1),re=b(!1),E=b([]),Oe=D(()=>N.value?I.value?"28":"24":"20"),se=b(!1),ne=b(!1),F=b([]),U=b(["favorites","projects","teams"]),Je=()=>{try{const r=localStorage.getItem("projectAndTask_openedGroups");if(r){const t=JSON.parse(r);Array.isArray(t)&&(U.value=t)}}catch(r){console.error("載入展開狀態失敗:",r)}},We=()=>{try{localStorage.setItem("projectAndTask_openedGroups",JSON.stringify(U.value))}catch(r){console.error("保存展開狀態失敗:",r)}},Xe=D(()=>N.value?"default":"small"),_e=()=>{X.value=!0},ke=()=>{de(()=>{re.value=!0})},He=r=>it[r]||"未知",Ke=async()=>{if(i.isLogin)try{const r=await K.getUserRoles(i._id);E.value=r||[]}catch(r){console.error("載入用戶角色失敗:",r),E.value=[]}},we=()=>{var t,c;return E.value.length===0?He(i.role)||"未知":E.value.length===1?((t=E.value[0].role)==null?void 0:t.name)||"未知角色":((c=E.value.sort((g,a)=>{var Pe,$e,Ie,Le;const s=((Pe=g.role)==null?void 0:Pe.level)||0,x=(($e=a.role)==null?void 0:$e.level)||0;if(s!==x)return x-s;const A=((Ie=g.role)==null?void 0:Ie.name)||"",te=((Le=a.role)==null?void 0:Le.name)||"";return A.localeCompare(te)})[0].role)==null?void 0:c.name)||"未知角色"},h=()=>i.backgroundImage?i.backgroundImage:"https://eip.ystravel.com.tw/uploads/card-bg/bg_profile_flame.png",be=D(()=>(q.teams||[]).some(t=>{var c;return(c=t==null?void 0:t.managers)==null?void 0:c.some(g=>g._id===i._id)})),Z=r=>{var t;return K.hasPermission("PROJECT_AND_TASK_MANAGE")?!0:(t=r.team)!=null&&t.managers?r.team.managers.some(c=>c._id===i._id):!1},Q=D(()=>(S.projects.length>0?S.projects:F.value).filter(t=>{var g,a,s;return!((a=(g=t.team)==null?void 0:g.members)==null?void 0:a.some(x=>x._id===i._id))||t.status==="completed"?!1:(s=t.favorites)==null?void 0:s.some(x=>{var A;return typeof x.user=="string"?x.user===i._id:((A=x.user)==null?void 0:A._id)===i._id})})),xe=D(()=>Q.value),Ce=D(()=>(S.projects.length>0?S.projects:F.value).filter(c=>{var a,s,x;return!((s=(a=c.team)==null?void 0:a.members)==null?void 0:s.some(A=>A._id===i._id))||c.status==="completed"?!1:!((x=c.favorites)!=null&&x.some(A=>{var te;return typeof A.user=="string"?A.user===i._id:((te=A.user)==null?void 0:te._id)===i._id}))}).slice(0,10)),Te=D(()=>q.getUserTeams(i._id).slice(0,10)),Y=[{title:"紅色",value:"red-accent-3"},{title:"粉色",value:"pink-accent-2"},{title:"紫色",value:"purple-accent-1"},{title:"深紫",value:"deep-purple-accent-1"},{title:"靛藍",value:"indigo-accent-2"},{title:"藍色",value:"#92a9d1"},{title:"淺藍",value:"light-blue-accent-3"},{title:"青色",value:"#46b5ac"},{title:"青綠",value:"teal-accent-2"},{title:"綠色",value:"green-accent-3"},{title:"翠綠",value:"#009572"},{title:"黃色",value:"#efbf59"},{title:"深橙",value:"deep-orange-accent-3"}],he=()=>{I.value?w.value=!w.value:L.value=!L.value};R(()=>fe.value,()=>{me.value?w.value=!1:I.value&&(w.value=!0)},{immediate:!0}),R(U,()=>{We()},{deep:!0});const Ze=()=>{const r=ve.path;if(r==="/projectAndTaskManagement"){C.value=["home"];return}if(r.startsWith("/projectAndTaskManagement/projects/")){const t=r.split("/").pop();Q.value.find(g=>g._id===t)?C.value=[`favorite-${t}`]:C.value=[`project-${t}`];return}if(r.startsWith("/projectAndTaskManagement/teams/")){const t=r.split("/").pop();C.value=[`team-${t}`];return}if(r==="/projectAndTaskManagement/projects"){C.value=["my-projects"];return}if(r==="/projectAndTaskManagement/teams"){C.value=["my-teams"];return}C.value=[]};R(()=>ve.path,()=>{Ze()},{immediate:!0});let H=null,ue=!1;const Qe=()=>{H&&(clearTimeout(H),H=null)},ee=(r=!1)=>{Qe(),I.value?r||!ue?j.value=!w.value:w.value?j.value=!1:H=setTimeout(()=>{j.value=!0},100):r||!ue?j.value=L.value:L.value?H=setTimeout(()=>{j.value=!0},100):j.value=!1};R(w,()=>{ee()}),R(L,()=>{ee()}),R(()=>fe.value,()=>{ee()}),at(async()=>{Je(),me.value?w.value=!1:I.value&&(w.value=!0),ee(!0),ue=!0,await Ke(),i.isLogin&&(Ye(),Ve())});const je=()=>{se.value=!0},Ae=()=>{ne.value=!0},Ye=async()=>{try{const{data:r}=await oe.get("/teams/my-teams");r.success&&q.setTeams(r.data)}catch(r){console.error("載入用戶團隊失敗:",r)}},Ve=async()=>{try{const{data:r}=await oe.get("/projects");r.success&&(S.setProjects(r.data),F.value=r.data.filter(t=>{var g,a;return(a=(g=t.team)==null?void 0:g.members)==null?void 0:a.some(s=>s._id===i._id)}))}catch(r){console.error("載入用戶專案失敗:",r)}},et=r=>{console.log("團隊建立成功:",r),q.addTeam(r)},tt=r=>{console.log("專案建立成功:",r),S.addProject(r),Ve()},$=async(r,t)=>{try{const c=t?{iconColor:t}:{iconColor:null},{data:g}=await oe.put(`/projects/${r}`,c);if(g.success){S.updateProject(r,g.data);const a=F.value.find(s=>s._id===r);a&&(a.iconColor=g.data.iconColor,a.favorites=g.data.favorites)}}catch(c){console.error("更新專案顏色失敗:",c)}},lt=r=>{W.value=!0,ge.value=r.clientX,ye.value=ae.value,document.body.classList.add("resizing"),document.addEventListener("mousemove",Me),document.addEventListener("mouseup",ze),r.preventDefault()},Me=r=>{W.value&&(B&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{const t=r.clientX-ge.value,c=ye.value+t;ae.value=Math.max(200,Math.min(500,c))}))},ze=()=>{W.value=!1,B&&(cancelAnimationFrame(B),B=null),document.body.classList.remove("resizing"),document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",ze)};return R(()=>i.avatar,r=>{if(r){re.value=!1;const t=new Image;t.onload=()=>{de(()=>{ke()})},t.onerror=()=>{de(()=>{ke()})},t.src=r}else re.value=!0},{immediate:!0}),(r,t)=>{const c=Se("router-link"),g=Se("router-view");return n(),v(_t,null,{default:e(()=>[l(gt,{elevation:"0",color:"#2f2f2f",border:"b-sm",height:"100",class:"position-fixed border-surface-bright"},{default:e(()=>[l(T,{icon:"",color:"white",size:m(N)?36:32,class:"mx-2 mx-sm-3",onClick:P(he,["stop"])},{default:e(()=>[l(u,{size:m(N)?24:20},{default:e(()=>t[12]||(t[12]=[o(" mdi-menu ")])),_:1},8,["size"])]),_:1},8,["size"]),l(c,{to:"/projectAndTaskManagement",class:"d-flex align-center text-decoration-none"},{default:e(()=>[l(u,{size:Oe.value,color:"white"},{default:e(()=>t[13]||(t[13]=[o(" mdi-checkbox-marked-circle-plus-outline ")])),_:1},8,["size"]),t[14]||(t[14]=y("span",{class:"project-and-task-title text-white"}," 專案與任務管理 ",-1))]),_:1}),l(ct),m(i).isLogin?(n(),v(vt,{key:0,"filter-type":"task"})):f("",!0),m(i).isLogin&&m(N)?(n(),v(T,{key:1,class:"me-4 ms-2 rounded-0",variant:"outlined","prepend-icon":"mdi-arrow-left",color:"white",ripple:!1,size:Xe.value,flat:"",to:"/"},{default:e(()=>t[15]||(t[15]=[o(" 回永信系統 ")])),_:1},8,["size"])):f("",!0),m(i).isLogin&&!m(N)?(n(),v(T,{key:2,icon:"",class:"me-4 rounded-0",variant:"outlined",color:"white",ripple:!1,size:"22",flat:"",to:"/"},{default:e(()=>[l(u,{size:"18",color:"white"},{default:e(()=>t[16]||(t[16]=[o(" mdi-arrow-left ")])),_:1})]),_:1})):f("",!0)]),_:1}),m(I)?(n(),v(Be,{key:0,modelValue:ce.value,"onUpdate:modelValue":t[4]||(t[4]=a=>ce.value=a),width:ae.value,color:"#2f2f2f",class:ie(["border-0 drawer-wrapper-project",["position-fixed",{resizing:W.value}]]),rail:w.value,permanent:"","expand-on-hover":w.value,transition:W.value?!1:"drawer-transition"},{default:e(()=>[w.value?f("",!0):(n(),_("div",kt,[l(Ge,{elevation:"0",rounded:"0",height:"174",width:"280",class:ie(["pa-0 card-bg position-relative",{loaded:X.value}]),style:Ue({backgroundImage:`url(${h()})`})},{default:e(()=>[X.value?f("",!0):(n(),v(qe,{key:0,class:"position-absolute w-100 h-100 pa-0 ma-0"})),y("img",{src:h(),alt:"background",style:{display:"none"},onLoad:_e},null,40,wt),y("div",bt,[l(Ne,{class:"ps-5 pb-3 d-flex justify-space-between pe-2"},{default:e(()=>[l(De,{user:m(i),size:"48","avatar-class":"me-3",style:{"box-shadow":"0 0 10px rgba(255,255,255,1)"}},null,8,["user"])]),_:1}),l(Ee,{style:{"letter-spacing":"2px",color:"white","line-height":"24px"}},{default:e(()=>[l(Fe,null,{default:e(()=>[l(G,{cols:"12",class:"ps-4 pb-0 pt-4"},{default:e(()=>[y("span",xt,k(m(i).name),1)]),_:1}),l(G,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[y("span",null,k(m(i).userId),1),m(i).isAdmin?(n(),_("span",Ct,k(m(i).adminId),1)):f("",!0)]),_:1}),l(G,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[o(k(we()),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["class","style"])])),l(J,{opened:U.value,"onUpdate:opened":t[2]||(t[2]=a=>U.value=a),selected:C.value,"onUpdate:selected":t[3]||(t[3]=a=>C.value=a),class:"drawer-scrollable-menu-project pa-0",density:"compact","open-strategy":"multiple","select-strategy":"single-leaf"},{default:e(()=>[l(d,{to:"/projectAndTaskManagement",value:"home",color:"white",class:"mt-2"},{prepend:e(()=>[l(u,null,{default:e(()=>t[17]||(t[17]=[o(" mdi-home ")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[18]||(t[18]=[y("span",{class:"font-weight-bold"},"首頁",-1)])),_:1})]),_:1}),l(pe,{class:"my-2"}),l(O,{value:"favorites",class:"mb-2",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{variant:"outlined",color:"white",class:w.value?"rounded-lg ps-3 mx-1":"rounded-lg mx-2"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[19]||(t[19]=[o(" mdi-star ")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[20]||(t[20]=[y("span",null,"已加星號",-1)])),_:1})]),_:2},1040,["class"])]),default:e(()=>[(n(!0),_(z,null,M(xe.value,a=>(n(),_("div",{key:`favorite-${a._id}`,class:"project-item-container"},[l(d,{to:`/projectAndTaskManagement/projects/${a._id}`,value:`favorite-${a._id}`,class:"project-list-item pe-12"},{prepend:e(()=>[l(u,{color:a.iconColor},{default:e(()=>t[21]||(t[21]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]),y("div",Tt,[l(le,null,{activator:e(({props:s})=>[j.value&&Z(a)?(n(),v(T,V({key:0,ref_for:!0},s,{icon:"mdi-palette",size:"x-small",variant:"text",color:"white",onClick:t[0]||(t[0]=P(()=>{},["stop","prevent"]))}),null,16)):f("",!0)]),default:e(()=>[l(J,{slim:"",density:"compact"},{default:e(()=>[l(d,{onClick:s=>$(a._id,void 0)},{prepend:e(()=>[l(u,null,{default:e(()=>t[22]||(t[22]=[o("mdi-square-rounded-outline")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[23]||(t[23]=[o("無色")])),_:1})]),_:2},1032,["onClick"]),(n(),_(z,null,M(Y,s=>l(d,{key:s.value,onClick:x=>$(a._id,s.value)},{prepend:e(()=>[l(u,{color:s.value},{default:e(()=>t[24]||(t[24]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(s.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1024)])]))),128)),Q.value.length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[25]||(t[25]=[o(" mdi-star-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[26]||(t[26]=[o(" 尚無已加星號的專案 ")])),_:1})]),_:1})):f("",!0)]),_:1}),l(O,{value:"projects",class:"mb-2",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{variant:"outlined",color:"white",class:w.value?"rounded-lg ps-3 mx-1":"rounded-lg mx-2"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[27]||(t[27]=[o(" mdi-folder-multiple ")])),_:1})]),append:e(()=>[be.value?(n(),v(T,{key:0,icon:"mdi-plus",size:"22",variant:"text",color:"white",onClick:P(Ae,["stop"])})):f("",!0)]),default:e(()=>[l(p,null,{default:e(()=>t[28]||(t[28]=[y("span",null,"專案",-1)])),_:1})]),_:2},1040,["class"])]),default:e(()=>[(n(!0),_(z,null,M(Ce.value,a=>(n(),_("div",{key:a._id,class:"project-item-container"},[l(d,{to:`/projectAndTaskManagement/projects/${a._id}`,value:`project-${a._id}`,class:"project-list-item"},{prepend:e(()=>[l(u,{color:a.iconColor},{default:e(()=>t[29]||(t[29]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,{class:"pe-8"},{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]),y("div",jt,[l(le,null,{activator:e(({props:s})=>[j.value&&Z(a)?(n(),v(T,V({key:0,ref_for:!0},s,{icon:"mdi-palette",size:"x-small",variant:"text",color:"white",onClick:t[1]||(t[1]=P(()=>{},["stop","prevent"]))}),null,16)):f("",!0)]),default:e(()=>[l(J,{slim:"",density:"compact"},{default:e(()=>[l(d,{onClick:s=>$(a._id,void 0)},{prepend:e(()=>[l(u,null,{default:e(()=>t[30]||(t[30]=[o("mdi-square-rounded-outline")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[31]||(t[31]=[o("無色")])),_:1})]),_:2},1032,["onClick"]),(n(),_(z,null,M(Y,s=>l(d,{key:s.value,onClick:x=>$(a._id,s.value)},{prepend:e(()=>[l(u,{color:s.value},{default:e(()=>t[32]||(t[32]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(s.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1024)])]))),128)),l(d,{to:"/projectAndTaskManagement/projects",value:"my-projects",color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[33]||(t[33]=[o("mdi-arrow-right")])),_:1})]),default:e(()=>[l(p,{class:"text-grey"},{default:e(()=>t[34]||(t[34]=[o(" 查看我的專案 ")])),_:1})]),_:1}),F.value.length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[35]||(t[35]=[o(" mdi-information-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[36]||(t[36]=[o(" 尚無專案 ")])),_:1})]),_:1})):f("",!0)]),_:1}),l(O,{value:"teams",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{variant:"outlined",class:w.value?"rounded-lg ps-3 mx-1":"rounded-lg mx-2",color:"white"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[37]||(t[37]=[o(" mdi-account-group ")])),_:1})]),append:e(()=>[m(K).hasPermission("TEAM_CREATE")?(n(),v(T,{key:0,icon:"mdi-plus",size:"22",variant:"text",color:"white",onClick:P(je,["stop"])})):f("",!0)]),default:e(()=>[l(p,null,{default:e(()=>t[38]||(t[38]=[y("span",null,"團隊",-1)])),_:1})]),_:2},1040,["class"])]),default:e(()=>[(n(!0),_(z,null,M(Te.value,a=>(n(),v(d,{key:a._id,to:`/projectAndTaskManagement/teams/${a._id}`,value:`team-${a._id}`,color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[39]||(t[39]=[o("mdi-account-multiple")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]))),128)),l(d,{to:"/projectAndTaskManagement/teams",value:"my-teams",color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[40]||(t[40]=[o("mdi-arrow-right")])),_:1})]),default:e(()=>[l(p,{class:"text-grey"},{default:e(()=>t[41]||(t[41]=[o(" 查看我的團隊 ")])),_:1})]),_:1}),m(q).getUserTeams(m(i)._id).length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[42]||(t[42]=[o(" mdi-information-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[43]||(t[43]=[o(" 尚無團隊 ")])),_:1})]),_:1})):f("",!0)]),_:1})]),_:1},8,["opened","selected"]),w.value?f("",!0):(n(),_("div",{key:1,class:"resize-handle",onMousedown:lt},null,32))]),_:1},8,["modelValue","width","rail","expand-on-hover","transition","class"])):f("",!0),m(I)?f("",!0):(n(),v(Be,{key:1,modelValue:L.value,"onUpdate:modelValue":t[9]||(t[9]=a=>L.value=a),border:"0",color:"#2f2f2f",class:"rounded-be-xl position-fixed drawer-wrapper-project-mobile"},{default:e(()=>[y("div",At,[l(Ge,{elevation:"0",rounded:"0",height:"172",class:ie(["pa-0 card-bg",{loaded:X.value}]),style:Ue({backgroundImage:`url(${h()})`})},{default:e(()=>[X.value?f("",!0):(n(),v(qe,{key:0,class:"position-absolute w-100 h-100 pa-0 ma-0"})),y("img",{src:h(),alt:"background",style:{display:"none"},onLoad:_e},null,40,Vt),y("div",Mt,[l(Ne,{class:"ps-5 pb-3"},{default:e(()=>[l(De,{user:m(i),size:"48","avatar-class":"me-3",style:{"box-shadow":"0 0 10px rgba(255,255,255,1)"}},null,8,["user"])]),_:1}),l(Ee,{style:{"letter-spacing":"2px",color:"white","line-height":"24px"}},{default:e(()=>[l(Fe,null,{default:e(()=>[l(G,{cols:"12",class:"ps-4 pb-0 pt-4"},{default:e(()=>[y("span",zt,k(m(i).name),1)]),_:1}),l(G,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[y("span",null,k(m(i).userId),1),m(i).isAdmin?(n(),_("span",Pt,k(m(i).adminId),1)):f("",!0)]),_:1}),l(G,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[o(k(we()),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["class","style"])]),l(J,{opened:U.value,"onUpdate:opened":t[7]||(t[7]=a=>U.value=a),selected:C.value,"onUpdate:selected":t[8]||(t[8]=a=>C.value=a),class:"drawer-scrollable-menu-project-mobile pa-0",density:"compact","open-strategy":"multiple","select-strategy":"single-leaf"},{default:e(()=>[l(pe,{class:"my-2"}),l(d,{to:"/projectAndTaskManagement",value:"home",color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[44]||(t[44]=[o("mdi-home")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[45]||(t[45]=[o("首頁")])),_:1})]),_:1}),l(pe),l(O,{value:"favorites",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{color:"white"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[46]||(t[46]=[o("mdi-star")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[47]||(t[47]=[o("已加星號")])),_:1})]),_:2},1040)]),default:e(()=>[(n(!0),_(z,null,M(xe.value,a=>(n(),_("div",{key:`favorite-${a._id}`,class:"project-item-container"},[l(d,{to:`/projectAndTaskManagement/projects/${a._id}`,value:`favorite-${a._id}`,color:"white",class:"project-list-item pe-12"},{prepend:e(()=>[l(u,{color:a.iconColor},{default:e(()=>t[48]||(t[48]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]),y("div",$t,[l(le,null,{activator:e(({props:s})=>[j.value&&Z(a)?(n(),v(T,V({key:0,ref_for:!0},s,{icon:"mdi-palette",size:"x-small",variant:"text",color:"white",onClick:t[5]||(t[5]=P(()=>{},["stop","prevent"]))}),null,16)):f("",!0)]),default:e(()=>[l(J,{slim:"",density:"compact"},{default:e(()=>[l(d,{onClick:s=>$(a._id,void 0)},{prepend:e(()=>[l(u,null,{default:e(()=>t[49]||(t[49]=[o("mdi-square-rounded-outline")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[50]||(t[50]=[o("無色")])),_:1})]),_:2},1032,["onClick"]),(n(),_(z,null,M(Y,s=>l(d,{key:s.value,onClick:x=>$(a._id,s.value)},{prepend:e(()=>[l(u,{color:s.value},{default:e(()=>t[51]||(t[51]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(s.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1024)])]))),128)),Q.value.length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[52]||(t[52]=[o(" mdi-star-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[53]||(t[53]=[o(" 尚無已加星號的專案 ")])),_:1})]),_:1})):f("",!0)]),_:1}),l(O,{value:"projects",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{color:"white"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[54]||(t[54]=[o("mdi-folder-multiple")])),_:1})]),append:e(()=>[be.value?(n(),v(T,{key:0,icon:"mdi-plus",size:"x-small",variant:"text",color:"white",onClick:P(Ae,["stop"])})):f("",!0)]),default:e(()=>[l(p,null,{default:e(()=>t[55]||(t[55]=[o("專案")])),_:1})]),_:2},1040)]),default:e(()=>[(n(!0),_(z,null,M(Ce.value,a=>(n(),_("div",{key:a._id,class:"project-item-container"},[l(d,{to:`/projectAndTaskManagement/projects/${a._id}`,value:`project-${a._id}`,color:"white",class:"project-list-item pe-12"},{prepend:e(()=>[l(u,{color:a.iconColor},{default:e(()=>t[56]||(t[56]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]),y("div",It,[l(le,null,{activator:e(({props:s})=>[j.value&&Z(a)?(n(),v(T,V({key:0,ref_for:!0},s,{icon:"mdi-palette",size:"x-small",variant:"text",color:"white",onClick:t[6]||(t[6]=P(()=>{},["stop","prevent"]))}),null,16)):f("",!0)]),default:e(()=>[l(J,{slim:"",density:"compact"},{default:e(()=>[l(d,{onClick:s=>$(a._id,void 0)},{prepend:e(()=>[l(u,null,{default:e(()=>t[57]||(t[57]=[o("mdi-square-rounded-outline")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>t[58]||(t[58]=[o("無色")])),_:1})]),_:2},1032,["onClick"]),(n(),_(z,null,M(Y,s=>l(d,{key:s.value,onClick:x=>$(a._id,s.value)},{prepend:e(()=>[l(u,{color:s.value},{default:e(()=>t[59]||(t[59]=[o(" mdi-square-rounded ")])),_:2},1032,["color"])]),default:e(()=>[l(p,null,{default:e(()=>[o(k(s.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1024)])]))),128)),l(d,{to:"/projectAndTaskManagement/projects",value:"my-projects",color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[60]||(t[60]=[o("mdi-arrow-right")])),_:1})]),default:e(()=>[l(p,{class:"text-grey"},{default:e(()=>t[61]||(t[61]=[o(" 查看我的專案 ")])),_:1})]),_:1}),F.value.length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[62]||(t[62]=[o(" mdi-information-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[63]||(t[63]=[o(" 尚無專案 ")])),_:1})]),_:1})):f("",!0)]),_:1}),l(O,{value:"teams",fluid:""},{activator:e(({props:a})=>[l(d,V(a,{color:"white"}),{prepend:e(()=>[l(u,null,{default:e(()=>t[64]||(t[64]=[o("mdi-account-group")])),_:1})]),append:e(()=>[m(K).hasPermission("PROJECT_AND_TASK_MANAGE")?(n(),v(T,{key:0,icon:"mdi-plus",size:"x-small",variant:"text",color:"white",onClick:P(je,["stop"])})):f("",!0)]),default:e(()=>[l(p,null,{default:e(()=>t[65]||(t[65]=[o("團隊")])),_:1})]),_:2},1040)]),default:e(()=>[(n(!0),_(z,null,M(Te.value,a=>(n(),v(d,{key:a._id,to:`/projectAndTaskManagement/teams/${a._id}`,value:`team-${a._id}`,color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[66]||(t[66]=[o("mdi-account-multiple")])),_:1})]),default:e(()=>[l(p,null,{default:e(()=>[o(k(a.name),1)]),_:2},1024)]),_:2},1032,["to","value"]))),128)),l(d,{to:"/projectAndTaskManagement/teams",value:"my-teams",color:"white"},{prepend:e(()=>[l(u,null,{default:e(()=>t[67]||(t[67]=[o("mdi-arrow-right")])),_:1})]),default:e(()=>[l(p,{class:"text-grey"},{default:e(()=>t[68]||(t[68]=[o(" 查看我的團隊 ")])),_:1})]),_:1}),m(q).getUserTeams(m(i)._id).length===0?(n(),v(d,{key:0,disabled:"",color:"white"},{prepend:e(()=>[l(u,{color:"grey-lighten-4"},{default:e(()=>t[69]||(t[69]=[o(" mdi-information-outline ")])),_:1})]),default:e(()=>[l(p,{class:"text-grey-lighten-4"},{default:e(()=>t[70]||(t[70]=[o(" 尚無團隊 ")])),_:1})]),_:1})):f("",!0)]),_:1})]),_:1},8,["opened","selected"])]),_:1},8,["modelValue"])),l(yt,null,{default:e(()=>[l(g)]),_:1}),l(mt,{modelValue:se.value,"onUpdate:modelValue":t[10]||(t[10]=a=>se.value=a),onTeamCreated:et},null,8,["modelValue"]),l(ft,{modelValue:ne.value,"onUpdate:modelValue":t[11]||(t[11]=a=>ne.value=a),onProjectCreated:tt},null,8,["modelValue"])]),_:1})}}},sl=rt(Lt,[["__scopeId","data-v-4272d9d0"]]);export{sl as default};

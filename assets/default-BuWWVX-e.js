import{r as N,k as ze,aS as Fe,f as O,aV as l,Z as c,bH as e,a8 as a,a7 as o,a0 as b,$ as i,aJ as Ee,F as d,b0 as k,bf as u,_ as A,n as Ae,w as _e,b2 as Ce,bM as Qe,u as E,bJ as be,aH as ge,bB as we,aG as G}from"./@vue-Cr_z6yfx.js";import{_ as Pe,b as Xe,u as je,a as Je,r as Ze}from"./index-n6mFz3XI.js";import{u as et,b as tt}from"./vue-router-BFBClpR6.js";import{i as at}from"./vuetify-use-dialog-C5oZ13xz.js";import{_ as lt}from"./UserAvatar-aELk0ClH.js";import{c as Ne,E as We,r as p,F as nt,g as $e,a as Te,q as rt,G as ot,p as Ge,f as ut,o as st,s as Ue,t as Re,b as Le,v as qe,w as Z,y as m,x as v,B as U,D as Oe,H as re,A as it,m as dt,n as ct,T as pt}from"./vuetify-CbddcmEc.js";import{N as ft}from"./NotificationInbox-D33I3oia.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DsdNZwtm.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";const mt="/assets/Ys_favicon-CkL_8xWX.png",vt={class:"marquee-text"},_t={class:"d-flex align-center ms-3"},Be="ginternational-marquee-suppress-until",gt="ginternational-marquee-suppress-broadcast",ye="ginternational-marquee-suppress-at",yt={__name:"MarqueeBar",setup(He){const{apiAuth:oe}=Xe(),h=N([]),Q=N(null),H=N(null),V=N(0),T=N(0),x=N(!1),_=N(null),I=N(null),ue=()=>{try{const g=Number(localStorage.getItem(Be)||0),y=Date.now();return g&&y<g}catch{return!1}},X=()=>{if(h.value.length===0){x.value=!1;return}if(ue())try{const g=Number(localStorage.getItem(ye)||0);(I.value?new Date(I.value).getTime():0)>g||(x.value=!1)}catch{x.value=!1}},ee=()=>{if(h.value.length===0)return;let g=!0;if(ue())try{const y=Number(localStorage.getItem(ye)||0);g=(I.value?new Date(I.value).getTime():0)>y}catch{g=!1}if(g){if(!V.value||!T.value){let y=0;const M=8,D=()=>{var S;if(y++,f(),!V.value||!T.value)if(y>=M){if(V.value||(V.value=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0,1024),console.warn("[Marquee] fallback wrapperWidth=",V.value)),!T.value){try{const w=((S=H.value)==null?void 0:S.textContent)||"";T.value=Math.max(w.length*10,300)}catch{T.value=600}console.warn("[Marquee] fallback trackWidth=",T.value)}}else{requestAnimationFrame(D);return}x.value=!0,z()};requestAnimationFrame(D);return}x.value=!0,z()}},f=()=>{try{V.value=Q.value?Q.value.clientWidth:0,T.value=H.value?H.value.scrollWidth:0}catch{V.value=0,T.value=0,console.warn("[Marquee] measure: failed, set widths=0")}},Y=(g,y)=>g.length!==y.length?!1:g.every((M,D)=>{const S=y[D];return M.id===S.id&&M.type===S.type&&M.text===S.text}),L=async(g=!0)=>{try{const{data:y}=await oe.get("/marquees/active");if(y.success){const D=(y.result||[]).map(w=>({id:w._id,type:w.type,text:w.content})),S=!Y(h.value,D);h.value=D,await Ae(),f(),X(),(S&&g||!S&&x.value&&!q.value)&&ee()}}catch{h.value=[],X()}},B=async()=>{var g,y;try{const{data:M}=await oe.get("/marquees/version");if(M.success){const D=((g=M.result)==null?void 0:g.contentVersion)||null,S=((y=M.result)==null?void 0:y.broadcastVersion)||null,w=_.value!==D,P=I.value,ae=P!==S,le=Number(localStorage.getItem(ye)||0),pe=S?new Date(S).getTime():0,fe=ae&&pe>le&&!!P;if(_.value=D,I.value=S,w&&await L(!0),X(),fe){let ne=0;const F=8,W=()=>{var me;if(ne++,f(),(!V.value||!T.value)&&ne<F){requestAnimationFrame(W);return}if(V.value||(V.value=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0,1024)),!T.value)try{const ve=((me=H.value)==null?void 0:me.textContent)||"";T.value=Math.max(ve.length*10,300)}catch{T.value=600}x.value=!0,z()};requestAnimationFrame(W)}else x.value&&!q.value&&ee()}}catch{}};let R=null;ze(async()=>{await B(),R=setInterval(B,6e4),window.addEventListener("resize",j)}),Fe(()=>{R&&clearInterval(R),window.removeEventListener("resize",j)});const j=()=>{f(),x.value&&q.value||x.value&&z()},se=()=>{try{const g=new Date;g.setHours(23,59,59,999),localStorage.setItem(Be,String(g.getTime())),localStorage.setItem(gt,I.value||""),localStorage.setItem(ye,String(Date.now()))}catch{}X(),x.value=!1,q.value=!1,K.value++},K=N(0),q=N(!1),te=N(!1),ie=O(()=>{const g=V.value+T.value;return`${Math.max(10,Math.min(60,g/60))}s`}),z=()=>{K.value++,q.value=!0},ke=()=>{te.value=!0},xe=()=>{te.value=!1},J=async()=>{q.value=!1,await new Promise(g=>setTimeout(g,1e3)),requestAnimationFrame(()=>{f(),z()})},Me=g=>({system:"blue-darken-2",update:"cyan-darken-3",announcement:"grey-darken-2",maintenance:"red-darken-1",event:"indigo-darken-1"})[g]||"grey",de=g=>({system:"系統",update:"更新",announcement:"一般",maintenance:"維護",event:"活動"})[g]||"一般",ce=g=>({system:"mdi-cog-outline",update:"mdi-refresh",announcement:"mdi-bullhorn-outline",maintenance:"mdi-wrench-outline",event:"mdi-calendar-star"})[g]||"mdi-file-document-outline";return(g,y)=>(l(),c(Te,{class:"marquee-card rounded-0",elevation:"0",style:Ee({visibility:x.value?"visible":"hidden",height:x.value?void 0:"0px",padding:x.value?void 0:"0",borderWidth:x.value?void 0:"0",overflow:"hidden"})},{default:e(()=>[a(Ne,{class:"d-flex align-center px-3 py-2"},{default:e(()=>[a(We,{size:"28",class:"me-3 marquee-icon",color:"white"},{default:e(()=>[a(p,{size:"16",color:"#555"},{default:e(()=>y[1]||(y[1]=[o(" mdi-bullhorn ")])),_:1})]),_:1}),b("div",{ref_key:"wrapperRef",ref:Q,class:"marquee-wrapper",onMouseenter:ke,onMouseleave:xe},[h.value.length>0?(l(),i("div",{key:K.value,ref_key:"trackRef",ref:H,class:"marquee-track",style:Ee({animationDuration:ie.value,"--wrapper":String(V.value),"--text":String(T.value),visibility:q.value?"visible":"hidden",opacity:q.value?1:0,transform:"translateX("+V.value+"px)",animationPlayState:te.value?"paused":"running"}),onAnimationend:J},[(l(!0),i(d,null,k(h.value,(M,D)=>(l(),i("div",{key:`item-${D}-${M.type}`,class:"marquee-item"},[a(nt,{size:"x-small",color:Me(M.type),variant:"flat",class:"me-2",label:""},{default:e(()=>[a(p,{size:"11",color:"white",class:"me-1"},{default:e(()=>[o(u(ce(M.type)),1)]),_:2},1024),o(" "+u(de(M.type)),1)]),_:2},1032,["color"]),b("span",vt,u(M.text),1)]))),128))],36)):A("",!0)],544),b("div",_t,[a($e,{variant:"outlined",size:"x-small",color:"white",height:"28",onClick:y[0]||(y[0]=M=>se())},{default:e(()=>[a(p,{size:"15",color:"white",style:{"margin-right":"2px"}},{default:e(()=>y[2]||(y[2]=[o(" mdi-close ")])),_:1}),y[3]||(y[3]=o(" 今日不再顯示 "))]),_:1})])]),_:1})]),_:1},8,["style"]))}},At=Pe(yt,[["__scopeId","data-v-8aee967e"]]),Et={class:"drawer-fixed-header"},kt=["src"],xt={class:"card-blur pt-2 pb-4 px-2"},Mt={style:{"font-size":"17px","font-weight":"600"}},bt={key:0},Rt={key:0,class:"custom-tabs"},Nt=["onClick"],Tt={key:0,class:"custom-tabs"},Dt=["onClick"],St={class:"drawer-fixed-header-mobile"},It=["src"],Vt={class:"card-blur pt-2 pb-4 px-2"},ht={style:{"font-size":"17px","font-weight":"600"}},Ct={key:0},wt={__name:"default",setup(He){const{smAndUp:oe,mdAndUp:h,lgAndUp:Q,name:H}=rt(),V=N(!0),T=N(!1),x=N(!1),_=je(),I=Je(),ue=at(),X=et(),ee=tt(),f=N([]),Y=N(!1),L=N(!1),B=N([]),R=N("common"),j=N(!1),se=()=>{Y.value=!0},K=()=>{Ae(()=>{L.value=!0})},q=s=>Ze[s]||"未知",te=async()=>{if(_.isLogin)try{const s=await I.getUserRoles(_._id);B.value=s||[]}catch(s){console.error("載入用戶角色失敗:",s),B.value=[]}},ie=()=>{var n,C;return B.value.length===0?q(_.role)||"未知":B.value.length===1?((n=B.value[0].role)==null?void 0:n.name)||"未知角色":((C=B.value.sort(($,t)=>{var Se,Ie,Ve,he;const r=((Se=$.role)==null?void 0:Se.level)||0,De=((Ie=t.role)==null?void 0:Ie.level)||0;if(r!==De)return De-r;const Ye=((Ve=$.role)==null?void 0:Ve.name)||"",Ke=((he=t.role)==null?void 0:he.name)||"";return Ye.localeCompare(Ke)})[0].role)==null?void 0:C.name)||"未知角色"},z=s=>{if(!s)return!0;const n=String(s).toLowerCase();return n.includes("avatar_purple_robot")||n.includes("avatar_robot")||n.includes("orange_robot")},ke=()=>{if(!_.name||!L.value)return"grey";const s=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green-darken-1","amber-darken-1","orange","deep-orange","brown","blue-grey"];let n=0;for(let $=0;$<_.name.length;$++)n=_.name.charCodeAt($)+((n<<5)-n);const C=Math.abs(n)%s.length;return s[C]},xe=()=>_.name?_.name.replace(/\s/g,"").substring(0,2).toUpperCase():"??",J=()=>_.backgroundImage?_.backgroundImage:"https://eip.ystravel.com.tw/uploads/card-bg/bg_profile_flame.png",Me=[{id:"common",label:"常用"},{id:"application",label:"應用"},{id:"business",label:"營運"},{id:"organization",label:"組織"},{id:"system",label:"系統"}],de=[{to:"/",text:"首頁",icon:"mdi-home",permission:"HOME_READ"},{to:"/extensionList",text:"分機表",icon:"mdi-phone-outline",permission:"EXTENSION_LIST_READ"},{to:"/announcement",text:"所有公告",icon:"mdi-bullhorn",permission:"ANNOUNCEMENT_PAGE_READ"},{text:"申請相關",icon:"mdi-file-document-outline",permission:["MARKETING_DESIGN_REQUEST_PAGE_READ"],children:[{to:"/marketingDesignRequest",text:"行銷美編需求申請",icon:"mdi-form-select",permission:"MARKETING_DESIGN_REQUEST_PAGE_READ"}]}],ce=[{to:"/projectAndTaskManagement",text:"專案與任務管理",icon:"mdi-chart-box-outline",permission:"PROJECT_AND_TASK_MANAGEMENT_READ"}],g=[{to:"/B2CStatistics",text:"直客詢問統計表",icon:"mdi-account-question",permission:"B2C_STATISTICS_READ"},{to:"/marketingAnalysis",text:"行銷費用分析",icon:"mdi-chart-multiple",permission:"MARKETING_ANALYSIS_READ"},{text:"行銷費用管理",icon:"mdi-chart-bar",permission:["MARKETING_EXPENSE_MANAGEMENT_READ","MARKETING_BUDGET_MANAGEMENT_READ","MARKETING_CATEGORY_MANAGEMENT_READ"],children:[{to:"/marketingExpenseManagement",text:"實際支出管理",icon:"mdi-cash-100",permission:"MARKETING_EXPENSE_MANAGEMENT_READ"},{to:"/marketingBudgetManagement",text:"行銷預算管理",icon:"mdi-table-edit",permission:"MARKETING_BUDGET_MANAGEMENT_READ"},{to:"/marketingCategoryManagement",text:"行銷分類管理",icon:"mdi-shape-plus-outline",permission:"MARKETING_CATEGORY_MANAGEMENT_READ"}]},{to:"/B2CStatisticsManagement",text:"直客詢問管理",icon:"mdi-account-question",permission:"B2C_STATISTICS_MANAGEMENT_READ"},{to:"/marketingDesignRequestManagement",text:"行銷美編需求申請管理",icon:"mdi-form-select",permission:"MARKETING_DESIGN_REQUEST_MANAGEMENT_READ"},{to:"/formGenerator",text:"表單產生器",icon:"mdi-list-box-outline",permission:"FORM_GENERATOR_READ"},{to:"/lineCategoryManagement",text:"線別分類管理",icon:"mdi-shape-plus-outline",permission:"LINE_CATEGORY_MANAGEMENT_READ"},{text:"備品相關",icon:"mdi-package-variant",permission:["SPARE_PART_MANAGEMENT_READ","SPARE_PART_INVENTORY_MANAGEMENT_READ"],children:[{to:"/sparePartInventoryManagement",text:"備品庫存管理",icon:"mdi-package-variant-closed-check",permission:"SPARE_PART_INVENTORY_MANAGEMENT_READ"},{to:"/sparePartManagement",text:"備品管理",icon:"mdi-package-variant-closed-plus",permission:"SPARE_PART_MANAGEMENT_READ"}]}],y=[{to:"/employeeList",text:"公司員工列表",icon:"mdi-account-details",permission:"EMPLOYEE_LIST_READ"},{text:"人事管理",icon:"mdi-account-group",permission:["EMPLOYEE_MANAGE_READ","COMPANY_AND_DEPARTMENT_MANAGEMENT_READ"],children:[{to:"/employeeManagement",text:"員工管理",icon:"mdi-account-cog",permission:"EMPLOYEE_MANAGEMENT_READ"},{to:"/companyAndDepartmentManagement",text:"公司部門管理",icon:"mdi-office-building-cog",permission:"COMPANY_AND_DEPARTMENT_MANAGEMENT_READ"}]},{text:"硬體管理",icon:"mdi-server-network-outline",permission:["HARDWARE_DEVICE_MANAGEMENT_READ","HARDWARE_MAINTENANCE_RECORD_PAGE_READ","HARDWARE_CATEGORY_MANAGEMENT_READ"],children:[{to:"/hardwareDeviceManagement",text:"硬體設備管理",icon:"mdi-server-outline",permission:"HARDWARE_DEVICE_MANAGEMENT_READ"},{to:"/hardwareMaintenanceRecord",text:"硬體維修記錄",icon:"mdi-wrench",permission:"HARDWARE_MAINTENANCE_RECORD_PAGE_READ"},{to:"/hardwareCategoryManagement",text:"硬體類型管理",icon:"mdi-shape-plus-outline",permission:"HARDWARE_CATEGORY_MANAGEMENT_READ"}]}],M=[{to:"/user",text:"用戶管理",icon:"mdi-account-cog",permission:"USER_MANAGEMENT_READ"},{to:"/permissionManagement",text:"權限管理",icon:"mdi-shield-account",permission:"PERMISSION_MANAGEMENT_READ"},{text:"網站設定",icon:"mdi-cog-outline",permission:["CAROUSEL_READ","ANNOUNCEMENT_READ","MARQUEE_MANAGEMENT_READ","SHARED_RESOURCE_MANAGEMENT_READ"],children:[{to:"/announcementManagement",text:"公告管理",icon:"mdi-bullhorn",permission:"ANNOUNCEMENT_READ"},{to:"/marqueeManagement",text:"跑馬燈管理",icon:"mdi-bullhorn-outline",permission:"MARQUEE_MANAGEMENT_READ"},{to:"/carouselManagement",text:"輪播圖管理",icon:"mdi-image-multiple",permission:"CAROUSEL_READ"},{to:"/sharedResourceManagement",text:"共享資源管理",icon:"mdi-share-all",permission:"SHARED_RESOURCE_MANAGEMENT_READ"}]},{to:"/auditLog",text:"異動紀錄",icon:"mdi-history",permission:"AUDIT_LOG_PAGE_READ"}],D=s=>s.filter(n=>n.children?(n.children=n.children.filter(C=>Array.isArray(C.permission)?I.hasAnyPermission(C.permission):I.hasPermission(C.permission)),n.children.length>0):Array.isArray(n.permission)?I.hasAnyPermission(n.permission):I.hasPermission(n.permission)),S=O(()=>D(de)),w=O(()=>D(ce)),P=O(()=>D(g)),ae=O(()=>D(y)),le=O(()=>D(M)),pe=O(()=>P.value.filter(s=>s.text==="直客詢問統計表")),fe=O(()=>{const s=new Set(["行銷費用分析","行銷費用管理","直客詢問管理","行銷美編需求申請管理"]);return P.value.filter(n=>s.has(n.text))}),ne=O(()=>{const s=new Set(["表單產生器","線別分類管理","備品相關"]);return P.value.filter(n=>s.has(n.text))}),F=s=>s.some(n=>n.children?n.children.some(C=>Array.isArray(C.permission)?I.hasAnyPermission(C.permission):I.hasPermission(C.permission)):Array.isArray(n.permission)?I.hasAnyPermission(n.permission):I.hasPermission(n.permission)),W=O(()=>Me.filter(s=>{switch(s.id){case"common":return F(de);case"application":return F(ce);case"business":return F(g);case"organization":return F(y);case"system":return F(M);default:return!1}}));_e(W,s=>{(s.length===1||s.length>1&&!s.find(n=>n.id===R.value))&&(R.value=s[0].id)},{immediate:!0}),_e(()=>ee.path,s=>{s.includes("/marketingDesignRequest")&&!s.includes("Management")&&(R.value="common",f.value.includes("申請相關")||f.value.push("申請相關")),s.includes("/projectAndTaskManagement")&&(R.value="application"),(s.includes("/B2CStatistics")||s.includes("/marketingAnalysis")||s.includes("/marketingExpense")||s.includes("/marketingBudget")||s.includes("/marketingCategory")||s.includes("/marketingDesignRequestManagement")||s.includes("/formGenerator")||s.includes("/lineCategory")||s.includes("/sparePart"))&&(R.value="business",(s.includes("/marketingExpense")||s.includes("/marketingBudget")||s.includes("/marketingCategory"))&&(f.value.includes("行銷費用管理")||f.value.push("行銷費用管理"))),(s.includes("/employeeManagement")||s.includes("/companyAndDepartment")||s.includes("/employeeList")||s.includes("/hardware"))&&(R.value="organization",(s.includes("/employeeManagement")||s.includes("/companyAndDepartment"))&&(f.value.includes("人事管理")||f.value.push("人事管理")),s.includes("/hardware")&&(f.value.includes("硬體管理")||f.value.push("硬體管理"))),(s.includes("/user")||s.includes("/permissionManagement")||s.includes("/announcementManagement")||s.includes("/carouselManagement")||s.includes("/marqueeManagement")||s.includes("/sharedResourceManagement")||s.includes("/auditLog"))&&(R.value="system",(s.includes("/announcementManagement")||s.includes("/carouselManagement")||s.includes("/marqueeManagement")||s.includes("/sharedResourceManagement"))&&(f.value.includes("網站設定")||f.value.push("網站設定")))},{immediate:!0}),_e(()=>H.value,()=>{Q.value?x.value=!1:h.value&&(x.value=!0)},{immediate:!0});const me=()=>{h.value?x.value=!x.value:T.value=!T.value};ze(async()=>{Q.value?x.value=!1:h.value&&(x.value=!0),await te()});const ve=async()=>{await _.logout(),ue({text:"登出成功",snackbarProps:{color:"teal-lighten-1"}}),X.push("/login")};return _e(()=>_.avatar,s=>{if(s){L.value=!1;const n=new Image;n.onload=()=>{Ae(()=>{K()})},n.onerror=()=>{Ae(()=>{K()})},n.src=s}else L.value=!0},{immediate:!0}),(s,n)=>{const C=Ce("router-link"),$=Ce("router-view");return l(),c(ct,null,{default:e(()=>[a(st,{elevation:"0",border:"b-sm",height:"100",class:"position-fixed"},{default:e(()=>[a(ot,{class:"ms-3 me-1",size:"36",color:"grey-darken-3",onClick:Qe(me,["stop"])}),a(C,{to:"/",class:"d-flex align-center text-decoration-none text-grey-darken-4"},{default:e(()=>[a(Ge,{src:mt,width:E(oe)?44:36,style:{"margin-left":"2px"}},null,8,["width"]),n[16]||(n[16]=b("span",{class:"nav-title"},"永信生活旅遊事業",-1))]),_:1}),a(ut),E(_).isLogin?(l(),c(ft,{key:0,"filter-type":"non-task","button-color":"#333","outline-icon":!0})):A("",!0),E(_).isLogin&&E(h)?(l(),c($e,{key:1,"prepend-icon":"mdi-account-arrow-right",variant:"outlined",rounded:"0",color:"blue-grey-darken-2",class:"me-6 ms-4",onClick:ve},{default:e(()=>n[17]||(n[17]=[o(" 登出 ")])),_:1})):A("",!0)]),_:1}),E(h)?(l(),c(Ue,{key:0,modelValue:V.value,"onUpdate:modelValue":n[8]||(n[8]=t=>V.value=t),rail:x.value,permanent:"","expand-on-hover":x.value,class:"position-fixed border-0 drawer-wrapper",onMouseenter:n[9]||(n[9]=t=>j.value=!0),onMouseleave:n[10]||(n[10]=t=>j.value=!1)},{default:e(()=>[b("div",Et,[x.value?(l(),i(d,{key:1},[a(v,{to:"/profile",color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>n[18]||(n[18]=[o("mdi-account-circle-outline")])),_:1})]),default:e(()=>[a(m,null,{default:e(()=>n[19]||(n[19]=[o("個人資料管理")])),_:1})]),_:1}),j.value?(l(),i("div",Tt,[(l(!0),i(d,null,k(W.value,t=>(l(),i("button",{key:t.id,class:ge(["tab-button",{active:R.value===t.id}]),onClick:r=>R.value=t.id},u(t.label),11,Dt))),128))])):A("",!0)],64)):(l(),i(d,{key:0},[be((l(),c(Te,{elevation:"0",rounded:"0",height:"172",width:"260",class:ge(["pa-0 card-bg position-relative",{loaded:Y.value}]),style:Ee({backgroundImage:`url(${J()})`}),to:"/profile"},{default:e(()=>[Y.value?A("",!0):(l(),c(Re,{key:0,class:"position-absolute w-100 h-100 pa-0 ma-0"})),b("img",{src:J(),alt:"background",style:{display:"none"},onLoad:se},null,40,kt),b("div",xt,[a(Le,{class:"ps-5 pb-3 d-flex justify-space-between pe-2"},{default:e(()=>[a(We,{size:"48",style:{"box-shadow":"0 0 10px rgba(255,255,255,1)"},color:L.value&&(!E(_).avatar||z(E(_).avatar))?ke():void 0},{default:e(()=>[L.value?A("",!0):(l(),c(Re,{key:0,type:"avatar"})),be(a(Ge,{src:E(_).avatar,onLoad:K},null,8,["src"]),[[we,L.value&&E(_).avatar&&!z(E(_).avatar)]]),be(b("span",{class:"text-white font-weight-bold",style:{"font-size":"19px"}},u(xe()),513),[[we,L.value&&(!E(_).avatar||z(E(_).avatar))]])]),_:1},8,["color"])]),_:1}),a(Ne,{style:{"letter-spacing":"2px",color:"white","line-height":"24px"}},{default:e(()=>[a(qe,null,{default:e(()=>[a(Z,{cols:"12",class:"ps-4 pb-0 pt-4"},{default:e(()=>[b("span",Mt,u(E(_).name),1)]),_:1}),a(Z,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[b("span",null,u(E(_).userId),1),E(_).isAdmin?(l(),i("span",bt,u(E(_).adminId),1)):A("",!0)]),_:1}),a(Z,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[o(u(ie()),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["class","style"])),[[pt,"個人資料管理"]]),W.value.length>0?(l(),i("div",Rt,[(l(!0),i(d,null,k(W.value,t=>(l(),i("button",{key:t.id,class:ge(["tab-button",{active:R.value===t.id}]),onClick:r=>R.value=t.id},u(t.label),11,Nt))),128))])):A("",!0)],64))]),a(Oe,{opened:f.value,"onUpdate:opened":n[7]||(n[7]=t=>f.value=t),class:"drawer-scrollable-menu pt-0"},{default:e(()=>[b("div",null,[W.value.length<=1||R.value==="common"?(l(!0),i(d,{key:0},k(S.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"orange-darken-4"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)):A("",!0),R.value==="application"?(l(!0),i(d,{key:1},k(w.value,t=>(l(),c(v,{key:t.text,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128)):A("",!0),R.value==="business"?(l(),i(d,{key:2},[x.value?(l(!0),i(d,{key:1},k(P.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[4]||(n[4]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"purple-darken-2"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)):(l(),i(d,{key:0},[pe.value.length>0?(l(),i(d,{key:0},[n[20]||(n[20]=b("div",{class:"sub-header"}," 業務 ",-1)),(l(!0),i(d,null,k(pe.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:1,modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"purple-darken-2"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:0,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0),fe.value.length>0?(l(),i(d,{key:1},[n[21]||(n[21]=b("div",{class:"sub-header"}," 行銷美編 ",-1)),(l(!0),i(d,null,k(fe.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:1,modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"purple-darken-2"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:0,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0),ne.value.length>0?(l(),i(d,{key:2},[n[22]||(n[22]=b("div",{class:"sub-header"}," 共用 ",-1)),(l(!0),i(d,null,k(ne.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:1,modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"purple-darken-2"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:0,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0)],64))],64)):A("",!0),R.value==="organization"?(l(!0),i(d,{key:3},k(ae.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[5]||(n[5]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"blue-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)):A("",!0),R.value==="system"?(l(!0),i(d,{key:4},k(le.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[6]||(n[6]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"cyan-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128)):A("",!0)]),b("div",null,[E(_).isLogin?A("",!0):(l(),c(v,{key:0,to:"/login"},{prepend:e(()=>[a(p,null,{default:e(()=>n[23]||(n[23]=[o("mdi-account-arrow-left")])),_:1})]),default:e(()=>[a(m,null,{default:e(()=>n[24]||(n[24]=[o("登入")])),_:1})]),_:1}))])]),_:1},8,["opened"])]),_:1},8,["modelValue","rail","expand-on-hover"])):A("",!0),E(h)?A("",!0):(l(),c(Ue,{key:1,modelValue:T.value,"onUpdate:modelValue":n[15]||(n[15]=t=>T.value=t),border:"0",class:"rounded-be-xl position-fixed drawer-wrapper-mobile"},{default:e(()=>[b("div",St,[a(Te,{elevation:"0",rounded:"0",height:"172",class:ge(["pa-0 card-bg",{loaded:Y.value}]),style:Ee({backgroundImage:`url(${J()})`}),to:"/profile"},{default:e(()=>[Y.value?A("",!0):(l(),c(Re,{key:0,class:"position-absolute w-100 h-100 pa-0 ma-0"})),b("img",{src:J(),alt:"background",style:{display:"none"},onLoad:se},null,40,It),b("div",Vt,[a(Le,{class:"ps-5 pb-3"},{default:e(()=>[a(lt,{user:E(_),size:"48","avatar-class":"me-3",style:{"box-shadow":"0 0 10px rgba(255,255,255,1)"}},null,8,["user"])]),_:1}),a(Ne,{style:{"letter-spacing":"2px",color:"white","line-height":"24px"}},{default:e(()=>[a(qe,null,{default:e(()=>[a(Z,{cols:"12",class:"ps-4 pb-0 pt-4"},{default:e(()=>[b("span",ht,u(E(_).name),1)]),_:1}),a(Z,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[b("span",null,u(E(_).userId),1),E(_).isAdmin?(l(),i("span",Ct,u(E(_).adminId),1)):A("",!0)]),_:1}),a(Z,{cols:"12",class:"ps-4 pb-0 pt-0"},{default:e(()=>[o(u(ie()),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["class","style"])]),a(Oe,{class:"drawer-scrollable-menu-mobile pa-0"},{default:e(()=>[b("div",null,[S.value.length>0?(l(),i(d,{key:0},[a(re,null,{default:e(()=>n[25]||(n[25]=[o("常用")])),_:1}),(l(!0),i(d,null,k(S.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[11]||(n[11]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"orange-darken-4"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0),w.value.length>0?(l(),i(d,{key:1},[a(re,null,{default:e(()=>n[26]||(n[26]=[o("應用")])),_:1}),(l(!0),i(d,null,k(w.value,t=>(l(),c(v,{key:t.text,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))],64)):A("",!0),P.value.length>0?(l(),i(d,{key:2},[a(re,null,{default:e(()=>n[27]||(n[27]=[o("業務")])),_:1}),(l(!0),i(d,null,k(P.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[12]||(n[12]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"green-darken-2"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0),ae.value.length>0?(l(),i(d,{key:3},[a(re,null,{default:e(()=>n[28]||(n[28]=[o("組織")])),_:1}),(l(!0),i(d,null,k(ae.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[13]||(n[13]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"blue-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0),le.value.length>0&&E(_).isLogin?(l(),i(d,{key:4},[a(re,null,{default:e(()=>n[29]||(n[29]=[o("系統")])),_:1}),(l(!0),i(d,null,k(le.value,t=>(l(),i(d,{key:t.text},[t.children?(l(),c(U,{key:0,modelValue:f.value,"onUpdate:modelValue":n[14]||(n[14]=r=>f.value=r),value:t.text,persistent:!0,fluid:""},{activator:e(({props:r})=>[a(v,G({ref_for:!0},r,{color:"grey-darken-3"}),{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),i(d,null,k(t.children,r=>(l(),c(v,{key:r.to,to:r.to,color:"grey-darken-3","base-color":"cyan-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(r.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(r.text),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1032,["modelValue","value"])):(l(),c(v,{key:1,to:t.to,color:"grey-darken-3"},{prepend:e(()=>[a(p,null,{default:e(()=>[o(u(t.icon),1)]),_:2},1024)]),default:e(()=>[a(m,null,{default:e(()=>[o(u(t.text),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),128))],64)):A("",!0)]),b("div",null,[E(_).isLogin?A("",!0):(l(),c(v,{key:0,to:"/login"},{prepend:e(()=>[a(p,null,{default:e(()=>n[30]||(n[30]=[o("mdi-account-arrow-left")])),_:1})]),default:e(()=>[a(m,null,{default:e(()=>n[31]||(n[31]=[o("登入")])),_:1})]),_:1}))]),E(h)?(l(),c(it,{key:0,class:"mt-4 mb-2",color:"grey-darken-3",opacity:"0.3"})):A("",!0),b("div",null,[E(_).isLogin?(l(),c(v,{key:0,class:"mt-4",color:"grey-darken-3",onClick:ve},{prepend:e(()=>[a(p,null,{default:e(()=>n[32]||(n[32]=[o("mdi-account-arrow-right")])),_:1})]),default:e(()=>[a(m,null,{default:e(()=>n[33]||(n[33]=[o("登出")])),_:1})]),_:1})):A("",!0)])]),_:1})]),_:1},8,["modelValue"])),a(dt,null,{default:e(()=>[a(At),a($)]),_:1})]),_:1})}}},aa=Pe(wt,[["__scopeId","data-v-d6d4f737"]]);export{aa as default};

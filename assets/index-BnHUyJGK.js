import{r as S,f as z,k as xe,aV as a,Z as k,bH as s,a8 as o,a0 as l,$ as n,a7 as u,bf as c,_ as y,aH as $,aG as b,F,b0 as H,aJ as N,bM as P}from"./@vue-Cr_z6yfx.js";import{u as he}from"./vue-router-BFBClpR6.js";import{_ as _e,u as be,b as De}from"./index-n6mFz3XI.js";import{i as we}from"./vuetify-use-dialog-C5oZ13xz.js";import{_ as I}from"./UserAvatar-aELk0ClH.js";import{T as Ce}from"./TaskSidebar-yVdOtRww.js";import{b as re}from"./route-block-B_A1xBdJ.js";import{Q as ze,w as ne,v as ie,a as je,J as Te,$ as Ae,a0 as J,r as p,F as A,d as Ve,O,K as D}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DsdNZwtm.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";import"./RichTextEditor-Bmyo8zls.js";import"./quill-CgyjECRE.js";import"./parchment-Crftfyop.js";import"./quill-delta-sRnrIlQj.js";import"./fast-diff-Az_-rVRq.js";import"./lodash.clonedeep-BdMlQXCI.js";import"./lodash.isequal-Cpo1Lurr.js";import"./eventemitter3-DGZIYkDQ.js";import"./lodash-es-BKPNmaDy.js";import"./ConfirmDeleteDialog-CuZPFffe.js";const Le={key:0,class:"d-flex justify-center py-16"},Se={key:1},$e={class:"task-tabs-container mb-4"},Be={class:"d-flex align-center justify-space-between"},Ie={class:"search-container me-3"},Me={key:0},Ue={key:0,class:"text-center py-12"},qe={key:0},Fe={key:1},He={key:1},Ne={class:"d-flex align-center"},Pe={class:"d-flex align-center"},Je={key:2,class:"text-medium-emphasis"},Oe={class:"d-flex align-center"},Re={key:0,class:"text-caption ms-1"},We={key:1,class:"text-medium-emphasis"},Ee={class:"d-flex align-center"},Ge=["onClick"],Ke={key:1},Qe={key:0,class:"text-center py-12"},Ze={key:0},Xe={key:1},Ye={key:1},et={class:"d-flex align-center"},tt={class:"d-flex align-center"},st={key:2,class:"text-medium-emphasis"},at={class:"d-flex align-center"},lt={key:0,class:"text-caption ms-1"},ot={key:1,class:"text-medium-emphasis"},rt={class:"d-flex align-center"},nt=["onClick"],it={key:2},dt={key:0,class:"text-center py-12"},ut={key:0},ct={key:1},mt={key:1},pt={class:"d-flex align-center"},vt={class:"d-flex align-center"},gt={key:2,class:"text-medium-emphasis"},yt={class:"d-flex align-center"},ft={key:0,class:"text-caption ms-1"},kt={key:1,class:"text-medium-emphasis"},xt={class:"d-flex align-center"},ht=["onClick"],_t={key:3},bt={key:0,class:"text-center py-12"},Dt={key:0},wt={key:1},Ct={key:1},zt={class:"d-flex align-center"},jt={class:"d-flex align-center"},Tt={key:2,class:"text-medium-emphasis"},At={class:"d-flex align-center"},Vt={key:0,class:"text-caption ms-1"},Lt={key:1,class:"text-medium-emphasis"},St={class:"d-flex align-center"},$t=["onClick"],Bt={key:4},It={key:0,class:"text-center py-12"},Mt={key:0},Ut={key:1},qt={key:1},Ft={class:"d-flex align-center"},Ht={class:"task-name"},Nt={class:"d-flex align-center"},Pt={key:1,class:"text-medium-emphasis"},Jt={key:2,class:"text-medium-emphasis"},Ot={class:"d-flex align-center"},Rt={key:0,class:"text-caption ms-1",style:{color:"rgb(var(--v-theme-on-surface-variant))","font-weight":"500"}},Wt={key:1,class:"text-medium-emphasis"},Et={class:"d-flex align-center"},Gt=["onClick"],Kt={class:"d-flex align-center"},Qt={key:1,class:"text-medium-emphasis"},Zt={key:1,class:"text-caption text-medium-emphasis"},de={__name:"index",setup(Xt){const ue=he(),{apiAuth:ce}=De(),me=we(),E=be(),w=S([]),G=S(!0),R=S(!1),j=S(null),_=S("assigned"),V=S(""),pe=S(!1),K=S(null),W=[{title:"任務名稱",key:"name",sortable:!0},{title:"截止日期",key:"dueDate",sortable:!0},{title:"協作者",key:"collaborators",sortable:!1},{title:"專案",key:"project",sortable:!0},{title:"分類",key:"category",sortable:!0},{title:"上次修改",key:"updatedAt",sortable:!0}],ve=[{title:"任務名稱",key:"name",sortable:!0},{title:"截止日期",key:"dueDate",sortable:!0},{title:"協作者",key:"collaborators",sortable:!1},{title:"專案",key:"project",sortable:!0},{title:"分類",key:"category",sortable:!0},{title:"完成者",key:"completedBy",sortable:!0},{title:"完成於",key:"completedAt",sortable:!0},{title:"上次修改",key:"updatedAt",sortable:!0}],T=z(()=>V.value&&V.value.trim().length>0),Q=z(()=>{let i=w.value.filter(e=>{var d;return e.status!=="completed"&&((d=e.assignee)==null?void 0:d._id)===E._id});return T.value&&(i=i.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase()))),i.sort((e,d)=>!e.dueDate&&!d.dueDate?new Date(d.updatedAt)-new Date(e.updatedAt):e.dueDate?d.dueDate?new Date(e.dueDate)-new Date(d.dueDate):-1:1)}),Z=z(()=>{let i=w.value.filter(e=>{var d,t;return e.status!=="completed"&&((d=e.assignee)==null?void 0:d._id)!==E._id&&((t=e.collaborators)==null?void 0:t.some(r=>r._id===E._id))});return T.value&&(i=i.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase()))),i.sort((e,d)=>!e.dueDate&&!d.dueDate?new Date(d.updatedAt)-new Date(e.updatedAt):e.dueDate?d.dueDate?new Date(e.dueDate)-new Date(d.dueDate):-1:1)}),X=z(()=>{let i=w.value.filter(e=>e.status==="completed");return T.value&&(i=i.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase()))),i.sort((e,d)=>{const t=e.completedAt||e.updatedAt,r=d.completedAt||d.updatedAt;return new Date(r)-new Date(t)})}),te=z(()=>Q.value.length),se=z(()=>Z.value.length),ae=z(()=>X.value.length),Y=z(()=>{let i=w.value.filter(e=>{if(e.status==="completed"||!e.dueDate)return!1;const d=new Date,r=new Date(e.dueDate)-d,g=Math.ceil(r/(1e3*60*60*24));return g>=0&&g<=10});return T.value&&(i=i.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase()))),i.sort((e,d)=>new Date(e.dueDate)-new Date(d.dueDate))}),ee=z(()=>{let i=w.value.filter(e=>{if(e.status==="completed"||!e.dueDate)return!1;const d=new Date,r=new Date(e.dueDate)-d;return Math.ceil(r/(1e3*60*60*24))<0});return T.value&&(i=i.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase()))),i.sort((e,d)=>new Date(e.dueDate)-new Date(d.dueDate))}),le=z(()=>Y.value.length),oe=z(()=>ee.value.length),ge=async()=>{var i,e;try{G.value=!0;const{data:d}=await ce.get("/tasks/my-tasks",{params:{lite:!0}});d.success&&(w.value=d.data)}catch(d){console.error("取得我的任務失敗:",d),me({text:((e=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:e.message)||"取得我的任務失敗",snackbarProps:{color:"red-lighten-1"}})}finally{G.value=!1}},C=i=>i?new Date(i).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"}):"-",B=i=>i?new Date(i).toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-",L=i=>{if(!i)return"text-medium-emphasis";const e=new Date,t=new Date(i)-e,r=Math.ceil(t/(1e3*60*60*24));return r<0?"text-red-darken-1":r<=3?"text-purple-darken-1":r<=10?"text-light-blue-accent-4":"text-medium-emphasis"},m=i=>i.collaborators||[],M=i=>{const e=m(i);return!e||e.length===0?"無協作者":`${e.map(d=>d.name).join("、")}`},U=(i,{item:e})=>{j.value=e,R.value=!0},q=i=>{var e;(e=i.project)!=null&&e._id&&ue.push(`/projectAndTaskManagement/projects/${i.project._id}`)},ye=()=>{K.value&&clearTimeout(K.value),K.value=setTimeout(()=>{},300)},fe=i=>{const e=w.value.findIndex(d=>d._id===i._id);if(e!==-1){const d=w.value[e],t={...i,project:{...d.project,...i.project}};w.value[e]=t}if(j.value&&j.value._id===i._id){const d=j.value,t={...i,project:{...d.project,...i.project}};j.value=t}},ke=i=>{w.value=w.value.filter(e=>e._id!==i),j.value&&j.value._id===i&&(j.value=null,R.value=!1)};return xe(()=>{ge()}),(i,e)=>(a(),k(ze,{"max-width":"1920"},{default:s(()=>{var d;return[o(ie,{class:"mt-1 mx-0 px-2 rounded-lg bg-white"},{default:s(()=>[o(ne,{class:"d-flex align-center pb-4 px-2"},{default:s(()=>e[3]||(e[3]=[l("span",{class:"page-title"},"我的任務",-1)])),_:1})]),_:1}),o(ie,{class:"mt-1 mx-0"},{default:s(()=>[o(ne,null,{default:s(()=>[o(je,{class:"rounded-lg border pt-3",elevation:"0"},{default:s(()=>[G.value?(a(),n("div",Le,[o(Te,{indeterminate:"",color:"grey",size:"64"})])):(a(),n("div",Se,[l("div",$e,[l("div",Be,[o(Ae,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),color:"teal-darken-1","show-arrows":"","align-tabs":"start"},{default:s(()=>[o(J,{value:"assigned"},{default:s(()=>[o(p,{class:"me-2"},{default:s(()=>e[4]||(e[4]=[u(" mdi-account-arrow-right ")])),_:1}),e[5]||(e[5]=u(" 進行中 (被指派) ")),te.value>0?(a(),k(A,{key:0,size:"x-small",color:_.value==="assigned"?"teal-darken-1":"grey",variant:"tonal",class:"ms-2"},{default:s(()=>[u(c(te.value),1)]),_:1},8,["color"])):y("",!0)]),_:1}),o(J,{value:"collaborating"},{default:s(()=>[o(p,{class:"me-2"},{default:s(()=>e[6]||(e[6]=[u(" mdi-account-multiple ")])),_:1}),e[7]||(e[7]=u(" 進行中 (協作者) ")),se.value>0?(a(),k(A,{key:0,size:"x-small",color:_.value==="collaborating"?"teal-darken-1":"grey",variant:"tonal",class:"ms-2"},{default:s(()=>[u(c(se.value),1)]),_:1},8,["color"])):y("",!0)]),_:1}),o(J,{value:"dueSoon",color:"orange-darken-1"},{default:s(()=>[o(p,{class:"me-2"},{default:s(()=>e[8]||(e[8]=[u(" mdi-clock-alert-outline ")])),_:1}),e[9]||(e[9]=u(" 即將截止 ")),le.value>0?(a(),k(A,{key:0,size:"x-small",color:_.value==="dueSoon"?"orange-darken-1":"grey",variant:"tonal",class:"ms-2"},{default:s(()=>[u(c(le.value),1)]),_:1},8,["color"])):y("",!0)]),_:1}),o(J,{value:"overdue",color:"red-darken-1"},{default:s(()=>[o(p,{class:"me-2"},{default:s(()=>e[10]||(e[10]=[u(" mdi-alert-circle-outline ")])),_:1}),e[11]||(e[11]=u(" 已逾期 ")),oe.value>0?(a(),k(A,{key:0,size:"x-small",color:_.value==="overdue"?"red-darken-1":"grey",variant:"tonal",class:"ms-2"},{default:s(()=>[u(c(oe.value),1)]),_:1},8,["color"])):y("",!0)]),_:1}),o(J,{value:"completed"},{default:s(()=>[o(p,{class:"me-2"},{default:s(()=>e[12]||(e[12]=[u(" mdi-check-circle-outline ")])),_:1}),e[13]||(e[13]=u(" 已完成 ")),ae.value>0?(a(),k(A,{key:0,size:"x-small",color:_.value==="completed"?"green-darken-1":"grey",variant:"tonal",class:"ms-2"},{default:s(()=>[u(c(ae.value),1)]),_:1},8,["color"])):y("",!0)]),_:1})]),_:1},8,["modelValue"]),l("div",Ie,[o(Ve,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),label:"搜尋任務名稱","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"search-field",loading:pe.value,onInput:ye},null,8,["modelValue","loading"])])])]),_.value==="assigned"?(a(),n("div",Me,[Q.value.length===0?(a(),n("div",Ue,[T.value?(a(),n("div",qe,[o(p,{size:"56",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>e[14]||(e[14]=[u(" mdi-magnify-remove ")])),_:1}),e[15]||(e[15]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 沒有搜尋到相關任務 ",-1)),e[16]||(e[16]=l("p",{class:"text-body-2 text-medium-emphasis mb-4"}," 請嘗試其他搜尋關鍵字 ",-1))])):(a(),n("div",Fe,[o(p,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>e[17]||(e[17]=[u(" mdi-account-arrow-right ")])),_:1}),e[18]||(e[18]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 尚無被指派的任務 ",-1)),e[19]||(e[19]=l("p",{class:"text-body-2 text-medium-emphasis"}," 您還沒有被指派任何任務 ",-1))]))])):(a(),n("div",He,[o(O,{headers:W,items:Q.value,"items-per-page":20,hover:"",density:"compact",class:"my-tasks-table","onClick:row":U},{"item.name":s(({item:t})=>[l("div",Ne,[o(p,{color:t.status==="completed"?"teal-lighten-1":"grey-lighten-1",class:"me-2 pt-1",size:"20"},{default:s(()=>[u(c(t.status==="completed"?"mdi-check-circle":"mdi-check-circle-outline"),1)]),_:2},1032,["color"]),l("span",{class:$(["task-name",{"text-decoration-line-through":t.status==="completed"}])},c(t.name),3)])]),"item.dueDate":s(({item:t})=>[l("div",Pe,[t.dueDate?(a(),k(p,{key:0,size:"16",class:"me-1",color:L(t.dueDate)},{default:s(()=>e[20]||(e[20]=[u(" mdi-calendar-clock-outline ")])),_:2},1032,["color"])):y("",!0),t.dueDate?(a(),n("span",{key:1,class:$([L(t.dueDate),"due-date-text"])},c(C(t.dueDate)),3)):(a(),n("span",Je," - "))])]),"item.collaborators":s(({item:t})=>{var r;return[l("div",Oe,[o(D,{text:M(t),location:"top",disabled:!((r=m(t))!=null&&r.length)},{activator:s(({props:g})=>{var v,f;return[l("div",b(g,{class:"d-flex align-center"}),[(a(!0),n(F,null,H((v=m(t))==null?void 0:v.slice(0,3),(x,h)=>(a(),k(I,{key:x._id,user:x,size:"24","avatar-class":"collaborator-avatar",style:N({marginLeft:h>0?"-8px":"0",zIndex:10-h})},null,8,["user","style"]))),128)),((f=m(t))==null?void 0:f.length)>3?(a(),n("span",Re," +"+c(m(t).length-3),1)):y("",!0),!m(t)||m(t).length===0?(a(),n("span",We," - ")):y("",!0)],16)]}),_:2},1032,["text","disabled"])])]}),"item.project":s(({item:t})=>{var r,g,v;return[l("div",Ee,[o(p,{color:((r=t.project)==null?void 0:r.iconColor)==="white"?"grey-lighten-1":(g=t.project)==null?void 0:g.iconColor,size:"20",class:"me-2"},{default:s(()=>e[21]||(e[21]=[u(" mdi-square-rounded ")])),_:2},1032,["color"]),l("span",{class:"project-name",onClick:P(f=>q(t),["stop"])},c(((v=t.project)==null?void 0:v.name)||"未知專案"),9,Ge)])]}),"item.category":s(({item:t})=>[o(A,{label:"",size:"small",color:"blue-darken-2"},{default:s(()=>[u(c(t.category||"未分類"),1)]),_:2},1024)]),"item.updatedAt":s(({item:t})=>[o(D,{text:B(t.updatedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.updatedAt)),17)]),_:2},1032,["text"])]),_:2},1032,["items"])]))])):_.value==="collaborating"?(a(),n("div",Ke,[Z.value.length===0?(a(),n("div",Qe,[T.value?(a(),n("div",Ze,[o(p,{size:"56",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>e[22]||(e[22]=[u(" mdi-magnify-remove ")])),_:1}),e[23]||(e[23]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 沒有搜尋到相關任務 ",-1)),e[24]||(e[24]=l("p",{class:"text-body-2 text-medium-emphasis mb-4"}," 請嘗試其他搜尋關鍵字 ",-1))])):(a(),n("div",Xe,[o(p,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>e[25]||(e[25]=[u(" mdi-account-multiple ")])),_:1}),e[26]||(e[26]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 尚無協作的任務 ",-1)),e[27]||(e[27]=l("p",{class:"text-body-2 text-medium-emphasis"}," 您還沒有參與任何協作任務 ",-1))]))])):(a(),n("div",Ye,[o(O,{headers:W,items:Z.value,"items-per-page":20,hover:"",density:"compact",class:"my-tasks-table","onClick:row":U},{"item.name":s(({item:t})=>[l("div",et,[o(p,{color:t.status==="completed"?"teal-lighten-1":"grey-lighten-1",class:"me-2 pt-1",size:"20"},{default:s(()=>[u(c(t.status==="completed"?"mdi-check-circle":"mdi-check-circle-outline"),1)]),_:2},1032,["color"]),l("span",{class:$(["task-name",{"text-decoration-line-through":t.status==="completed"}])},c(t.name),3)])]),"item.dueDate":s(({item:t})=>[l("div",tt,[t.dueDate?(a(),k(p,{key:0,size:"16",class:"me-1",color:L(t.dueDate)},{default:s(()=>e[28]||(e[28]=[u(" mdi-calendar-clock-outline ")])),_:2},1032,["color"])):y("",!0),t.dueDate?(a(),n("span",{key:1,class:$([L(t.dueDate),"due-date-text"])},c(C(t.dueDate)),3)):(a(),n("span",st," - "))])]),"item.collaborators":s(({item:t})=>{var r;return[l("div",at,[o(D,{text:M(t),location:"top",disabled:!((r=m(t))!=null&&r.length)},{activator:s(({props:g})=>{var v,f;return[l("div",b(g,{class:"d-flex align-center"}),[(a(!0),n(F,null,H((v=m(t))==null?void 0:v.slice(0,3),(x,h)=>(a(),k(I,{key:x._id,user:x,size:"24","avatar-class":"collaborator-avatar",style:N({marginLeft:h>0?"-8px":"0",zIndex:10-h})},null,8,["user","style"]))),128)),((f=m(t))==null?void 0:f.length)>3?(a(),n("span",lt," +"+c(m(t).length-3),1)):y("",!0),!m(t)||m(t).length===0?(a(),n("span",ot," - ")):y("",!0)],16)]}),_:2},1032,["text","disabled"])])]}),"item.project":s(({item:t})=>{var r,g,v;return[l("div",rt,[o(p,{color:((r=t.project)==null?void 0:r.iconColor)==="white"?"grey-lighten-1":(g=t.project)==null?void 0:g.iconColor,size:"20",class:"me-2"},{default:s(()=>e[29]||(e[29]=[u(" mdi-square-rounded ")])),_:2},1032,["color"]),l("span",{class:"project-name",onClick:P(f=>q(t),["stop"])},c(((v=t.project)==null?void 0:v.name)||"未知專案"),9,nt)])]}),"item.category":s(({item:t})=>[o(A,{label:"",size:"small",color:"blue-darken-2"},{default:s(()=>[u(c(t.category||"未分類"),1)]),_:2},1024)]),"item.updatedAt":s(({item:t})=>[o(D,{text:B(t.updatedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.updatedAt)),17)]),_:2},1032,["text"])]),_:2},1032,["items"])]))])):_.value==="dueSoon"?(a(),n("div",it,[Y.value.length===0?(a(),n("div",dt,[T.value?(a(),n("div",ut,[o(p,{size:"56",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>e[30]||(e[30]=[u(" mdi-magnify-remove ")])),_:1}),e[31]||(e[31]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 沒有搜尋到相關任務 ",-1)),e[32]||(e[32]=l("p",{class:"text-body-2 text-medium-emphasis mb-4"}," 請嘗試其他搜尋關鍵字 ",-1))])):(a(),n("div",ct,[o(p,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>e[33]||(e[33]=[u(" mdi-clock-alert-outline ")])),_:1}),e[34]||(e[34]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 尚無即將截止的任務 ",-1)),e[35]||(e[35]=l("p",{class:"text-body-2 text-medium-emphasis"}," 10天內即將截止的任務會顯示在這裡 ",-1))]))])):(a(),n("div",mt,[o(O,{headers:W,items:Y.value,"items-per-page":20,hover:"",density:"compact",class:"my-tasks-table","onClick:row":U},{"item.name":s(({item:t})=>[l("div",pt,[o(p,{color:t.status==="completed"?"teal-lighten-1":"grey-lighten-1",class:"me-2 pt-1",size:"20"},{default:s(()=>[u(c(t.status==="completed"?"mdi-check-circle":"mdi-check-circle-outline"),1)]),_:2},1032,["color"]),l("span",{class:$(["task-name",{"text-decoration-line-through":t.status==="completed"}])},c(t.name),3)])]),"item.dueDate":s(({item:t})=>[l("div",vt,[t.dueDate?(a(),k(p,{key:0,size:"16",class:"me-1",color:L(t.dueDate)},{default:s(()=>e[36]||(e[36]=[u(" mdi-calendar-clock-outline ")])),_:2},1032,["color"])):y("",!0),t.dueDate?(a(),n("span",{key:1,class:$([L(t.dueDate),"due-date-text"])},c(C(t.dueDate)),3)):(a(),n("span",gt," - "))])]),"item.collaborators":s(({item:t})=>{var r;return[l("div",yt,[o(D,{text:M(t),location:"top",disabled:!((r=m(t))!=null&&r.length)},{activator:s(({props:g})=>{var v,f;return[l("div",b(g,{class:"d-flex align-center"}),[(a(!0),n(F,null,H((v=m(t))==null?void 0:v.slice(0,3),(x,h)=>(a(),k(I,{key:x._id,user:x,size:"24","avatar-class":"collaborator-avatar",style:N({marginLeft:h>0?"-8px":"0",zIndex:10-h})},null,8,["user","style"]))),128)),((f=m(t))==null?void 0:f.length)>3?(a(),n("span",ft," +"+c(m(t).length-3),1)):y("",!0),!m(t)||m(t).length===0?(a(),n("span",kt," - ")):y("",!0)],16)]}),_:2},1032,["text","disabled"])])]}),"item.project":s(({item:t})=>{var r,g,v;return[l("div",xt,[o(p,{color:((r=t.project)==null?void 0:r.iconColor)==="white"?"grey-lighten-1":(g=t.project)==null?void 0:g.iconColor,size:"20",class:"me-2"},{default:s(()=>e[37]||(e[37]=[u(" mdi-square-rounded ")])),_:2},1032,["color"]),l("span",{class:"project-name",onClick:P(f=>q(t),["stop"])},c(((v=t.project)==null?void 0:v.name)||"未知專案"),9,ht)])]}),"item.category":s(({item:t})=>[o(A,{label:"",size:"small",color:"blue-darken-2"},{default:s(()=>[u(c(t.category||"未分類"),1)]),_:2},1024)]),"item.updatedAt":s(({item:t})=>[o(D,{text:B(t.updatedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.updatedAt)),17)]),_:2},1032,["text"])]),_:2},1032,["items"])]))])):_.value==="overdue"?(a(),n("div",_t,[ee.value.length===0?(a(),n("div",bt,[T.value?(a(),n("div",Dt,[o(p,{size:"56",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>e[38]||(e[38]=[u(" mdi-magnify-remove ")])),_:1}),e[39]||(e[39]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 沒有搜尋到相關任務 ",-1)),e[40]||(e[40]=l("p",{class:"text-body-2 text-medium-emphasis mb-4"}," 請嘗試其他搜尋關鍵字 ",-1))])):(a(),n("div",wt,[o(p,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>e[41]||(e[41]=[u(" mdi-alert-circle-outline ")])),_:1}),e[42]||(e[42]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 尚無已逾期的任務 ",-1)),e[43]||(e[43]=l("p",{class:"text-body-2 text-medium-emphasis"}," 已逾期的任務會顯示在這裡 ",-1))]))])):(a(),n("div",Ct,[o(O,{headers:W,items:ee.value,"items-per-page":20,hover:"",density:"compact",class:"my-tasks-table","onClick:row":U},{"item.name":s(({item:t})=>[l("div",zt,[o(p,{color:t.status==="completed"?"teal-lighten-1":"grey-lighten-1",class:"me-2 pt-1",size:"20"},{default:s(()=>[u(c(t.status==="completed"?"mdi-check-circle":"mdi-check-circle-outline"),1)]),_:2},1032,["color"]),l("span",{class:$(["task-name",{"text-decoration-line-through":t.status==="completed"}])},c(t.name),3)])]),"item.dueDate":s(({item:t})=>[l("div",jt,[t.dueDate?(a(),k(p,{key:0,size:"16",class:"me-1",color:L(t.dueDate)},{default:s(()=>e[44]||(e[44]=[u(" mdi-calendar-clock-outline ")])),_:2},1032,["color"])):y("",!0),t.dueDate?(a(),n("span",{key:1,class:$([L(t.dueDate),"due-date-text"])},c(C(t.dueDate)),3)):(a(),n("span",Tt," - "))])]),"item.collaborators":s(({item:t})=>{var r;return[l("div",At,[o(D,{text:M(t),location:"top",disabled:!((r=m(t))!=null&&r.length)},{activator:s(({props:g})=>{var v,f;return[l("div",b(g,{class:"d-flex align-center"}),[(a(!0),n(F,null,H((v=m(t))==null?void 0:v.slice(0,3),(x,h)=>(a(),k(I,{key:x._id,user:x,size:"24","avatar-class":"collaborator-avatar",style:N({marginLeft:h>0?"-8px":"0",zIndex:10-h})},null,8,["user","style"]))),128)),((f=m(t))==null?void 0:f.length)>3?(a(),n("span",Vt," +"+c(m(t).length-3),1)):y("",!0),!m(t)||m(t).length===0?(a(),n("span",Lt," - ")):y("",!0)],16)]}),_:2},1032,["text","disabled"])])]}),"item.project":s(({item:t})=>{var r,g,v;return[l("div",St,[o(p,{color:((r=t.project)==null?void 0:r.iconColor)==="white"?"grey-lighten-1":(g=t.project)==null?void 0:g.iconColor,size:"20",class:"me-2"},{default:s(()=>e[45]||(e[45]=[u(" mdi-square-rounded ")])),_:2},1032,["color"]),l("span",{class:"project-name",onClick:P(f=>q(t),["stop"])},c(((v=t.project)==null?void 0:v.name)||"未知專案"),9,$t)])]}),"item.category":s(({item:t})=>[o(A,{label:"",size:"small",color:"blue-darken-2"},{default:s(()=>[u(c(t.category||"未分類"),1)]),_:2},1024)]),"item.updatedAt":s(({item:t})=>[o(D,{text:B(t.updatedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.updatedAt)),17)]),_:2},1032,["text"])]),_:2},1032,["items"])]))])):_.value==="completed"?(a(),n("div",Bt,[X.value.length===0?(a(),n("div",It,[T.value?(a(),n("div",Mt,[o(p,{size:"56",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>e[46]||(e[46]=[u(" mdi-magnify-remove ")])),_:1}),e[47]||(e[47]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 沒有搜尋到相關任務 ",-1)),e[48]||(e[48]=l("p",{class:"text-body-2 text-medium-emphasis"}," 請嘗試其他搜尋關鍵字 ",-1))])):(a(),n("div",Ut,[o(p,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>e[49]||(e[49]=[u(" mdi-check-circle-outline ")])),_:1}),e[50]||(e[50]=l("h3",{class:"text-h6 text-medium-emphasis mb-2"}," 尚無已完成的任務 ",-1)),e[51]||(e[51]=l("p",{class:"text-body-2 text-medium-emphasis"}," 完成的任務會顯示在這裡 ",-1))]))])):(a(),n("div",qt,[o(O,{headers:ve,items:X.value,"items-per-page":20,hover:"",density:"compact",class:"my-tasks-table","onClick:row":U},{"item.name":s(({item:t})=>[l("div",Ft,[o(p,{color:"teal",class:"me-2 pt-1",size:"20"},{default:s(()=>e[52]||(e[52]=[u(" mdi-check-circle ")])),_:1}),l("span",Ht,c(t.name),1)])]),"item.dueDate":s(({item:t})=>[l("div",Nt,[t.dueDate?(a(),k(p,{key:0,size:"16",class:"me-1"},{default:s(()=>e[53]||(e[53]=[u(" mdi-calendar-clock-outline ")])),_:1})):y("",!0),t.dueDate?(a(),n("span",Pt,c(C(t.dueDate)),1)):(a(),n("span",Jt," - "))])]),"item.collaborators":s(({item:t})=>{var r;return[l("div",Ot,[o(D,{text:M(t),location:"top",disabled:!((r=m(t))!=null&&r.length)},{activator:s(({props:g})=>{var v,f;return[l("div",b(g,{class:"d-flex align-center"}),[(a(!0),n(F,null,H((v=m(t))==null?void 0:v.slice(0,3),(x,h)=>(a(),k(I,{key:x._id,user:x,size:"24","avatar-class":"collaborator-avatar",style:N({marginLeft:h>0?"-8px":"0",zIndex:10-h})},null,8,["user","style"]))),128)),((f=m(t))==null?void 0:f.length)>3?(a(),n("span",Rt," +"+c(m(t).length-3),1)):y("",!0),!m(t)||m(t).length===0?(a(),n("span",Wt," - ")):y("",!0)],16)]}),_:2},1032,["text","disabled"])])]}),"item.project":s(({item:t})=>{var r,g,v;return[l("div",Et,[o(p,{color:((r=t.project)==null?void 0:r.iconColor)==="white"?"grey-lighten-1":(g=t.project)==null?void 0:g.iconColor,size:"20",class:"me-2"},{default:s(()=>e[54]||(e[54]=[u(" mdi-square-rounded ")])),_:2},1032,["color"]),l("span",{class:"project-name",onClick:P(f=>q(t),["stop"])},c(((v=t.project)==null?void 0:v.name)||"未知專案"),9,Gt)])]}),"item.category":s(({item:t})=>[o(A,{label:"",size:"small",color:"blue-darken-2"},{default:s(()=>[u(c(t.category||"未分類"),1)]),_:2},1024)]),"item.completedBy":s(({item:t})=>[l("div",Kt,[t.completedBy?(a(),k(D,{key:0,text:t.completedBy.name,location:"top"},{activator:s(({props:r})=>[l("div",b(r,{class:"d-flex align-center"}),[o(I,{user:t.completedBy,size:"24","avatar-class":"me-2"},null,8,["user"])],16)]),_:2},1032,["text"])):(a(),n("span",Qt," - "))])]),"item.completedAt":s(({item:t})=>[t.completedAt?(a(),k(D,{key:0,text:B(t.completedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.completedAt)),17)]),_:2},1032,["text"])):(a(),n("span",Zt," - "))]),"item.updatedAt":s(({item:t})=>[o(D,{text:B(t.updatedAt),location:"top"},{activator:s(({props:r})=>[l("span",b(r,{class:"cursor-pointer"}),c(C(t.updatedAt)),17)]),_:2},1032,["text"])]),_:2},1032,["items"])]))])):y("",!0)]))]),_:1})]),_:1})]),_:1}),o(Ce,{modelValue:R.value,"onUpdate:modelValue":e[2]||(e[2]=t=>R.value=t),task:j.value,project:(d=j.value)==null?void 0:d.project,onTaskUpdated:fe,onTaskDeleted:ke},null,8,["modelValue","task","project"])]}),_:1}))}};typeof re=="function"&&re(de);const Ls=_e(de,[["__scopeId","data-v-1006e1e2"]]);export{Ls as default};

import{f as Y,r as o,k as Xe,aS as et,aV as c,$ as h,a8 as s,bH as r,F as C,a0 as i,bf as m,aH as de,aJ as tt,Z as v,a7 as l,_ as T,aG as be,b0 as Z,bM as at,n as st}from"./@vue-Cr_z6yfx.js";import{u as rt}from"./vue-router-BFBClpR6.js";import{_ as nt,u as lt,b as ot}from"./index-BBlsm_-Y.js";import{i as it}from"./vuetify-use-dialog-C5oZ13xz.js";import{q as ut,Q as dt,V as ke,v as q,w as _,a as b,c as x,r as f,L as _e,g as V,N as ct,M as mt,b as M,f as k,F as P,x as Q,y as ce,D as me,d as X,J as pt,E as ft,a2 as gt,e as xe,U as vt,t as ee}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DacfHTdZ.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";const yt={class:"time-display"},wt={class:"date-display text-grey-darken-2"},ht={class:"temperature-display mb-1"},bt={class:"feels-like mb-1"},kt={class:"location-display mb-2"},_t={class:"weather-description mb-2"},xt={class:"weather-details"},Pt={class:"d-flex align-center mb-1"},Ct={class:"humidity-display"},Vt={class:"d-flex align-center"},zt={class:"wind-speed-display"},At={class:"sub-title-1"},Lt={class:"d-flex align-center"},St={class:"me-4 info-item-tag"},Dt={class:"sub-title-2"},Ut={class:"info-item-tag"},Rt={class:"sub-title-2"},It={class:"text-center"},$t={key:0,class:"text-center py-4"},Ft={class:"sub-title-1"},Tt={class:"ms-2 sub-title-2"},Mt={key:0,class:"text-center py-4 text-grey"},Nt={key:0,class:"text-center py-4 text-grey"},jt="https://opendata.cwa.gov.tw/api/v1/rest/datastore",Et="CWA-75827C23-971A-4752-A41C-30CFB98F9FB1",Bt="https://api.open-meteo.com/v1/forecast",Wt={__name:"indexNew",setup(Ht){const{mdAndUp:Pe,smAndUp:Ce,lgAndUp:Ve}=ut(),N=Y(()=>Pe.value?"default":"small"),ze=Y(()=>Ve.value?"360px":Ce.value?"240px":"200px"),Ae=rt(),j=lt(),z=it(),{apiAuth:A}=ot(),pe=o(""),fe=o(""),ge=o("");let te=null;const y=o({temperature:0,condition:"sunny",humidity:0,windSpeed:0,location:"台北市",description:"",feelsLike:0,pressure:0,visibility:0}),L=o(!1),E=o(""),Le=t=>{try{switch(t){case"sunny":case"clear":return new URL(""+new URL("sunny-DUfZb77r.jpg",import.meta.url).href,import.meta.url).href;case"cloudy":case"clouds":return new URL(""+new URL("cloudy-FarEn3Fi.jpg",import.meta.url).href,import.meta.url).href;case"rainy":case"rain":return new URL(""+new URL("rainy-IdGegSpE.jpg",import.meta.url).href,import.meta.url).href;case"snowy":case"snow":return new URL(""+new URL("snowy-Dy1VcyCw.jpg",import.meta.url).href,import.meta.url).href;case"stormy":case"thunderstorm":return new URL(""+new URL("stormy-DDCDoeO5.jpg",import.meta.url).href,import.meta.url).href;case"foggy":case"mist":return new URL(""+new URL("foggy-0CFTKCCg.jpg",import.meta.url).href,import.meta.url).href;default:return new URL(""+new URL("rainy-IdGegSpE.jpg",import.meta.url).href,import.meta.url).href}}catch(e){return console.error("載入天氣背景圖片失敗:",e),new URL(""+new URL("rainy-IdGegSpE.jpg",import.meta.url).href,import.meta.url).href}},Se=Y(()=>Le(y.value.condition)),ve=o(0),ae=o([]),se=o(!1),B=o([]),re=o(!1),W=o([]),ne=o(!1),H=o(""),le=Y(()=>{if(!H.value)return W.value;const t=H.value.toLowerCase();return W.value.filter(e=>{var a;return e.name.toLowerCase().includes(t)||e.extNumber.includes(t)||((a=e.jobTitle)==null?void 0:a.toLowerCase().includes(t))})}),S=o([]),oe=o(!1),O=o(!1),G=o(!1),ie=o(!1),D=o(!1),U=o(!1),R=o(!1),g=o({currentPassword:"",newPassword:"",confirmPassword:""}),K=o(""),I=o(""),$=o(""),ye=()=>{const t=new Date,e=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");pe.value=`${e}:${a}`;const n=t.getFullYear(),u=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getDate().toString().padStart(2,"0");fe.value=`${n}/${u}/${d}`;const p=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];ge.value=p[t.getDay()]},De=t=>{t.link&&window.open(t.link,"_blank")},Ue=async t=>{var e,a;try{z({text:`正在下載 ${t.name}...`,snackbarProps:{color:"blue-lighten-1"}});const n=await A.get(`/sharedResources/${t.url}/download`,{responseType:"blob"}),u=window.URL.createObjectURL(new Blob([n.data])),d=document.createElement("a");d.href=u,d.setAttribute("download",t.name),document.body.appendChild(d),d.click(),d.remove(),window.URL.revokeObjectURL(u),z({text:`${t.name} 下載成功`,snackbarProps:{color:"teal-lighten-1"}})}catch(n){console.error("下載檔案失敗:",n),z({text:((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||"下載檔案失敗",snackbarProps:{color:"red-lighten-1"}})}},Re=t=>{switch(t){case"pdf":return"mdi-file-pdf-box";case"word":return"mdi-file-word-box";case"excel":return"mdi-file-excel-box";case"powerpoint":return"mdi-file-powerpoint-box";case"image":return"mdi-file-image-box";case"zip":return"mdi-folder-zip";default:return"mdi-file-document"}},Ie=t=>{switch(t){case"pdf":return"red";case"word":return"blue";case"excel":return"green";case"powerpoint":return"orange";case"image":return"purple";case"zip":return"amber";default:return"grey"}},$e=t=>{if(!t)return"0 B";const e=1024,a=["B","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,n)*100)/100+" "+a[n]},Fe=async()=>{try{oe.value=!0;const{data:t}=await A.get("/sharedResources/active",{params:{limit:10}});t.success&&(S.value=t.result.map(e=>{var a;return{id:e._id,name:e.name,type:e.type,size:$e(((a=e.file)==null?void 0:a.size)||0),url:e._id,description:e.description}}))}catch(t){console.error("獲取共享資源數據失敗:",t),S.value=[]}finally{oe.value=!1}},Te=async()=>{try{ne.value=!0;const{data:t}=await A.get("/employees/all",{params:{status:"在職",itemsPerPage:-1}});if(t.success){let e=[];Array.isArray(t.result)?e=t.result:t.result&&Array.isArray(t.result.data)&&(e=t.result.data);const a={永信台北:"cyan-darken-2",永信高雄:"orange-darken-2",永信台中:"pink-darken-1",永信桃園:"indigo-darken-2",default:"grey-darken-1"};W.value=e.filter(n=>n.extNumber).map(n=>{var p,w;const u=((p=n.company)==null?void 0:p.name)||"其他",d=a[u]||a.default;return{_id:n._id,name:n.name,extNumber:n.extNumber,jobTitle:n.jobTitle||"職員",department:((w=n.department)==null?void 0:w.name)||"",companyName:u,companyColor:d}}).sort((n,u)=>n.name.localeCompare(u.name,"zh-Hant"))}}catch(t){console.error("獲取分機表數據失敗:",t),W.value=[]}finally{ne.value=!1}},Me=async()=>{try{se.value=!0;const{data:t}=await A.get("/carousels/active");t.success&&(ae.value=t.result.map(e=>({id:e._id,image:e.image,title:e.title,description:e.description,link:e.link})))}catch(t){console.error("獲取輪播圖數據失敗:",t),ae.value=[{id:1,image:"https://picsum.photos/800/400?random=1",title:"輪播項目 1"},{id:2,image:"https://picsum.photos/800/400?random=2",title:"輪播項目 2"},{id:3,image:"https://picsum.photos/800/400?random=3",title:"輪播項目 3"},{id:4,image:"https://picsum.photos/800/400?random=4",title:"輪播項目 4"},{id:5,image:"https://picsum.photos/800/400?random=5",title:"輪播項目 5"}]}finally{se.value=!1}},Ne=async()=>{try{re.value=!0;const{data:t}=await A.get("/announcements",{params:{isActive:!0,page:1,itemsPerPage:5,sortBy:"createdAt",sortOrder:"desc"}});t.success&&(B.value=t.result.data.sort((e,a)=>e.isPinned&&!a.isPinned?-1:!e.isPinned&&a.isPinned?1:0))}catch(t){console.error("載入公告錯誤:",t)}finally{re.value=!1}},je=async()=>{try{L.value=!0,E.value="",console.log("正在獲取天氣數據...");try{console.log("嘗試中央氣象署 API...");const n=await fetch(`${jt}/O-A0003-001?Authorization=${Et}&format=JSON&locationName=臺北市`);if(n.ok){const u=await n.json();if(console.log("中央氣象署 API 成功:",u),u.success&&u.records&&u.records.Station){const d=u.records.Station.find(p=>p.CountyName==="臺北市"||p.CountyName==="台北市");if(d){console.log("找到台北市觀測站數據:",d),y.value={temperature:Math.round(parseFloat(d.AirTemperature||0)),condition:Ee(d),humidity:Math.round(parseFloat(d.RelativeHumidity||0)),windSpeed:Math.round(parseFloat(d.WindSpeed||0)),location:d.StationName||"台北市",description:Be(d),feelsLike:Math.round(parseFloat(d.AirTemperature||0)),pressure:Math.round(parseFloat(d.AirPressure||0)),visibility:10},console.log("中央氣象署天氣數據更新成功:",y.value);return}}}}catch(n){console.log("中央氣象署 API 失敗，嘗試其他 API...",n.message)}console.log("跳過國際 API，直接使用備用 API..."),console.log("使用備用天氣 API...");const t=await fetch(`${Bt}?latitude=25.0478&longitude=121.5319&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code&timezone=Asia%2FTaipei`);if(!t.ok)throw new Error("所有 API 都失敗了");const e=await t.json();console.log("備用 API 響應:",e);const a=e.current.weather_code;y.value={temperature:Math.round(e.current.temperature_2m),condition:We(a),humidity:e.current.relative_humidity_2m,windSpeed:Math.round(e.current.wind_speed_10m*3.6),location:await Oe(),description:He(a),feelsLike:Math.round(e.current.temperature_2m),pressure:1013,visibility:10},console.log("天氣數據更新成功:",y.value)}catch(t){console.error("所有天氣 API 都失敗:",t),E.value="無法獲取天氣數據，使用預設資料",y.value={temperature:28,condition:"sunny",humidity:65,windSpeed:12,location:"台北市",description:"晴朗",feelsLike:30,pressure:1013,visibility:10}}finally{L.value=!1}},Ee=t=>{const e=t.Weather;if(parseFloat(t.Precipitation||0)>0)return"rainy";if(e){const n=e.toLowerCase();if(n.includes("雨")||n.includes("rain"))return"rainy";if(n.includes("雷")||n.includes("thunder"))return"stormy";if(n.includes("霧")||n.includes("fog"))return"foggy";if(n.includes("雲")||n.includes("cloud"))return"cloudy";if(n.includes("晴")||n.includes("sunny"))return"sunny"}return"sunny"},Be=t=>{const e=t.Weather,a=parseFloat(t.Precipitation||0);return a>0?`降雨 ${a}mm`:e||"晴朗"},We=t=>t===0?"sunny":t>=1&&t<=3?"cloudy":t>=45&&t<=48?"foggy":t>=51&&t<=67?"rainy":t>=71&&t<=77?"snowy":t>=80&&t<=86?"rainy":t>=95&&t<=99?"stormy":"sunny",He=t=>t===0?"晴朗":t>=1&&t<=3?"多雲":t>=45&&t<=48?"霧":t>=51&&t<=67?"雨":t>=71&&t<=77?"雪":t>=80&&t<=86?"陣雨":t>=95&&t<=99?"雷暴":"晴朗",Oe=async()=>{var t,e;try{const a=await new Promise((p,w)=>{navigator.geolocation.getCurrentPosition(p,w,{timeout:5e3,enableHighAccuracy:!1})}),{latitude:n,longitude:u}=a.coords,d=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${n}&longitude=${u}&localityLanguage=zh`);if(d.ok){const p=await d.json();console.log("地理位置數據:",p);const w=p.city||p.locality,he=p.countryName||p.principalSubdivision;console.log("完整地理位置數據:",p),console.log("城市:",w),console.log("國家:",he),console.log("行政區信息:",(t=p.localityInfo)==null?void 0:t.administrative);const J=(e=p.localityInfo)==null?void 0:e.administrative;if(J&&J.length>0)for(let ue=1;ue<J.length;ue++){const F=J[ue];if(F&&F.name&&F.name.includes("區"))return console.log("找到區級信息:",F.name),`${w}, ${F.name}`}if(w&&w!==he)return w;if(w)return w}}catch(a){console.log("無法獲取地理位置:",a.message)}return"台北市"},Ge=t=>({system:"red-darken-1",update:"blue-darken-1",announcement:"green-darken-1",maintenance:"orange-darken-1",event:"purple-darken-1"})[t]||"grey-darken-1",Ke=t=>({system:"系統",update:"更新",announcement:"一般",maintenance:"維護",event:"活動"})[t]||"一般",Je=t=>{if(!t)return"-";const e=new Date(t),a=new Date,n=a-e;if(n<864e5&&a.getDate()===e.getDate()){const u=Math.floor(n/36e5);return u===0?`${Math.floor(n/6e4)}分鐘前`:`${u}小時前`}return n<1728e5&&a.getDate()-e.getDate()===1?"昨天":e.toLocaleDateString("zh-TW",{month:"2-digit",day:"2-digit"})},Ye=t=>{Ae.push(`/announcement/${t._id}`)},Ze=()=>{let t=!0;return g.value.currentPassword||(K.value="請輸入當前密碼",t=!1),g.value.newPassword?g.value.newPassword.length<8&&(I.value="新密碼長度至少需要8個字元",t=!1):(I.value="請輸入新密碼",t=!1),g.value.confirmPassword?g.value.newPassword!==g.value.confirmPassword&&($.value="兩次輸入的密碼不相符",t=!1):($.value="請確認新密碼",t=!1),t},qe=()=>{O.value=!1,st(()=>{setTimeout(()=>{G.value=!0},150)})},we=async()=>{if(Ze())try{ie.value=!0;const t=await j.changePassword(g.value.currentPassword,g.value.newPassword);z({text:t.message,snackbarProps:{color:"teal-lighten-1"}}),j.isDefaultPasswordChanged=!0,Qe()}catch(t){z({text:t.message,snackbarProps:{color:"red-lighten-1"}})}finally{ie.value=!1}},Qe=()=>{G.value=!1,g.value={currentPassword:"",newPassword:"",confirmPassword:""},K.value="",I.value="",$.value="",D.value=!1,U.value=!1,R.value=!1};return Xe(async()=>{ye(),te=setInterval(ye,1e3),await Promise.all([je(),Me(),Ne(),Te(),Fe()]),j.isLogin&&!j.isDefaultPasswordChanged&&(O.value=!0)}),et(()=>{te&&clearInterval(te)}),(t,e)=>(c(),h(C,null,[s(dt,{class:"px-6","max-width":"2280px"},{default:r(()=>[s(q,{class:"mt-md-3"},{default:r(()=>[s(_,{cols:"12",lg:"9"},{default:r(()=>[s(q,null,{default:r(()=>[s(_,{cols:"12",sm:"3",class:"pb-2 d-none d-md-block"},{default:r(()=>[s(q,null,{default:r(()=>[s(_,{cols:"12",sm:"6",lg:"12",class:"pb-2 d-none d-lg-block"},{default:r(()=>[s(b,{class:"dashboard-card time-card",elevation:"2"},{default:r(()=>[s(x,{class:"d-flex flex-column align-center justify-center h-100"},{default:r(()=>[i("div",yt,m(pe.value),1),i("div",wt,m(fe.value)+" "+m(ge.value),1)]),_:1})]),_:1})]),_:1}),s(_,{cols:"12"},{default:r(()=>[s(b,{class:de(["dashboard-card weather-card",{"weather-card-loading":L.value}]),elevation:"2",style:tt(L.value?{}:{backgroundImage:`url(${Se.value})`})},{default:r(()=>[s(x,{class:"d-flex flex-column align-center justify-center h-100 px-4 pt-2 pb-4"},{default:r(()=>[L.value?(c(),v(ee,{key:0,type:"image, text, text",class:"w-100"})):(c(),h(C,{key:1},[i("div",ht,m(y.value.temperature)+"°C ",1),i("div",bt," 體感 "+m(y.value.feelsLike)+"°C ",1),i("div",kt,m(y.value.location),1),i("div",_t,m(y.value.description),1),i("div",xt,[i("div",Pt,[s(f,{size:"16",color:"white",class:"me-2"},{default:r(()=>e[14]||(e[14]=[l(" mdi-water ")])),_:1}),i("span",Ct,"濕度 "+m(y.value.humidity)+"%",1)]),i("div",Vt,[s(f,{size:"16",color:"white",class:"me-2"},{default:r(()=>e[15]||(e[15]=[l(" mdi-weather-windy ")])),_:1}),i("span",zt,"風速 "+m(y.value.windSpeed)+" km/h",1)])]),E.value?(c(),v(_e,{key:0,type:"warning",variant:"tonal",size:"small",class:"mt-2"},{default:r(()=>[l(m(E.value),1)]),_:1})):T("",!0)],64))]),_:1})]),_:1},8,["class","style"])]),_:1})]),_:1})]),_:1}),s(_,{cols:"12",md:"9",class:"pb-md-0"},{default:r(()=>[s(b,{class:"dashboard-card swiper-card",elevation:"2"},{default:r(()=>[se.value?(c(),v(ee,{key:0,type:"image"})):(c(),v(mt,{key:1,modelValue:ve.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ve.value=a),cycle:"",color:"#999",interval:"6000","show-arrows":"hover","hide-delimiter-background":"",height:ze.value,touch:""},{prev:r(({props:a})=>[s(V,be(a,{class:"custom-carousel-btn",size:N.value,variant:"text"}),{default:r(()=>[s(f,{size:"28",color:"amber-darken-1"},{default:r(()=>e[16]||(e[16]=[l(" mdi-chevron-left ")])),_:1})]),_:2},1040,["size"])]),next:r(({props:a})=>[s(V,be(a,{class:"custom-carousel-btn",size:N.value,variant:"text"}),{default:r(()=>[s(f,{size:"28",color:"amber-darken-1"},{default:r(()=>e[17]||(e[17]=[l(" mdi-chevron-right ")])),_:1})]),_:2},1040,["size"])]),default:r(()=>[(c(!0),h(C,null,Z(ae.value,a=>(c(),v(ct,{key:a.id,src:a.image,cover:"",draggable:"true",class:de({"has-link":a.link}),onClick:n=>De(a)},null,8,["src","class","onClick"]))),128))]),_:1},8,["modelValue","height"]))]),_:1})]),_:1})]),_:1}),s(q,null,{default:r(()=>[s(_,{cols:"12"},{default:r(()=>[s(b,{class:"dashboard-card news-card pa-0",elevation:"2"},{default:r(()=>[s(M,{class:"d-flex align-center bg-blue-grey-darken-2"},{default:r(()=>[s(f,{size:"18",color:"white",class:"me-2"},{default:r(()=>e[18]||(e[18]=[l(" mdi-newspaper-variant ")])),_:1}),e[19]||(e[19]=i("span",{class:"home-card-title"},"最新消息",-1)),s(k),s(P,{label:"",size:"small",color:"white",variant:"outlined"},{default:r(()=>[l(m(B.value.length)+" 則消息 ",1)]),_:1})]),_:1}),s(x,{class:"pa-4"},{default:r(()=>[re.value?(c(),v(ee,{key:0,type:"list-item@3"})):(c(),v(me,{key:1,class:"pa-0"},{default:r(()=>[(c(!0),h(C,null,Z(B.value,(a,n)=>(c(),v(Q,{key:a._id,class:de(["px-3 news-item",{"news-item-even":n%2===0,"news-item-odd":n%2===1}]),onClick:u=>Ye(a)},{default:r(()=>[s(ce,{class:"d-flex align-center flex-wrap gap-2"},{default:r(()=>{var u;return[a.isPinned?(c(),v(P,{key:0,label:"",color:"red-darken-1",size:"small",class:"me-1"},{default:r(()=>[s(f,{icon:"mdi-pin",size:"10",class:"me-1"}),e[20]||(e[20]=l(" 置頂 "))]),_:1})):T("",!0),s(P,{color:Ge(a.type),label:"",size:"small",class:"me-4"},{default:r(()=>[l(m(Ke(a.type)),1)]),_:2},1032,["color"]),i("span",At,m(a.title),1),s(k),i("div",Lt,[i("div",St,[s(f,{icon:"mdi-account",size:"12",class:"me-1"}),i("span",Dt,m(((u=a.creator)==null?void 0:u.name)||"未知"),1)]),i("div",Ut,[s(f,{icon:"mdi-clock-outline",size:"12",class:"me-1"}),i("span",Rt,m(Je(a.createdAt)),1)])])]}),_:2},1024)]),_:2},1032,["class","onClick"]))),128)),B.value.length===0?(c(),v(Q,{key:0,class:"text-center text-grey"},{default:r(()=>e[21]||(e[21]=[l(" 暫無公告 ")])),_:1})):T("",!0)]),_:1})),i("div",It,[s(V,{variant:"text",color:"blue-grey-darken-2",size:"small",onClick:e[1]||(e[1]=a=>t.$router.push("/announcement"))},{default:r(()=>[e[22]||(e[22]=l(" 查看更多 ")),s(f,{icon:"mdi-chevron-right",size:"18",class:"ms-1"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(_,{cols:"12",lg:"3"},{default:r(()=>[s(b,{class:"dashboard-card extension-card pb-4 mb-4",elevation:"2"},{default:r(()=>[s(M,{class:"d-flex align-center bg-blue-grey-darken-2"},{default:r(()=>[s(f,{size:"18",color:"white",class:"me-2"},{default:r(()=>e[23]||(e[23]=[l(" mdi-phone ")])),_:1}),e[24]||(e[24]=i("span",{class:"home-card-title"},"分機查詢",-1)),s(k),s(P,{label:"",size:"small",color:"white",variant:"outlined"},{default:r(()=>[l(m(le.value.length)+" 人 ",1)]),_:1})]),_:1}),s(X,{modelValue:H.value,"onUpdate:modelValue":e[2]||(e[2]=a=>H.value=a),density:"compact",variant:"outlined",placeholder:"搜尋姓名或分機","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"",class:"mb-3 px-3 pt-2"},null,8,["modelValue"]),s(x,{class:"me-2 ps-3 pe-2 pt-0 pb-2 overflow-y-auto",style:{height:"230px"}},{default:r(()=>[ne.value?(c(),h("div",$t,[s(pt,{indeterminate:"",color:"blue-grey-darken-1",size:"32",width:"3"})])):(c(),v(me,{key:1,class:"pa-0 extension-list-scroll"},{default:r(()=>[(c(!0),h(C,null,Z(le.value,a=>(c(),v(Q,{key:a._id,class:"px-3 py-1 mb-1 rounded extension-item",density:"compact"},{append:r(()=>[s(P,{label:"",size:"small",color:"blue-darken-1",style:{border:"1px solid #1E88E5"}},{default:r(()=>[s(f,{size:"12",class:"me-1"},{default:r(()=>e[25]||(e[25]=[l(" mdi-phone ")])),_:1}),l(" "+m(a.extNumber),1)]),_:2},1024)]),default:r(()=>[s(ce,{class:"text-body-2 font-weight-medium d-flex align-center"},{default:r(()=>[s(P,{size:"x-small",color:a.companyColor,class:"me-2"},{default:r(()=>[l(m(a.companyName),1)]),_:2},1032,["color"]),i("span",Ft,m(a.name),1),i("span",Tt,"("+m(a.jobTitle)+")",1)]),_:2},1024)]),_:2},1024))),128)),le.value.length===0?(c(),h("div",Mt," 查無資料 ")):T("",!0)]),_:1}))]),_:1})]),_:1}),s(b,{class:"dashboard-card shared-resources-card pa-0",elevation:"2"},{default:r(()=>[s(M,{class:"d-flex align-center bg-blue-grey-darken-2"},{default:r(()=>[s(f,{size:"18",color:"white",class:"me-2"},{default:r(()=>e[26]||(e[26]=[l(" mdi-folder-outline ")])),_:1}),e[27]||(e[27]=i("span",{class:"home-card-title"},"共享資源",-1)),s(k),s(P,{label:"",size:"small",color:"white",variant:"outlined"},{default:r(()=>[l(m(S.value.length)+" 個檔案 ",1)]),_:1})]),_:1}),s(x,{class:"pa-4"},{default:r(()=>[oe.value?(c(),v(ee,{key:0,type:"list-item@4"})):(c(),v(me,{key:1,class:"pa-0"},{default:r(()=>[(c(!0),h(C,null,Z(S.value,a=>(c(),v(Q,{key:a.id,class:"px-2 mb-2 resource-item",onClick:n=>Ue(a)},{prepend:r(()=>[s(ft,{color:Ie(a.type),size:"36"},{default:r(()=>[s(f,{size:"18",color:"white"},{default:r(()=>[l(m(Re(a.type)),1)]),_:2},1024)]),_:2},1032,["color"])]),append:r(()=>[s(f,{size:"20",color:"grey-darken-1"},{default:r(()=>e[28]||(e[28]=[l(" mdi-download ")])),_:1})]),default:r(()=>[s(ce,{class:"text-body-2 font-weight-medium"},{default:r(()=>[l(m(a.name),1)]),_:2},1024),s(gt,{class:"text-caption text-grey-darken-1"},{default:r(()=>[l(m(a.size),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),S.value.length===0?(c(),h("div",Nt," 暫無共享資源 ")):T("",!0)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ke,{modelValue:O.value,"onUpdate:modelValue":e[3]||(e[3]=a=>O.value=a),persistent:"","max-width":"380"},{default:r(()=>[s(b,{class:"rounded-lg pb-1"},{default:r(()=>[s(M,{class:"d-flex align-center ps-6 pe-4 py-1 bg-red-darken-1 mb-4"},{default:r(()=>[s(f,{class:"me-2",size:"20"},{default:r(()=>e[29]||(e[29]=[l(" mdi-alert-circle ")])),_:1}),e[30]||(e[30]=i("span",{class:"card-title text-white",style:{padding:"10px 0"}},"請立即修改密碼",-1)),s(k)]),_:1}),s(x,{class:"pb-0"},{default:r(()=>[s(_e,{type:"warning",color:"red-darken-1",variant:"tonal",class:"mb-0 font-weight-bold"},{default:r(()=>e[31]||(e[31]=[l(" 為了您的帳戶安全，請立即修改系統密碼。 ")])),_:1})]),_:1}),s(xe,{class:"me-4 mb-3 mt-4"},{default:r(()=>[s(k),s(V,{color:"red-darken-1",variant:"flat",size:N.value,onClick:qe},{default:r(()=>e[32]||(e[32]=[l(" 立即修改 ")])),_:1},8,["size"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(ke,{modelValue:G.value,"onUpdate:modelValue":e[13]||(e[13]=a=>G.value=a),persistent:"","max-width":"320"},{default:r(()=>[s(b,{class:"rounded-lg pb-1"},{default:r(()=>[s(M,{class:"d-flex align-center ps-6 pe-4 py-1 bg-blue-darken-2 mb-4"},{default:r(()=>[s(f,{class:"me-2",size:"20"},{default:r(()=>e[33]||(e[33]=[l(" mdi-lock ")])),_:1}),e[34]||(e[34]=i("span",{class:"card-title text-white",style:{padding:"10px 0"}},"修改密碼",-1)),s(k)]),_:1}),s(x,{class:"pb-0"},{default:r(()=>[s(vt,{onSubmit:at(we,["prevent"])},{default:r(()=>[s(X,{modelValue:g.value.currentPassword,"onUpdate:modelValue":[e[4]||(e[4]=a=>g.value.currentPassword=a),e[5]||(e[5]=a=>K.value="")],"error-messages":K.value,type:D.value?"text":"password","append-inner-icon":D.value?"mdi-eye-off":"mdi-eye",label:"當前密碼",variant:"outlined",density:"compact",class:"mb-4","onClick:appendInner":e[6]||(e[6]=a=>D.value=!D.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),s(X,{modelValue:g.value.newPassword,"onUpdate:modelValue":[e[7]||(e[7]=a=>g.value.newPassword=a),e[8]||(e[8]=a=>I.value="")],"error-messages":I.value,type:U.value?"text":"password","append-inner-icon":U.value?"mdi-eye-off":"mdi-eye",label:"新密碼",variant:"outlined",density:"compact",class:"mb-4","onClick:appendInner":e[9]||(e[9]=a=>U.value=!U.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),s(X,{modelValue:g.value.confirmPassword,"onUpdate:modelValue":[e[10]||(e[10]=a=>g.value.confirmPassword=a),e[11]||(e[11]=a=>$.value="")],"error-messages":$.value,type:R.value?"text":"password","append-inner-icon":R.value?"mdi-eye-off":"mdi-eye",label:"確認新密碼",variant:"outlined",density:"compact",class:"mb-4","onClick:appendInner":e[12]||(e[12]=a=>R.value=!R.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),s(V,{type:"submit",style:{display:"none"}})]),_:1})]),_:1}),s(xe,{class:"me-4 mb-3"},{default:r(()=>[s(k),s(V,{color:"blue-darken-2",variant:"outlined",size:N.value,loading:ie.value,onClick:we},{default:r(()=>e[35]||(e[35]=[l(" 確認 ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},da=nt(Wt,[["__scopeId","data-v-e62d76ad"]]);export{da as default};

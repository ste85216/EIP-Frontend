import{f as fe,r as i,w as ge,k as la,aV as n,Z as u,bH as t,a8 as s,a0 as m,bJ as C,a7 as v,$ as I,b0 as J,bf as V,F as S,_,aJ as be,bM as Ue,u as ee,b as Se,aG as ta,bK as sa}from"./@vue-Cr_z6yfx.js";import{u as na}from"./vue-router-CS4OewbW.js";import{u as ra,a as $e}from"./vee-validate-BXV9nMa7.js";import{_ as oa,u as ua,b as ia}from"./index-mGnb0KKF.js";import{i as da}from"./vuetify-use-dialog-C5oZ13xz.js";import{C as ma}from"./ConfirmDeleteDialogWithTextField-C3L40kcN.js";import{b as va,c as Fe}from"./yup-WHNMwcW8.js";import{l as pa}from"./lodash-CiJWSuVn.js";import{q as ca,Q as fa,w as k,r as w,d as ae,v as Ve,a as q,g,D as le,x as $,y as te,ab as se,U as Ee,c as Te,J as ga,P as K,e as Be,W as ya,f as Me,V as Ae,T as h}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DacfHTdZ.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-DzadwsAs.js";const ka={style:{width:"260px"},class:"ms-auto d-flex align-center"},ba={class:"card-title mt-3 mb-2 mx-6 d-flex align-center justify-space-between"},Va={class:"order-number"},xa={class:"card-title mt-3 mb-2 mx-6 d-flex align-center justify-space-between"},Ca={class:"order-number"},wa={class:"card-title mt-3 mb-2 mx-6 d-flex align-center justify-space-between"},ha={class:"order-number"},Ia={class:"card-title mt-3 mb-2 mx-6 d-flex align-center justify-space-between"},_a={class:"order-number"},za={class:"card-title mt-3 mb-2 mx-6 d-flex align-center justify-space-between"},Pa={class:"order-number"},Da={class:"card-title px-4 pb-2 d-flex align-center justify-space-between"},Ua={key:0,class:"d-flex align-center"},Sa={key:0,class:"d-flex justify-center align-center",style:{"min-height":"270px"}},$a={class:"d-flex align-center item-container"},Fa={__name:"marketingCategoryManagement",setup(Ea){const{apiAuth:P}=ia(),je=ua(),B=da(),qe=na(),{smAndUp:ye}=ca(),ke=fe(()=>ye.value?"default":"small"),ne=i(!1),z=i(null),F=i(!1),D=i([{name:"",error:""}]),N=i(null),Le=va({name:Fe().required("請輸入名稱"),order:Fe().required("請輸入排序").test("is-number","排序必須大於0",l=>{if(!l)return!0;const e=Number(l);return!isNaN(e)&&e>=1})}),{handleSubmit:Re}=ra({validationSchema:Le}),{value:M,errorMessage:Oe}=$e("name"),{value:E,errorMessage:Je}=$e("order"),Ke=()=>{let l=!1;return o.value.type===2&&!d.value&&(T.value="請選擇廣告渠道",l=!0),o.value.type===4&&(d.value||(T.value="請選擇廣告渠道",l=!0),b.value||(R.value="請選擇平台",l=!0)),D.value.forEach(e=>{e.error="",e.name.trim()||(e.error="請輸入名稱",l=!0)}),!l},o=i({open:!1,id:"",type:0}),Ne=fe(()=>ye.value?"360":"100%"),re=i([]),oe=i([]),ue=i([]),ie=i([]),de=i([]),d=i(null),b=i(null),L=i([]),W=i([]),T=i(""),R=i(""),xe=async()=>{try{const{data:l}=await P.get("/marketing/categories/options",{params:{type:1}});l.success&&(L.value=l.result)}catch(l){j(l)}},Ce=async()=>{try{if(b.value=null,W.value=[],!d.value)return;const{data:l}=await P.get("/marketing/categories/options",{params:{type:2,parentId:d.value}});l.success&&(W.value=l.result)}catch(l){j(l)}},We=fe(()=>["新增行銷主題","新增廣告渠道","新增平台","新增線別","新增平台細項"][o.value.type]),He=fe(()=>{var r,c;if(!o.value.id)return!0;if(!z.value)return!1;const l=z.value.name!==M.value||z.value.order!==parseInt(E.value);let e=!1;return o.value.type===2?e=(((r=z.value.parentId)==null?void 0:r._id)||z.value.parentId)!==d.value:o.value.type===4&&(e=(((c=z.value.parentId)==null?void 0:c._id)||z.value.parentId)!==b.value),l||e}),A=i(""),me=i(!1),Ge=pa.debounce(()=>{O()},300);ge(A,()=>{me.value=!0,p.value={0:1,1:1,2:1,3:1,4:1},Ge()});const O=async(l=null)=>{try{if(me.value=!0,l!==null){const e={[`page${l}`]:p.value[l]};A.value&&(e.quickSearch=A.value);const{data:r}=await P.get("/marketing/categories/all",{params:e});if(r.success)switch(l){case 0:re.value=r.result.marketingThemes.data,y.value[0]=r.result.marketingThemes.totalPages;break;case 1:oe.value=r.result.advertisingChannels.data,y.value[1]=r.result.advertisingChannels.totalPages;break;case 2:ue.value=r.result.platforms.data,y.value[2]=r.result.platforms.totalPages;break;case 3:ie.value=r.result.details.data,y.value[3]=r.result.details.totalPages;break;case 4:de.value=r.result.platformDetails.data,y.value[4]=r.result.platformDetails.totalPages;break}}else{const e={page0:p.value[0],page1:p.value[1],page2:p.value[2],page3:p.value[3],page4:p.value[4]};A.value&&(e.quickSearch=A.value);const{data:r}=await P.get("/marketing/categories/all",{params:e});r.success&&(re.value=r.result.marketingThemes.data,oe.value=r.result.advertisingChannels.data,ue.value=r.result.platforms.data,ie.value=r.result.details.data,de.value=r.result.platformDetails.data,y.value={0:r.result.marketingThemes.totalPages,1:r.result.advertisingChannels.totalPages,2:r.result.platforms.totalPages,3:r.result.details.totalPages,4:r.result.platformDetails.totalPages})}}catch(e){j(e)}finally{me.value=!1}},H=async l=>{try{if(o.value={open:!0,id:"",type:l},N.value&&N.value.reset(),M.value="",E.value="",d.value=null,b.value=null,T.value="",R.value="",D.value=[{name:"",error:""}],l===2||l===4){Z.value=!0;try{await xe()}finally{Z.value=!1}}}catch(e){j(e)}},G=async l=>{var e,r,c;try{if(!l||!l._id){console.error("無效的項目:",l);return}if(o.value={open:!0,id:l._id,type:l.type},M.value=l.name||"",E.value=l.order||1,z.value={...l},l.type===2||l.type===4){Z.value=!0;try{if(l.type===2){await xe();const a=((e=l.parentId)==null?void 0:e._id)||l.parentId;d.value=a}else if(l.type===4){const a=((r=l.parentId)==null?void 0:r._id)||l.parentId,[f,x]=await Promise.all([P.get("/marketing/categories/options",{params:{type:1}}),P.get("/marketing/categories/options",{params:{type:2,id:a}})]);if(f.data.success&&(L.value=f.data.result),x.data.success&&x.data.result.length>0){const X=x.data.result[0];d.value=((c=X.parentId)==null?void 0:c._id)||X.parentId;const Y=await P.get("/marketing/categories/options",{params:{type:2,parentId:d.value}});Y.data.success&&(W.value=Y.data.result,b.value=a)}}}finally{Z.value=!1}}}catch(a){console.error("編輯項目時發生錯誤:",a),j(a)}},ve=()=>{try{const l=o.value.type;o.value={open:!1,id:"",type:l},z.value=null,N.value&&N.value.reset(),M.value="",E.value="",d.value=null,b.value=null,T.value="",R.value="",D.value=[{name:"",error:""}]}catch(l){console.error("關閉對話框時發生錯誤:",l)}},Qe=async l=>{if(l.preventDefault(),!F.value)try{if(F.value=!0,o.value.id)await Re(async e=>{const r={name:e.name,type:o.value.type,order:parseInt(e.order)};if(o.value.type===2){if(!d.value){T.value="請選擇廣告渠道";return}r.parentId=d.value}else if(o.value.type===4){if(!b.value){R.value="請選擇平台";return}r.parentId=b.value}const{data:c}=await P.patch(`/marketing/categories/${o.value.id}`,r);if(!c.success)throw new Error(c.message||"更新失敗");B({text:"分類更新成功",snackbarProps:{color:"teal-lighten-1"}}),ve(),O(o.value.type)})();else{if(!Ke()){F.value=!1;return}const e=D.value.filter(c=>c.name.trim());if(e.length===0){F.value=!1;return}const{data:r}=await P.post("/marketing/categories/batch",{items:e.map(c=>({name:c.name.trim(),type:o.value.type,parentId:o.value.type===2?d.value:o.value.type===4?b.value:null}))});if(!r.success)throw new Error(r.message||"新增失敗");B({text:"分類新增成功",snackbarProps:{color:"teal-lighten-1"}}),ve(),O(o.value.type)}}catch(e){console.error("提交時發生錯誤:",e),j(e)}finally{F.value=!1}},Ze=async()=>{if(o.value.id)try{const l=o.value.type;await P.delete(`/marketing/categories/${o.value.id}`),B({text:"分類刪除成功",snackbarProps:{color:"teal-lighten-1"}}),ve(),O(l)}catch(l){j(l)}finally{ne.value=!1}},j=l=>{var r,c,a;console.error("Error:",l);const e=((c=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:c.message)||"操作失敗";((a=l==null?void 0:l.response)==null?void 0:a.status)===401?(je.logout(),qe.push("/login"),B({text:"登入已過期，請重新登入",snackbarProps:{color:"red-lighten-1"}})):B({text:e,snackbarProps:{color:"red-lighten-1"}})};la(async()=>{await O()});const p=i({0:1,1:1,2:1,3:1,4:1}),y=i({0:1,1:1,2:1,3:1,4:1}),Q=(l,e)=>{p.value[l]=e,O(l)},Xe=()=>{D.value.push({name:"",error:""})},Ye=l=>{D.value.splice(l,1)};ge(D,l=>{l.forEach(e=>{e.name.trim()&&(e.error="")})},{deep:!0});const Z=i(!1);ge(b,(l,e)=>{o.value.type===4&&o.value.id&&e&&l!==e&&(E.value="1",B({text:"更換平台，排序將自動設為 1，以確保資料正確性",snackbarProps:{color:"info",timeout:5e3}}))}),ge(d,(l,e)=>{(o.value.type===2||o.value.type===4)&&o.value.id&&e&&l!==e&&(E.value="1",B({text:"更換廣告渠道，排序將自動設為 1，以確保資料正確性",snackbarProps:{color:"info",timeout:5e3}}))});const U=i({open:!1,count:"",error:""}),ea=()=>{U.value={open:!0,count:"",error:""}},we=()=>{U.value.open=!1},he=()=>{const l=parseInt(U.value.count);if(!l||l<1||l>10){U.value.error="請輸入1-10之間的數字";return}U.value.error="",D.value=Array(l).fill(null).map(()=>({name:"",error:""})),we()},Ie=["#F06292","#FF5722","#F9A825","#009688","#795548","#0097A7","#283593","#2196F3","#607D8B","#388E3C","#00695C"],pe=i(new Map),_e=l=>{if(!l)return{backgroundColor:"#757575"};if(!pe.value.has(l)){const e=pe.value.size%Ie.length;pe.value.set(l,Ie[e])}return{backgroundColor:pe.value.get(l)}},ze=["#4CAF50","#00BCD4","#3F51B5","#9C27B0","#E91E63","#FFC107","#FF5722","#795548","#607D8B","#009688"],ce=i(new Map),aa=l=>{if(!l)return{backgroundColor:"#757575"};if(!ce.value.has(l)){const e=ce.value.size%ze.length;ce.value.set(l,ze[e])}return{backgroundColor:ce.value.get(l)}};return(l,e)=>(n(),u(fa,{"max-width":"2000"},{default:t(()=>{var r,c;return[s(Ve,{class:"elevation-4 rounded-lg py-4 py-sm-8 px-1 px-sm-10 mt-2 mt-sm-6 mx-0 mx-sm-4 mx-md-4 mb-4 bg-white"},{default:t(()=>[s(k,{cols:"12",class:"ps-3 pb-3 d-flex align-center"},{default:t(()=>[e[29]||(e[29]=m("h3",{class:"d-inline"}," 行銷分類管理 ",-1)),m("div",ka,[C(s(w,{icon:"mdi-information",size:"small",color:"blue-grey-darken-2",class:"me-2"},null,512),[[h,"可搜尋各分類名稱","start"]]),s(ae,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=a=>A.value=a),label:"快速搜尋","append-inner-icon":"mdi-magnify",loading:me.value,"base-color":"#666",color:"blue-grey-darken-3",variant:"outlined",density:"compact","hide-details":"",clearable:""},null,8,["modelValue","loading"])])]),_:1}),s(k,{cols:"12",class:"mt-4"},{default:t(()=>[s(Ve,{class:"d-flex justify-space-between"},{default:t(()=>[s(k,{cols:"12",class:"custom-col"},{default:t(()=>[s(q,{class:"marketing-theme-card",elevation:"0"},{default:t(()=>[m("div",ba,[e[30]||(e[30]=v(" 行銷主題 ")),C((n(),u(g,{icon:"",size:"small",variant:"plain",color:"teal-darken-1",onClick:e[1]||(e[1]=a=>H(0))},{default:t(()=>[s(w,{icon:"mdi-plus",size:"24"})]),_:1})),[[h,"新增行銷主題","start"]])]),s(le,null,{default:t(()=>[re.value.length>0?(n(!0),I(S,{key:0},J(re.value,a=>(n(),u($,{key:a._id},{prepend:t(()=>[m("div",Va,V(a.order),1)]),append:t(()=>[C((n(),u(g,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:f=>G(a)},{default:t(()=>[s(w,null,{default:t(()=>e[31]||(e[31]=[v("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])),[[h,"編輯行銷主題","start"]])]),default:t(()=>[s(te,{class:"ms-2"},{default:t(()=>[v(V(a.name),1)]),_:2},1024)]),_:2},1024))),128)):(n(),u($,{key:1,class:"bg-white"},{default:t(()=>e[32]||(e[32]=[m("div",{class:"text-center w-100 text-grey"}," 沒有資料 ",-1)])),_:1}))]),_:1}),y.value[0]>1?(n(),u(se,{key:0,modelValue:p.value[0],"onUpdate:modelValue":[e[2]||(e[2]=a=>p.value[0]=a),e[3]||(e[3]=a=>Q(0,a))],length:y.value[0],"total-visible":5,density:"compact",class:"mt-2 pb-2 px-2"},null,8,["modelValue","length"])):_("",!0)]),_:1})]),_:1}),s(k,{cols:"12",class:"custom-col"},{default:t(()=>[s(q,{class:"marketing-theme-card",elevation:"0"},{default:t(()=>[m("div",xa,[e[33]||(e[33]=v(" 廣告渠道 ")),C((n(),u(g,{icon:"",size:"small",variant:"plain",color:"teal-darken-1",onClick:e[4]||(e[4]=a=>H(1))},{default:t(()=>[s(w,{icon:"mdi-plus",size:"24"})]),_:1})),[[h,"新增廣告渠道","start"]])]),s(le,null,{default:t(()=>[oe.value.length>0?(n(!0),I(S,{key:0},J(oe.value,a=>(n(),u($,{key:a._id},{prepend:t(()=>[m("div",Ca,V(a.order),1)]),append:t(()=>[C((n(),u(g,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:f=>G(a)},{default:t(()=>[s(w,null,{default:t(()=>e[34]||(e[34]=[v("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])),[[h,"編輯廣告渠道","start"]])]),default:t(()=>[s(te,{class:"ms-2"},{default:t(()=>[v(V(a.name),1)]),_:2},1024)]),_:2},1024))),128)):(n(),u($,{key:1,class:"bg-white"},{default:t(()=>e[35]||(e[35]=[m("div",{class:"text-center w-100 text-grey"}," 沒有資料 ",-1)])),_:1}))]),_:1}),y.value[1]>1?(n(),u(se,{key:0,modelValue:p.value[1],"onUpdate:modelValue":[e[5]||(e[5]=a=>p.value[1]=a),e[6]||(e[6]=a=>Q(1,a))],length:y.value[1],"total-visible":5,density:"compact",class:"mt-2 pb-2 px-2"},null,8,["modelValue","length"])):_("",!0)]),_:1})]),_:1}),s(k,{cols:"12",class:"custom-col-big"},{default:t(()=>[s(q,{class:"marketing-theme-card",elevation:"0"},{default:t(()=>[m("div",wa,[e[36]||(e[36]=v(" 平台 ")),C((n(),u(g,{icon:"",size:"small",variant:"plain",color:"teal-darken-1",onClick:e[7]||(e[7]=a=>H(2))},{default:t(()=>[s(w,{icon:"mdi-plus",size:"24"})]),_:1})),[[h,"新增平台","start"]])]),s(le,null,{default:t(()=>[ue.value.length>0?(n(!0),I(S,{key:0},J(ue.value,a=>(n(),u($,{key:a._id},{prepend:t(()=>{var f,x;return[m("div",{class:"channel-name",style:be(_e((f=a.parentId)==null?void 0:f.name))},V(((x=a.parentId)==null?void 0:x.name)||"無"),5),m("div",ha,V(a.order),1)]}),append:t(()=>[C((n(),u(g,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:f=>G(a)},{default:t(()=>[s(w,null,{default:t(()=>e[37]||(e[37]=[v("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])),[[h,"編輯平台","start"]])]),default:t(()=>[s(te,{class:"ms-2"},{default:t(()=>[v(V(a.name),1)]),_:2},1024)]),_:2},1024))),128)):(n(),u($,{key:1,class:"bg-white"},{default:t(()=>e[38]||(e[38]=[m("div",{class:"text-center w-100 text-grey"}," 沒有資料 ",-1)])),_:1}))]),_:1}),y.value[2]>1?(n(),u(se,{key:0,modelValue:p.value[2],"onUpdate:modelValue":[e[8]||(e[8]=a=>p.value[2]=a),e[9]||(e[9]=a=>Q(2,a))],length:y.value[2],"total-visible":5,density:"compact",class:"mt-2 pb-2 px-2"},null,8,["modelValue","length"])):_("",!0)]),_:1})]),_:1}),s(k,{cols:"12",class:"custom-col-big"},{default:t(()=>[s(q,{class:"marketing-theme-card",elevation:"0"},{default:t(()=>[m("div",Ia,[e[39]||(e[39]=v(" 平台細項 ")),C((n(),u(g,{icon:"",size:"small",variant:"plain",color:"teal-darken-1",onClick:e[10]||(e[10]=a=>H(4))},{default:t(()=>[s(w,{icon:"mdi-plus",size:"24"})]),_:1})),[[h,"新增平台細項","start"]])]),s(le,null,{default:t(()=>[de.value.length>0?(n(!0),I(S,{key:0},J(de.value,a=>(n(),u($,{key:a._id},{prepend:t(()=>{var f,x,X,Y,Pe,De;return[m("div",{class:"channel-name",style:be(_e((x=(f=a.parentId)==null?void 0:f.parentId)==null?void 0:x.name))},V(((Y=(X=a.parentId)==null?void 0:X.parentId)==null?void 0:Y.name)||"無"),5),m("div",{class:"platform-name",style:be(aa((Pe=a.parentId)==null?void 0:Pe.name))},V(((De=a.parentId)==null?void 0:De.name)||"無"),5),m("div",_a,V(a.order),1)]}),append:t(()=>[C((n(),u(g,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:f=>G(a)},{default:t(()=>[s(w,null,{default:t(()=>e[40]||(e[40]=[v("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])),[[h,"編輯平台細項","start"]])]),default:t(()=>[s(te,{class:"ms-2"},{default:t(()=>[v(V(a.name),1)]),_:2},1024)]),_:2},1024))),128)):(n(),u($,{key:1,class:"bg-white"},{default:t(()=>e[41]||(e[41]=[m("div",{class:"text-center w-100 text-grey"}," 沒有資料 ",-1)])),_:1}))]),_:1}),y.value[4]>1?(n(),u(se,{key:0,modelValue:p.value[4],"onUpdate:modelValue":[e[11]||(e[11]=a=>p.value[4]=a),e[12]||(e[12]=a=>Q(4,a))],length:y.value[4],"total-visible":5,density:"compact",class:"mt-2 pb-2 px-2"},null,8,["modelValue","length"])):_("",!0)]),_:1})]),_:1}),s(k,{cols:"12",class:"custom-col"},{default:t(()=>[s(q,{class:"marketing-theme-card",elevation:"0"},{default:t(()=>[m("div",za,[e[42]||(e[42]=v(" 線別 ")),C((n(),u(g,{icon:"",size:"small",variant:"plain",color:"teal-darken-1",onClick:e[13]||(e[13]=a=>H(3))},{default:t(()=>[s(w,{icon:"mdi-plus",size:"24"})]),_:1})),[[h,"新增線別","start"]])]),s(le,null,{default:t(()=>[ie.value.length>0?(n(!0),I(S,{key:0},J(ie.value,a=>(n(),u($,{key:a._id},{prepend:t(()=>[m("div",Pa,V(a.order),1)]),append:t(()=>[C((n(),u(g,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:f=>G(a)},{default:t(()=>[s(w,null,{default:t(()=>e[43]||(e[43]=[v("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])),[[h,"編輯線別","start"]])]),default:t(()=>[s(te,{class:"ms-2"},{default:t(()=>[v(V(a.name),1)]),_:2},1024)]),_:2},1024))),128)):(n(),u($,{key:1,class:"bg-white"},{default:t(()=>e[44]||(e[44]=[m("div",{class:"text-center w-100 text-grey"}," 沒有資料 ",-1)])),_:1}))]),_:1}),y.value[3]>1?(n(),u(se,{key:0,modelValue:p.value[3],"onUpdate:modelValue":[e[14]||(e[14]=a=>p.value[3]=a),e[15]||(e[15]=a=>Q(3,a))],length:y.value[3],"total-visible":5,density:"compact",class:"mt-2 pb-2 px-2"},null,8,["modelValue","length"])):_("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(Ae,{modelValue:o.value.open,"onUpdate:modelValue":e[25]||(e[25]=a=>o.value.open=a),persistent:"",width:Ne.value,fullscreen:!ee(ye)},{default:t(()=>[s(Ee,{ref_key:"form",ref:N,disabled:F.value,onSubmit:Ue(Qe,["prevent"])},{default:t(()=>[s(q,{class:"rounded-lg px-4 pt-7 pb-6"},{default:t(()=>[m("div",Da,[m("span",null,V(o.value.id?"編輯分類":We.value),1),o.value.id?_("",!0):(n(),I("div",Ua,[C((n(),u(g,{icon:"",color:"grey-darken-1",size:"22",class:"me-2",onClick:ea},{default:t(()=>[s(w,{size:"14"},{default:t(()=>e[45]||(e[45]=[v(" mdi-plus-box-multiple-outline ")])),_:1})]),_:1})),[[h,"批量新增項目","start"]]),C((n(),u(g,{icon:"",color:"grey-darken-1",size:"22",onClick:Xe},{default:t(()=>[s(w,{size:"14"},{default:t(()=>e[46]||(e[46]=[v(" mdi-plus ")])),_:1})]),_:1})),[[h,"新增項目","start"]])]))]),s(Te,{class:"mt-3 pa-3"},{default:t(()=>[Z.value?(n(),I("div",Sa,[s(ga,{indeterminate:"",color:"deep-purple-darken-2",size:"40"})])):(n(),u(Ve,{key:1},{default:t(()=>[o.value.id?(n(),I(S,{key:1},[o.value.type===2?(n(),u(k,{key:0,cols:"12"},{default:t(()=>[s(K,{modelValue:d.value,"onUpdate:modelValue":e[19]||(e[19]=a=>d.value=a),items:L.value,"item-title":"name","item-value":"_id",label:"*廣告渠道","error-messages":T.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items","error-messages"])]),_:1})):_("",!0),o.value.type===4?(n(),I(S,{key:1},[s(k,{cols:"12"},{default:t(()=>[s(K,{modelValue:d.value,"onUpdate:modelValue":[e[20]||(e[20]=a=>d.value=a),Ce],items:L.value,"item-title":"name","item-value":"_id",label:"*廣告渠道","error-messages":T.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items","error-messages"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(K,{modelValue:b.value,"onUpdate:modelValue":e[21]||(e[21]=a=>b.value=a),items:W.value,"item-title":"name","item-value":"_id",label:"*平台","error-messages":R.value,variant:"outlined",density:"compact",disabled:!d.value,"hide-details":"auto"},null,8,["modelValue","items","error-messages","disabled"])]),_:1})],64)):_("",!0),s(k,{cols:"12"},{default:t(()=>[s(ae,{modelValue:ee(M),"onUpdate:modelValue":e[22]||(e[22]=a=>Se(M)?M.value=a:null),"error-messages":ee(Oe),label:"*名稱",type:"text",variant:"outlined",density:"compact",clearable:"","hide-details":"auto"},null,8,["modelValue","error-messages"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(ae,{modelValue:ee(E),"onUpdate:modelValue":e[23]||(e[23]=a=>Se(E)?E.value=a:null),"error-messages":ee(Je),label:"*排序",variant:"outlined",density:"compact",hint:"輸入想要的順序位置，其他項目會自動調整","persistent-hint":""},null,8,["modelValue","error-messages"])]),_:1})],64)):(n(),I(S,{key:0},[o.value.type===2?(n(),u(k,{key:0,cols:"12"},{default:t(()=>[s(K,{modelValue:d.value,"onUpdate:modelValue":e[16]||(e[16]=a=>d.value=a),items:L.value,"item-title":"name","item-value":"_id",label:"*廣告渠道","error-messages":T.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items","error-messages"])]),_:1})):_("",!0),o.value.type===4?(n(),I(S,{key:1},[s(k,{cols:"12"},{default:t(()=>[s(K,{modelValue:d.value,"onUpdate:modelValue":[e[17]||(e[17]=a=>d.value=a),Ce],items:L.value,"item-title":"name","item-value":"_id",label:"*廣告渠道","error-messages":T.value,variant:"outlined",density:"compact","hide-details":"auto"},null,8,["modelValue","items","error-messages"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(K,{modelValue:b.value,"onUpdate:modelValue":e[18]||(e[18]=a=>b.value=a),items:W.value,"item-title":"name","item-value":"_id",label:"*平台","error-messages":R.value,variant:"outlined",density:"compact",disabled:!d.value,"hide-details":"auto"},null,8,["modelValue","items","error-messages","disabled"])]),_:1})],64)):_("",!0),(n(!0),I(S,null,J(D.value,(a,f)=>(n(),u(k,{key:f,cols:"12"},{default:t(()=>[m("div",$a,[s(ae,{modelValue:a.name,"onUpdate:modelValue":x=>a.name=x,"error-messages":a.error,label:"*名稱",type:"text",variant:"outlined",density:"compact",clearable:"","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","error-messages"]),D.value.length>1?(n(),u(g,{key:0,icon:"mdi-delete",variant:"text",color:"red-lighten-1",size:"small",class:"ms-2",onClick:x=>Ye(f)},null,8,["onClick"])):_("",!0)])]),_:2},1024))),128))],64))]),_:1}))]),_:1}),s(Be,{class:"px-3 pt-4"},{default:t(()=>[s(ya,null,{default:t(({isHovering:a,props:f})=>[o.value.id?(n(),u(g,ta({key:0},f,{color:a?"red-lighten-1":"grey",variant:"outlined",size:ke.value,"prepend-icon":"mdi-delete",onClick:e[24]||(e[24]=x=>ne.value=!0)}),{default:t(()=>e[47]||(e[47]=[v(" 刪除 ")])),_:2},1040,["color","size"])):_("",!0)]),_:1}),s(Me),s(g,{color:"grey-darken-1",variant:"outlined",size:ke.value,loading:F.value,onClick:ve},{default:t(()=>e[48]||(e[48]=[v(" 取消 ")])),_:1},8,["size","loading"]),s(g,{color:"teal-darken-1",variant:"outlined",type:"submit",class:"ms-1",size:ke.value,loading:F.value,disabled:o.value.id&&!He.value||F.value},{default:t(()=>e[49]||(e[49]=[v(" 送出 ")])),_:1},8,["size","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1},8,["modelValue","width","fullscreen"]),s(ma,{modelValue:ne.value,"onUpdate:modelValue":e[26]||(e[26]=a=>ne.value=a),title:"確認刪除分類",message:`確定要刪除「<span class='text-pink-lighten-1' style='font-weight: 800;'>${((r=z.value)==null?void 0:r.name)||""}</span>」嗎？ 此操作無法復原。`,"expected-name":((c=z.value)==null?void 0:c.name)||"","input-label":"分類名稱",onConfirm:Ze},null,8,["modelValue","message","expected-name"]),s(Ae,{modelValue:U.value.open,"onUpdate:modelValue":e[28]||(e[28]=a=>U.value.open=a),persistent:"",width:"300"},{default:t(()=>[s(q,{class:"rounded-lg px-3 pt-6 pb-4"},{default:t(()=>[s(Ee,{onSubmit:Ue(he,["prevent"])},{default:t(()=>[e[52]||(e[52]=m("div",{class:"card-title px-4 pb-2"}," 批量新增項目 ",-1)),s(Te,{class:"mt-3 pa-3"},{default:t(()=>[s(ae,{modelValue:U.value.count,"onUpdate:modelValue":e[27]||(e[27]=a=>U.value.count=a),label:"請輸入要總共需要多少項目",type:"number",min:"1",max:"50",variant:"outlined",density:"compact","error-messages":U.value.error,"hide-details":"auto",onKeyup:sa(he,["enter"])},null,8,["modelValue","error-messages"])]),_:1}),s(Be,{class:"px-3 pt-4"},{default:t(()=>[s(Me),s(g,{color:"grey-darken-1",variant:"outlined",onClick:we},{default:t(()=>e[50]||(e[50]=[v(" 取消 ")])),_:1}),s(g,{color:"teal-darken-1",variant:"outlined",class:"ms-1",type:"submit"},{default:t(()=>e[51]||(e[51]=[v(" 確定 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}},ol=oa(Fa,[["__scopeId","data-v-69049c61"]]);export{ol as default};

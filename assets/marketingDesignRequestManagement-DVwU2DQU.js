import{f as ge,a as B,r as z,k as bl,aV as i,Z as h,bH as a,b2 as yl,b3 as fl,a8 as t,a0 as r,u as be,bJ as Dt,_ as P,a7 as b,bf as _,$ as f,aH as Qe,aG as We,b0 as M,F as C,bK as Ct,bM as vl,n as kl}from"./@vue-Cr_z6yfx.js";import{_ as xl,b as _l}from"./index-ZcDhEpUM.js";import{i as hl}from"./vuetify-use-dialog-C5oZ13xz.js";import{J as wl}from"./jszip-LXpuTjqP.js";import{F as Vl}from"./file-saver-B_2csP4m.js";import{_ as Dl}from"./ConfirmDeleteDialog-CuZPFffe.js";import{_ as Cl}from"./ConfirmDialog-CJtUY0XN.js";import{q as Nl,Q as $l,w as v,a as T,v as S,g as V,A as Z,c as J,_ as Te,P as ye,r as k,R as Il,C as Nt,F as _e,D as Ze,x as Ee,y as Xe,b as re,f as G,U as Ye,ad as he,d as L,a1 as ie,e as Pe,V as le,J as Ul}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./vue-router-CS4OewbW.js";import"./jspdf-DacfHTdZ.js";import"./core-js-D2hAHviU.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";const zl={class:"d-flex flex-column"},Tl={class:"d-flex flex-column"},El={class:"d-flex flex-column"},Pl={class:"d-flex flex-column"},Sl={class:"d-flex flex-column"},ql={class:"d-flex flex-column"},Rl={class:"py-1"},Ml={key:0},Fl={class:"text-caption text-grey-darken-1"},Ol={class:"text-center"},jl={class:"text-center"},Al={class:"text-center"},Bl={key:0,class:"department-note-cell"},Ll=["onClick","innerHTML"],Hl=["innerHTML"],Jl={key:1,class:"department-note-cell"},Gl={class:"text-center"},Kl={class:"card-title text-light-blue-darken-2 mb-3"},Ql={class:"text-body-2 info-item-value"},Wl={class:"text-grey-darken-1"},Zl={key:0,class:"text-grey-lighten-1"},Xl={class:"printing-section-header d-flex align-center px-5 py-3"},Yl={class:"sub-title text-light-blue-darken-2 font-weight-bold"},ea={key:0},ta={class:"d-flex flex-wrap mt-2",style:{gap:"16px"}},la=["src","alt"],aa={key:1},sa={key:5},na={class:"d-flex align-center mb-2"},oa={class:"sub-card-title font-weight-bold text-grey-darken-1"},ra={class:"text-body-2 info-item-value"},ia={key:0},da={class:"text-grey-darken-1"},ua={key:1,class:"text-grey-lighten-1"},ca={key:6},ma={key:7,class:"w-100 border py-4 px-3 rounded"},pa={class:"d-flex align-center justify-space-between mb-4"},ga={class:"d-flex align-center"},ba={class:"sub-title text-grey-darken-1"},ya={key:0,class:"text-center py-8"},fa={class:"px-3 border rounded-lg h-100 d-flex flex-column"},va={class:"d-flex justify-space-between align-center my-2",style:{height:"40px"}},ka={class:"text-subtitle-2 text-grey-darken-1"},xa=["src"],_a={class:"lightbox-content"},ha=["src"],wa={class:"d-flex align-center mb-4"},Va={class:"d-flex align-center mb-2"},Da={class:"text-body-2"},Ca={class:"d-flex align-center mb-2"},Na={class:"text-body-2"},$a={class:"d-flex align-center mb-2"},Ia={class:"text-body-2"},Ua={class:"text-caption text-grey-darken-1"},za={class:"d-flex align-center mb-2"},Ta={class:"text-body-2"},Ea={class:"d-flex align-center mb-2"},Pa={class:"text-body-2"},Sa={class:"d-flex align-center mb-2"},qa={class:"text-body-2"},Ra={class:"d-flex align-center mb-4 mt-4"},Ma={class:"d-flex align-center mb-2"},Fa={class:"text-body-2 info-item-value"},Oa={class:"d-flex flex-column"},ja={class:"text-grey-darken-1 me-2 flex-grow-1"},Aa={class:"d-flex align-center mb-2"},Ba={class:"sub-title text-blue-grey-darken-2 font-weight-bold"},La={class:"d-flex align-center mb-2"},Ha={class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},Ja={class:"text-body-2 info-item-value"},Ga={key:0,style:{"white-space":"pre-line"}},Ka={key:1},Qa={key:0,style:{"white-space":"pre-line"}},Wa={key:1},Za={class:"d-flex align-center mb-2"},Xa={class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},Ya={class:"text-body-2 info-item-value"},es={key:0,style:{"white-space":"pre-line"}},ts={key:1},ls={key:0,style:{"white-space":"pre-line"}},as={key:1},ss={key:0,class:"d-flex flex-column"},ns={class:"text-grey-darken-1 me-2 flex-grow-1"},os={key:1,class:"text-grey"},rs={key:7,class:"w-100 py-4 px-3 rounded"},is={key:0,class:"text-center py-8"},ds={class:"px-3 border rounded-lg h-100 d-flex flex-column"},us={class:"d-flex justify-space-between align-center my-2",style:{height:"40px"}},cs={class:"text-subtitle-2 text-grey-darken-1"},ms={class:"mb-4"},ps={class:"sub-title mb-4"},gs={class:"bg-orange-lighten-5 pa-4 rounded-lg border-left-orange-darken-2"},bs={class:"d-flex align-center mb-2"},ys={class:"d-flex align-center mb-0"},fs={class:"d-flex align-center mb-3"},vs={class:"d-flex align-center mb-4"},ks={key:0,class:"d-flex justify-center align-center py-8"},xs={key:0,class:"text-center py-8"},_s={class:"d-flex align-center mb-1"},hs={class:"text-grey-darken-3 font-weight-bold me-4"},ws={class:"me-4 text-grey-darken-2",style:{"font-size":"14px"}},Vs={class:"me-4 text-grey",style:{"font-size":"14px"}},Ds={class:"d-flex align-center flex-wrap mt-1"},Cs={class:"d-flex align-center mb-3"},Ns={class:"d-flex align-center"},$s={class:"font-weight-bold text-grey-darken-3"},Is={class:"text-grey-darken-2"},Us={class:"d-flex align-center mb-3"},zs={class:"text-blue-grey-darken-2 font-weight-bold"},Ts={class:"d-flex align-end my-2"},Es={__name:"marketingDesignRequestManagement",setup(Ps){const{apiAuth:O}=_l(),w=hl(),{smAndUp:de}=Nl(),et=ge(()=>de.value?"default":"small"),we=B({show:!1,currentImage:null}),D=B({show:!1,currentImage:null,currentImageName:"",currentIndex:0,images:[]}),fe=z(!1),K=z([]),tt=z(0),Q=B({page:1,itemsPerPage:10,sortBy:[{key:"applicationDate",order:"desc"}]}),$t=[{title:"ç”³è«‹ç·¨è™Ÿ",key:"designRequestNumber",sortable:!0},{title:"ç”³è«‹æ—¥æœŸ",key:"applicationDate",sortable:!0},{title:"ç”³è«‹äºº",key:"applicant.name",sortable:!1},{title:"ç”³è«‹é¡å‹",key:"productType",minWidth:100,sortable:!1},{title:"ç‹€æ…‹",key:"status",align:"center",sortable:!0},{title:"è™•ç†äººå“¡",key:"assignedDesigner.name",align:"center",sortable:!1},{title:"éƒ¨é–€å‚™è¨»",key:"departmentNote",width:300,align:"center",sortable:!1},{title:"æ“ä½œ",key:"actions",align:"center",sortable:!1}],lt=[{value:"pending",text:"å¾…è™•ç†"},{value:"in_progress",text:"è™•ç†ä¸­"},{value:"completed",text:"å·²å®Œæˆ"},{value:"cancelled",text:"å·²å–æ¶ˆ"}],Ve=B({show:!1}),at=z(null),st=z(!1),Se=z(!1),y=B({}),nt=z({}),qe=z([]),It=ge(()=>qe.value.filter(s=>s.name!=="needAirlineHighlight"&&s.name!=="needUseLogo")),te=z(null),ot=z([]),rt=z([]),ae=z([]),ve=z([]),it=z([]),N=B({applicationDate:[],applicant:"",productCategory:"",productType:"",status:"",assignedDesigner:""}),ue=B({show:!1}),m=B({}),dt=z([]),j=B({show:!1,designRequestId:null,newStatus:null,currentStatus:null,designRequestNumber:""}),De=B({show:!1}),R=B({user:"",categories:[],note:""}),ce=z(null),Ce=z([]),ut=z([]),Re=z(!1),ct=[{value:"printing",label:"å°åˆ·ç›¸é—œ"},{value:"map",label:"åœ°åœ–ç›¸é—œ"},{value:"dm",label:"DMç›¸é—œ"},{value:"electronic",label:"é›»å­èªªè³‡"}],Ne=B({show:!1}),I=B({id:"",userName:"",userEmail:"",categories:[],note:""}),Me=z(null),Fe=z(!1),se=z({}),X=B({show:!1,emailId:null,emailName:"",message:""}),q=B({show:!1,designRequestId:null,designRequestNumber:"",currentNote:"",newNote:""}),Oe=z(!1),ne=z(""),H=B({show:!1,designRequestId:null,designerId:null,designerName:"",designRequestNumber:""}),mt=ge(()=>dt.value.filter(s=>s.name!=="needAirlineHighlight"&&s.name!=="needUseLogo")),Ut=ge(()=>{if(!N.productCategory)return ve.value;const e={printing:["printing"],map:["seriesMap","seriesMapModify","SPMap"],dm:["newDMSingle","newDMMultiple","modifyDM"]}[N.productCategory]||[];return ve.value.filter(d=>e.includes(d.value))}),zt="./",Tt=s=>{N.applicationDate=s},Et=()=>{N.applicationDate=[]},Pt=()=>{N.applicationDate=[],N.applicant="",N.productCategory="",N.productType="",N.status="",N.assignedDesigner="",ke()},ke=async()=>{var s,e,d,o,l;if(!fe.value){fe.value=!0;try{const c=N.assignedDesigner||"",n={page:Q.page,itemsPerPage:Q.itemsPerPage,sortBy:(s=Q.sortBy[0])==null?void 0:s.key,sortOrder:(e=Q.sortBy[0])==null?void 0:e.order};if(N.applicant&&(n.applicant=N.applicant),N.productCategory&&(n.productCategory=N.productCategory),N.productType&&(n.productType=N.productType),N.status&&(n.status=N.status),c&&(n.assignedDesigner=c),((d=N.applicationDate)==null?void 0:d.length)>0){const u=Array.from(N.applicationDate),g=u[0],p=u[u.length-1];if(g){const $=new Date(g);$.setHours(0,0,0,0),n.applicationDateStart=$.toISOString()}if(p&&p!==g){const $=new Date(p);$.setHours(23,59,59,999),n.applicationDateEnd=$.toISOString()}else if(g){const $=new Date(g);$.setHours(23,59,59,999),n.applicationDateEnd=$.toISOString()}}const{data:x}=await O.get("/marketing/design-requests",{params:n});if(x.success){K.value=x.result.data,tt.value=x.result.totalItems;try{console.log("[MD-Manage] fetchTableData sample:",(K.value||[]).slice(0,5).map(u=>({id:u._id,no:u.designRequestNumber,assignedDesigner:u.assignedDesigner?{_id:u.assignedDesigner._id,name:u.assignedDesigner.name,userId:u.assignedDesigner.userId}:null})))}catch{}}}catch(c){w({text:((l=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:l.message)||"å–å¾—è¡¨æ ¼è³‡æ–™å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{fe.value=!1}}},St=()=>{ke()},qt=async()=>{try{const{data:s}=await O.get("/marketing/design-requests/product-types");s.success&&(ve.value=s.result.flatMap(e=>e.items.map(d=>({value:d.value,label:`${e.category} - ${d.label}`}))))}catch{}},Rt=async()=>{try{const{data:s}=await O.get("/marketing/design-requests/product-categories");s.success&&(it.value=s.result)}catch{}},Mt=()=>{N.productType=""},Ft=async()=>{var s;try{const{data:e}=await O.get("/users/public/all");if(e.success){const d=(((s=e.result)==null?void 0:s.data)||[]).slice().sort((o,l)=>String((o==null?void 0:o.userId)??"").localeCompare(String((l==null?void 0:l.userId)??"")));rt.value=d.map(o=>({_id:o._id,name:o.name,userId:o.userId})),ot.value=d.map(o=>({label:`${o.name} (${o.userId})`,value:o._id}))}}catch{}},Ot=async()=>{var s;try{const{data:e}=await O.get("/permissions/users-by-role",{params:{permission:"MARKETING_DESIGN_REQUEST_DESIGNER_TAG"}});if(e.success){const d=Array.isArray((s=e.result)==null?void 0:s.data)?e.result.data.slice():[];d.sort((o,l)=>String((o==null?void 0:o.userId)??"").localeCompare(String((l==null?void 0:l.userId)??""))),ae.value=d.map(o=>({_id:o._id,name:o.name,userId:o.userId}));try{console.log("[MD-Manage] designers(users):",ae.value)}catch{}}}catch{ae.value=[]}},je=(s,e)=>{const d=(e||"").toLowerCase(),o=s.raw||s;return(o&&o.name&&(o.userId||o.employeeCode)?`${o.name} ${o.userId||o.employeeCode}`.toLowerCase():o&&o.name?o.name.toLowerCase():"").includes(d)},oe=s=>{if(!s)return"";const e=new Date(s);return isNaN(e.getTime())?"":e.toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"})},jt=s=>{if(!s)return"";const e={infoBookletCover:"èªªè³‡å°é¢",banner:"å¸ƒæ¢",coachSign:"è»Šé ­ç‰Œ",other:"å…¶ä»–"},d=Object.entries(s).filter(([,o])=>o).map(([o])=>e[o]).filter(Boolean);return d.length>0?`ã€å°åˆ·ç›¸é—œã€‘- ${d.join("ã€")}`:"ã€å°åˆ·ç›¸é—œã€‘"},Ae=(s,e)=>{if(s==="printing")return e&&e.printingTypes?jt(e.printingTypes):"ã€å°åˆ·ç›¸é—œã€‘";const d=ve.value.find(o=>o.value===s);return d?d.label:s},$e=s=>({pending:"orange-darken-2",in_progress:"blue-darken-1",completed:"green-darken-1",cancelled:"red-lighten-1"})[s]||"grey",Y=s=>({pending:"å¾…è™•ç†",in_progress:"è™•ç†ä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"})[s]||s,A=s=>s==="completed"||s==="cancelled",At=s=>{switch(s){case"completed":return"teal-lighten-1";case"cancelled":return"red-lighten-1";default:return"grey-lighten-2"}},W=s=>{if(!s)return"";const e=s.split("/");return e[e.length-1]},ee=s=>{if(!s)return!1;const e=W(s).toLowerCase();return/\.(jpg|jpeg|png|gif|webp)$/.test(e)},pt=(s,e)=>{const d=s.filter(o=>ee(o));d.length!==0&&(D.images=d,D.currentIndex=e,D.currentImage=d[e],D.currentImageName=W(d[e]),D.show=!0)},gt=()=>{D.show=!1,D.currentImage=null,D.currentImageName="",D.currentIndex=0,D.images=[]},Bt=()=>{D.images.length<=1||(D.currentIndex=(D.currentIndex-1+D.images.length)%D.images.length,D.currentImage=D.images[D.currentIndex],D.currentImageName=W(D.currentImage))},Lt=()=>{D.images.length<=1||(D.currentIndex=(D.currentIndex+1)%D.images.length,D.currentImage=D.images[D.currentIndex],D.currentImageName=W(D.currentImage))},bt=async s=>{if(!s||s.length===0){w({text:"æ²’æœ‰æª”æ¡ˆå¯ä¾›ä¸‹è¼‰",snackbarProps:{color:"orange-lighten-1"}});return}w({text:"æ­£åœ¨æ‰“åŒ…æª”æ¡ˆï¼Œè«‹ç¨å€™...",snackbarProps:{color:"teal-lighten-1"}});try{const e=new wl;let d=0,o=0;if(await Promise.all(s.map(async c=>{try{const n=await fetch(c);if(n.ok){const x=await n.blob();e.file(W(c),x),d++}else console.warn(`æª”æ¡ˆä¸‹è¼‰å¤±æ•—: ${c}`),o++}catch(n){console.error(`æª”æ¡ˆä¸‹è¼‰éŒ¯èª¤: ${c}`,n),o++}})),d===0){w({text:"æ‰€æœ‰æª”æ¡ˆä¸‹è¼‰å¤±æ•—",snackbarProps:{color:"red-lighten-1"}});return}const l=await e.generateAsync({type:"blob"});Vl.saveAs(l,`æ‰€æœ‰æª”æ¡ˆ_${new Date().toISOString().slice(0,10)}.zip`),w(o===0?{text:`æª”æ¡ˆæ‰“åŒ…å®Œæˆï¼å…±ä¸‹è¼‰ ${d} å€‹æª”æ¡ˆ`,snackbarProps:{color:"teal-lighten-1"}}:{text:`æª”æ¡ˆæ‰“åŒ…å®Œæˆï¼æˆåŠŸ ${d} å€‹ï¼Œå¤±æ•— ${o} å€‹`,snackbarProps:{color:"orange-lighten-1"}})}catch(e){console.error("æª”æ¡ˆæ‰“åŒ…å¤±æ•—:",e),w({text:"æª”æ¡ˆæ‰“åŒ…å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦",snackbarProps:{color:"red-lighten-1"}})}},Ht=async s=>{if(A(s.status)){w({text:`ç‹€æ…‹ç‚ºã€Œ${Y(s.status)}ã€çš„ç”³è«‹å–®ç„¡æ³•ç·¨è¼¯`,snackbarProps:{color:"red-lighten-1"}});return}Object.keys(y).forEach(o=>delete y[o]),Ve.show=!0;const e={...s};["requestedByDate"].forEach(o=>{e[o]&&typeof e[o]=="string"&&(e[o]=new Date(e[o]))}),e.applicant&&typeof e.applicant=="object"&&(e.applicant=e.applicant._id||e.applicant.id),e.productType==="printing"&&(e.printingTypes||(e.printingTypes={infoBookletCover:!!(e.infoBookletCover&&Object.values(e.infoBookletCover).some(o=>o&&o!=="")),banner:!!(e.banner&&Object.values(e.banner).some(o=>o&&o!=="")),coachSign:!!(e.coachSign&&Object.values(e.coachSign).some(o=>o&&o!=="")),other:!!(e.otherNote&&e.otherNote!=="")}),e.infoBookletCover||(e.infoBookletCover={title:"",style:"",imageSubject:"",content:"",requestedByDate:null}),e.banner||(e.banner={title:"",style:"",imageSubject:"",content:"",quantity:1,requestedByDate:null}),e.coachSign||(e.coachSign={content:"",useInfoBookletCover:!1,quantity:1}),e.otherNote||(e.otherNote=""),e.files||(e.files=[])),Object.assign(y,e),y.airlineHighlightNote!==void 0&&y.needAirlineHighlight===void 0&&(y.needAirlineHighlight=!1),y.useLogo!==void 0&&y.needUseLogo===void 0&&(y.needUseLogo=!1),nt.value=JSON.parse(JSON.stringify(y)),await Jt(s.productType)},Be=()=>{Ve.show=!1,Object.keys(y).forEach(s=>delete y[s]),te.value=null},Jt=async s=>{try{const{data:e}=await O.get(`/marketing/design-requests/product-types/${s}/fields`);e.success&&(qe.value=[...e.result.fields||[],...e.result.required||[],...e.result.optional||[],...e.result.conditional||[]],te.value=e.result)}catch{}},Gt=async()=>{var e,d;const{valid:s}=await at.value.validate();if(s){if(JSON.stringify(y)===JSON.stringify(nt.value)){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}Se.value=!0;try{const o={...y};["requestedByDate"].forEach(u=>{o[u]instanceof Date&&(o[u]=o[u].toISOString())}),o.itinerary&&Array.isArray(o.itinerary);const c={...o};c.coachSign&&(c.coachSign.useInfoBookletCover=c.coachSign.useInfoBookletCover===!0),c.printingTypes&&(c.printingTypes=JSON.stringify(c.printingTypes)),["infoBookletCover","banner","coachSign"].forEach(u=>{c[u]&&c.printingTypes&&JSON.parse(c.printingTypes)[u]&&({infoBookletCover:["title","style","imageSubject","content","requestedByDate"],banner:["title","style","imageSubject","content","quantity","requestedByDate"],coachSign:["content","useInfoBookletCover","quantity"]}[u]||[]).forEach(U=>{c[u][U]||(c[u][U]="")})});const{data:x}=await O.patch(`/marketing/design-requests/${y._id}`,c);x.success&&(w({text:"ä¿®æ”¹æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}}),Be(),ke())}catch(o){w({text:((d=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:d.message)||"ä¿®æ”¹å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Se.value=!1}}},me=z(new Set),yt=async(s,e)=>{var d,o,l;if(!me.value.has(s))try{const c=K.value.find(x=>x._id===s);if(A(c.status)){w({text:`ç‹€æ…‹ç‚ºã€Œ${Y(c.status)}ã€çš„ç”³è«‹å–®ç„¡æ³•å†è®Šæ›´è™•ç†äººå“¡`,snackbarProps:{color:"red-lighten-1"}});return}if(e===null){if(!c.assignedDesigner){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}await ft(s,e);return}else if(((d=c.assignedDesigner)==null?void 0:d._id)===e){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}const n=ae.value.find(x=>x._id===e);n&&(H.designRequestId=s,H.designerId=e,H.designerName=n.name,H.designRequestNumber=c.designRequestNumber,H.message=`ç¢ºèªè¦å°‡ç”³è«‹å–® <strong>${c.designRequestNumber}</strong> æŒ‡æ´¾çµ¦ <strong>${n.name}</strong> å—ï¼Ÿ`,H.show=!0)}catch(c){console.error("æ›´æ–°è™•ç†äººå“¡å¤±æ•—:",c),w({text:((l=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:l.message)||"æ›´æ–°è™•ç†äººå“¡å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}},Kt=async()=>{const{designRequestId:s,designerId:e}=H;await ft(s,e),H.show=!1},ft=async(s,e)=>{var d,o;if(!me.value.has(s))try{const l=K.value.find(n=>n._id===s);me.value.add(s);const{data:c}=await O.patch(`/marketing/design-requests/${s}`,{assignedDesigner:e});if(c.success){try{console.log("[MD-Manage] performAssignDesigner resp:",{designRequestId:s,newDesignerId:e,result:c.result})}catch{}let n=null;if(e===null)n=null;else if(c.result&&c.result.assignedDesigner)n=c.result.assignedDesigner;else{const x=ae.value.find(u=>u._id===e);x&&(n={_id:x._id,name:x.name,userId:x.userId,employeeCode:x.employeeCode})}l.assignedDesigner=n;try{console.log("[MD-Manage] performAssignDesigner applied:",{id:l._id,assignedDesigner:l.assignedDesigner})}catch{}c.result&&c.result.status&&c.result.status!==l.status&&(l.status=c.result.status,console.log("ç‹€æ…‹å·²è‡ªå‹•æ›´æ–°:",c.result.status)),w(e===null?{text:"å·²æ¸…é™¤è™•ç†äººå“¡æŒ‡æ´¾",snackbarProps:{color:"teal-lighten-1"}}:{text:"è™•ç†äººå“¡æ›´æ–°æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}})}}catch(l){console.error("æ›´æ–°è™•ç†äººå“¡å¤±æ•—:",l),w({text:((o=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:o.message)||"æ›´æ–°è™•ç†äººå“¡å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{me.value.delete(s)}},pe=z(new Set),Qt=async(s,e)=>{if(pe.value.has(s))return;const d=K.value.find(o=>o._id===s);if(d.status===e){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}if(A(d.status)){w({text:`ç‹€æ…‹ç‚ºã€Œ${Y(d.status)}ã€çš„ç”³è«‹å–®ç„¡æ³•å†è®Šæ›´ç‹€æ…‹`,snackbarProps:{color:"red-lighten-1"}});return}if(e==="completed"||e==="cancelled"){j.designRequestId=s,j.newStatus=e,j.currentStatus=d.status,j.designRequestNumber=d.designRequestNumber,j.show=!0;return}await vt(s,e)},vt=async(s,e)=>{var d,o;if(!pe.value.has(s))try{const l=K.value.find(n=>n._id===s);pe.value.add(s);const{data:c}=await O.patch(`/marketing/design-requests/${s}`,{status:e});if(c.success){if(e==="completed"||e==="cancelled")try{const n=await O.get(`/marketing/design-requests/${s}`);if(n.data.success){const x=n.data.result,u=K.value.findIndex(g=>g._id===s);u!==-1&&(K.value[u]=x)}}catch(n){console.error("é‡æ–°ç²å–è³‡æ–™å¤±æ•—:",n),l.status=e}else l.status=e;w({text:"ç‹€æ…‹æ›´æ–°æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}})}}catch(l){console.error("æ›´æ–°ç‹€æ…‹å¤±æ•—:",l),w({text:((o=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:o.message)||"æ›´æ–°ç‹€æ…‹å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{pe.value.delete(s)}},Wt=async()=>{await vt(j.designRequestId,j.newStatus),j.show=!1},Zt=()=>{j.show=!1},Xt=async s=>{const e={...s};["requestedByDate"].forEach(o=>{e[o]&&typeof e[o]=="string"&&(e[o]=new Date(e[o]))}),e.applicant&&typeof e.applicant=="object"&&(e.applicant={name:e.applicant.name,userId:e.applicant.userId,_id:e.applicant._id||e.applicant.id}),Object.assign(m,e),await Yt(s.productType),ue.show=!0},kt=()=>{ue.show=!1,Object.keys(m).forEach(s=>delete m[s])},Yt=async s=>{try{const{data:e}=await O.get(`/marketing/design-requests/product-types/${s}/fields`);e.success&&(dt.value=[...e.result.fields||[],...e.result.required||[],...e.result.optional||[],...e.result.conditional||[]],te.value=e.result)}catch{}},Le=s=>{if(!s)return"";try{const e=new Date(s);return isNaN(e.getTime())?"":e.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch(e){return console.error("Error formatting time:",e),""}},xt=s=>({text:"mdi-text",textarea:"mdi-text-long",date:"mdi-calendar",number:"mdi-numeric",file:"mdi-file-document",checkbox:"mdi-checkbox-marked",array:"mdi-view-list",select:"mdi-form-select"})[s]||"mdi-form-textbox",F=(s,e)=>e.split(".").reduce((d,o)=>d&&d[o]!==void 0?d[o]:void 0,s),Ie=s=>s?ue.show&&ue.isEdit?s.replace(/^\*\s*/,""):s:"",Ue=(s,e=15)=>s.length<=e?s:`${s.substring(0,e)}...`,He=async s=>{if(!s){w({text:"æª”æ¡ˆè·¯å¾‘ç„¡æ•ˆ",snackbarProps:{color:"red-lighten-1"}});return}try{w({text:"æ­£åœ¨ä¸‹è¼‰æª”æ¡ˆ...",snackbarProps:{color:"teal-lighten-1"}});const e=await fetch(s);if(e.ok){const d=await e.blob(),o=window.URL.createObjectURL(d),l=document.createElement("a");l.href=o,l.download=W(s),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o),w({text:"æª”æ¡ˆä¸‹è¼‰å®Œæˆ",snackbarProps:{color:"teal-lighten-1"}})}else w({text:"æª”æ¡ˆä¸‹è¼‰å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}catch(e){console.error("æª”æ¡ˆä¸‹è¼‰éŒ¯èª¤:",e),w({text:"æª”æ¡ˆä¸‹è¼‰å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}},Je=z(!1),ze=async()=>{var s,e;Je.value=!0;try{const{data:d}=await O.get("/notificationEmails");d.success&&(Ce.value=d.result)}catch(d){console.error("å–å¾—é€šçŸ¥è¨­å®šåˆ—è¡¨å¤±æ•—:",d),w({text:((e=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:e.message)||"å–å¾—é€šçŸ¥è¨­å®šåˆ—è¡¨å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Je.value=!1}},el=async()=>{var s,e;try{const{data:d}=await O.get("/notificationEmails/users");d.success&&(ut.value=d.result.map(o=>({value:o._id,label:`${o.name} - ${o.email}`})))}catch(d){console.error("å–å¾—ç”¨æˆ¶åˆ—è¡¨å¤±æ•—:",d),w({text:((e=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:e.message)||"å–å¾—ç”¨æˆ¶åˆ—è¡¨å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}},_t=()=>{De.show=!0,ze(),el()},tl=()=>{De.show=!1,R.user="",R.categories=[],R.note="",ce.value&&ce.value.resetValidation()},ll=async()=>{var e,d;const{valid:s}=await ce.value.validate();if(s){if(!R.categories||R.categories.length===0){w({text:"è«‹è‡³å°‘é¸æ“‡ä¸€å€‹å¤§åˆ†é¡",snackbarProps:{color:"red-lighten-1"}});return}console.log("é€å‡ºé€šçŸ¥è¨­å®š user:",R.user),console.log("é€å‡ºé€šçŸ¥è¨­å®š categories:",R.categories),console.log("é€å‡ºé€šçŸ¥è¨­å®š note:",R.note),Re.value=!0;try{const{data:o}=await O.post("/notificationEmails",R);o.success&&(w({text:"é€šçŸ¥è¨­å®šæ–°å¢æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}}),R.user="",R.categories=[],R.note="",await kl(),ce.value&&ce.value.resetValidation(),await ze())}catch(o){console.error("æ–°å¢é€šçŸ¥è¨­å®šå¤±æ•—:",o),w({text:((d=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:d.message)||"æ–°å¢é€šçŸ¥è¨­å®šå¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Re.value=!1}}},al=s=>{var e,d,o;X.emailId=s._id,X.emailName=(e=s.user)==null?void 0:e.name,X.message=`æ‚¨ç¢ºå®šè¦åˆªé™¤ <strong>${(d=s.user)==null?void 0:d.name}</strong> (${(o=s.user)==null?void 0:o.email}) çš„é€šçŸ¥è¨­å®šå—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚`,X.show=!0},sl=async()=>{var e,d;const s=X.emailId;Ge.value=s;try{const{data:o}=await O.delete(`/notificationEmails/${s}`);o.success&&(w({text:"é€šçŸ¥è¨­å®šåˆªé™¤æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}}),await ze())}catch(o){console.error("åˆªé™¤é€šçŸ¥è¨­å®šå¤±æ•—:",o),w({text:((d=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:d.message)||"åˆªé™¤é€šçŸ¥è¨­å®šå¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Ge.value=null,X.show=!1}};bl(()=>{qt(),Rt(),Ft(),Ot(),ke()});const nl=ge(()=>y.printingTypes?Object.values(y.printingTypes).some(s=>s===!0):!1),xe=(s,e,d)=>{const o=e.split("."),l=o.pop(),c=o.reduce((n,x)=>(n[x]||(n[x]={}),n[x]),s);c[l]=d},Ge=z(null),ol=s=>({printing:"å°åˆ·ç›¸é—œ",map:"åœ°åœ–ç›¸é—œ",dm:"DMç›¸é—œ",electronic:"é›»å­èªªè³‡"})[s]||s,rl=(s,e)=>{if(e)R.categories.includes(s)||R.categories.push(s);else{const d=R.categories.indexOf(s);d>-1&&R.categories.splice(d,1)}},il=(s,e)=>{if(e)I.categories.includes(s)||I.categories.push(s);else{const d=I.categories.indexOf(s);d>-1&&I.categories.splice(d,1)}},dl=async()=>{var s,e,d;try{let o="";if(o+=`ğŸ“Œ åŸºæœ¬è³‡è¨Š
`,m.designRequestNumber&&(o+=`ç”³è«‹ç·¨è™Ÿï¼š${m.designRequestNumber}
`),m.productType&&(o+=`ç”³è«‹é¡å‹ï¼š${Ae(m.productType,m)}
`),m.applicationDate&&(o+=`ç”³è«‹æ—¥æœŸï¼š${oe(m.applicationDate)} ${Le(m.applicationDate)}
`),(s=m.applicant)!=null&&s.name&&(o+=`ç”³è«‹äººï¼š${m.applicant.name} (${m.applicant.employeeCode})
`),(e=m.assignedDesigner)!=null&&e.name&&(o+=`è™•ç†äººå“¡ï¼š${m.assignedDesigner.name}
`),o+=`
`,o+=`ğŸ“ ç”³è«‹è³‡è¨Š
`,m.productType==="printing"){const l=((d=te.value)==null?void 0:d.sections)||{};Object.entries(l).forEach(([c,n])=>{var x;(x=m.printingTypes)!=null&&x[c]&&(o+=`
ã€${n.title}ã€‘
`,n.fields.forEach(u=>{const g=F(m,u.name);if(g!=null&&g!==""){const p=Ie(u.label).replace("* ","");u.type==="date"?o+=`${p}ï¼š${oe(g)}
`:u.type==="number"?o+=`${p}ï¼š${g}
`:u.type==="select"?o+=`${p}ï¼š${typeof g=="boolean"?g?"æ˜¯":"å¦":g}
`:o+=`${p}ï¼š${g}
`}}))})}else mt.value.forEach(c=>{if(c.type==="file")return;const n=m[c.name];if(n!=null&&n!==""){const x=Ie(c.label).replace("* ","");c.type==="date"?o+=`${x}ï¼š${oe(n)}
`:c.type==="number"?o+=`${x}ï¼š${n}
`:c.type==="checkbox"?o+=`${x}ï¼š${n?"æ˜¯":"å¦"}
`:c.type==="select"?o+=`${x}ï¼š${typeof n=="boolean"?n?"æ˜¯":"å¦":n}
`:c.type==="array"?Array.isArray(n)&&n.length>0&&(o+=`${x}ï¼š
`,n.forEach((u,g)=>{o+=`  è¡Œç¨‹ ${g+1}ï¼š
`,u.groupName&&(o+=`    åœ˜é«”åç¨±ï¼š${u.groupName}
`),u.departureDate&&(o+=`    å‡ºç™¼æ—¥æœŸï¼š${u.departureDate}
`),u.agentPrice&&(o+=`    åŒæ¥­åƒ¹ï¼š${u.agentPrice}
`),u.retailPrice&&(o+=`    ç›´å®¢åƒ¹ï¼š${u.retailPrice}
`),u.tripHighlights&&(o+=`    è¡Œç¨‹ç‰¹è‰²ï¼š${u.tripHighlights}
`)})):o+=`${x}ï¼š${n}
`}});await navigator.clipboard.writeText(o),w({text:"ç”³è«‹å–®è³‡è¨Šå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿",snackbarProps:{color:"teal-lighten-1"}})}catch(o){console.error("è¤‡è£½å¤±æ•—:",o),w({text:"è¤‡è£½å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦",snackbarProps:{color:"red-lighten-1"}})}},ul=ge(()=>{const s=Ce.value.map(e=>{var d;return(d=e.user)==null?void 0:d._id});return ut.value.filter(e=>!s.includes(e.value))}),cl=s=>{var e,d,o,l;I.id=s._id,I.userName=((e=s.user)==null?void 0:e.name)||"",I.userEmail=((d=s.user)==null?void 0:d.email)||"",I.categories=[...s.categories||[]],I.note=s.note||"",Ne.show=!0,se.value=JSON.parse(JSON.stringify({id:s._id,userName:((o=s.user)==null?void 0:o.name)||"",userEmail:((l=s.user)==null?void 0:l.email)||"",categories:[...s.categories||[]],note:s.note||""}))},ht=()=>{Ne.show=!1,I.id="",I.userName="",I.userEmail="",I.categories=[],I.note="",se.value={},Me.value&&Me.value.resetValidation()},ml=async()=>{var d,o;if(!I.categories||I.categories.length===0){w({text:"è«‹è‡³å°‘é¸æ“‡ä¸€å€‹å¤§åˆ†é¡",snackbarProps:{color:"red-lighten-1"}});return}const s={id:I.id,userName:I.userName,userEmail:I.userEmail,categories:[...I.categories].sort(),note:I.note||""},e={id:se.value.id,userName:se.value.userName,userEmail:se.value.userEmail,categories:[...se.value.categories||[]].sort(),note:se.value.note||""};if(JSON.stringify(s)===JSON.stringify(e)){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}Fe.value=!0;try{const{data:l}=await O.put(`/notificationEmails/${I.id}`,{categories:I.categories,note:I.note});l.success&&(w({text:"é€šçŸ¥è¨­å®šæ›´æ–°æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}}),ht(),await ze())}catch(l){console.error("æ›´æ–°é€šçŸ¥è¨­å®šå¤±æ•—:",l),w({text:((o=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:o.message)||"æ›´æ–°é€šçŸ¥è¨­å®šå¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Fe.value=!1}},wt=s=>{if(A(s.status)){w({text:`ç‹€æ…‹ç‚ºã€Œ${Y(s.status)}ã€çš„ç”³è«‹å–®ç„¡æ³•ç·¨è¼¯éƒ¨é–€å‚™è¨»`,snackbarProps:{color:"red-lighten-1"}});return}q.designRequestId=s._id,q.designRequestNumber=s.designRequestNumber,q.currentNote=s.departmentNote||"",q.newNote=s.departmentNote||"",q.show=!0},Ke=()=>{q.show=!1,q.designRequestId=null,q.designRequestNumber="",q.currentNote="",q.newNote="",ne.value=""},pl=()=>{if(!ne.value)return;const s=document.querySelector("textarea"),e=s.selectionStart,d=s.selectionEnd,o=q.newNote,l=o.substring(0,e),c=o.substring(d),n=` <a href="${ne.value}" target="_blank" class="url-button">é€£çµ</a>`;q.newNote=l+n+c,ne.value=""},Vt=s=>s?s.replace(/<a href="([^"]+)" target="_blank" class="url-button">é€£çµ<\/a>/g,(e,d)=>`<a href="${d}" target="_blank" class="url-button">é€£çµ</a>`):"",gl=async()=>{var s,e;if(q.newNote===q.currentNote){w({text:"è³‡æ–™æœªåšä»»ä½•è®Šæ›´",snackbarProps:{color:"red-lighten-1"}});return}Oe.value=!0;try{const{data:d}=await O.patch(`/marketing/design-requests/${q.designRequestId}/department-note`,{departmentNote:q.newNote});if(d.success){const o=K.value.find(l=>l._id===q.designRequestId);o&&(o.departmentNote=q.newNote),w({text:"éƒ¨é–€å‚™è¨»æ›´æ–°æˆåŠŸ",snackbarProps:{color:"teal-lighten-1"}}),Ke()}}catch(d){console.error("æ›´æ–°éƒ¨é–€å‚™è¨»å¤±æ•—:",d),w({text:((e=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:e.message)||"æ›´æ–°éƒ¨é–€å‚™è¨»å¤±æ•—",snackbarProps:{color:"red-lighten-1"}})}finally{Oe.value=!1}};return(s,e)=>{const d=yl("v-date-input"),o=fl("permission");return i(),h($l,{"max-width":"2400"},{default:a(()=>[t(S,{class:"pt-md-5 px-lg-10 px-xxl-6"},{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[t(T,{class:"elevation-4 rounded-lg py-3 py-sm-7 px-0"},{default:a(()=>[t(S,{class:"d-flex align-center justify-space-between ps-8 pe-7 px-sm-10 py-5"},{default:a(()=>[e[32]||(e[32]=r("h3",{class:"d-inline-block",style:{"min-width":"160px"}}," è¡ŒéŠ·ç¾ç·¨éœ€æ±‚ç”³è«‹ç®¡ç† ",-1)),r("span",null,[be(de)?P("",!0):Dt((i(),h(V,{key:0,icon:"mdi-email-multiple",color:"blue-grey-darken-2",variant:"text",size:be(de)?"default":"small",onClick:_t},null,8,["size"])),[[o,"MARKETING_DESIGN_REQUEST_NOTIFICATION_MANAGE"]]),be(de)?Dt((i(),h(V,{key:1,"prepend-icon":"mdi-email-multiple",color:"blue-grey-darken-2",variant:"outlined",class:"me-4",size:be(de)?"default":"small",onClick:_t},{default:a(()=>e[31]||(e[31]=[b(" é€šçŸ¥è¨­å®šç®¡ç† ")])),_:1},8,["size"])),[[o,"MARKETING_DESIGN_REQUEST_NOTIFICATION_MANAGE"]]):P("",!0)])]),_:1}),t(Z,{class:"mt-2 mt-sm-5 mb-2 mb-sm-6"}),t(J,{class:"pt-4 px-6 px-sm-7 px-md-9 pb-2"},{default:a(()=>[t(S,{class:"mb-2"},{default:a(()=>[t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",zl,[e[33]||(e[33]=r("span",{class:"text-label"},"ç”³è«‹æ—¥æœŸ :",-1)),t(d,{modelValue:N.applicationDate,"onUpdate:modelValue":[e[0]||(e[0]=l=>N.applicationDate=l),Tt],variant:"outlined",density:"compact","prepend-icon":"","hide-details":"",clearable:"",multiple:"range","cancel-text":"å–æ¶ˆ","ok-text":"ç¢ºèª",disabled:!1,"onClick:clear":Et},null,8,["modelValue"])])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",Tl,[e[34]||(e[34]=r("span",{class:"text-label"},"ç”³è«‹äºº :",-1)),t(Te,{modelValue:N.applicant,"onUpdate:modelValue":e[1]||(e[1]=l=>N.applicant=l),items:rt.value,"item-title":l=>l&&l.name&&l.userId?`${l.name} (${l.userId})`:l&&l.name?l.name:"","item-value":"_id",variant:"outlined",density:"compact",clearable:"",placeholder:"è«‹é¸æ“‡ç”³è«‹äºº","hide-details":"",filter:je,disabled:!1},null,8,["modelValue","items","item-title"])])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",El,[e[35]||(e[35]=r("span",{class:"text-label"},"ç”³è«‹é¡å‹ (å¤§) :",-1)),t(ye,{modelValue:N.productCategory,"onUpdate:modelValue":[e[2]||(e[2]=l=>N.productCategory=l),Mt],items:it.value,"item-title":"label","item-value":"value",variant:"outlined",density:"compact",clearable:"",placeholder:"è«‹é¸æ“‡å¤§åˆ†é¡","hide-details":"",disabled:!1},null,8,["modelValue","items"])])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",Pl,[e[36]||(e[36]=r("span",{class:"text-label"},"ç”³è«‹é¡å‹ :",-1)),t(ye,{modelValue:N.productType,"onUpdate:modelValue":e[3]||(e[3]=l=>N.productType=l),items:Ut.value,"item-title":"label","item-value":"value",variant:"outlined",density:"compact",clearable:"",placeholder:"è«‹é¸æ“‡ç”³è«‹é¡å‹","hide-details":"",disabled:!1},null,8,["modelValue","items"])])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",Sl,[e[37]||(e[37]=r("span",{class:"text-label"},"ç‹€æ…‹ :",-1)),t(ye,{modelValue:N.status,"onUpdate:modelValue":e[4]||(e[4]=l=>N.status=l),items:lt,"item-title":"text","item-value":"value",variant:"outlined",density:"compact",clearable:"",placeholder:"è«‹é¸æ“‡ç‹€æ…‹","hide-details":"",disabled:!1},null,8,["modelValue"])])]),_:1}),t(v,{cols:"12",sm:"6",md:"4",lg:"2",class:"px-1 pe-sm-2 py-1"},{default:a(()=>[r("div",ql,[e[38]||(e[38]=r("span",{class:"text-label"},"è™•ç†äººå“¡ :",-1)),t(Te,{modelValue:N.assignedDesigner,"onUpdate:modelValue":e[5]||(e[5]=l=>N.assignedDesigner=l),items:ae.value,"item-title":l=>l&&l.name&&l.userId?`${l.name} (${l.userId})`:l&&l.name?l.name:"","item-value":"_id",variant:"outlined",density:"compact",clearable:"",placeholder:"è«‹é¸æ“‡è™•ç†äººå“¡","hide-details":"",filter:je,disabled:!1},null,8,["modelValue","items","item-title"])])]),_:1}),t(v,{lg:"10",class:"d-none d-md-block"}),t(v,{cols:"12",md:"8",lg:"2"},{default:a(()=>[t(S,{class:"d-sm-flex justify-sm-end"},{default:a(()=>[t(v,{cols:"8",sm:"4",lg:"8",class:"ps-1 pe-0"},{default:a(()=>[t(V,{color:"cyan-darken-2","prepend-icon":"mdi-magnify",loading:fe.value,disabled:!1,block:"",onClick:ke},{default:a(()=>e[39]||(e[39]=[b(" æœå°‹ ")])),_:1},8,["loading"])]),_:1}),t(v,{cols:"4",sm:"2",lg:"4",class:"pe-1"},{default:a(()=>[t(V,{color:"grey",width:"40",block:"",disabled:!1,onClick:Pt},{default:a(()=>[t(k,null,{default:a(()=>e[40]||(e[40]=[b("mdi-refresh")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Z,{class:"my-2"}),t(J,{class:"px-sm-5 px-md-6 px-lg-7"},{default:a(()=>[t(Il,{"items-per-page":Q.itemsPerPage,"onUpdate:itemsPerPage":e[6]||(e[6]=l=>Q.itemsPerPage=l),page:Q.page,"onUpdate:page":e[7]||(e[7]=l=>Q.page=l),"sort-by":Q.sortBy,"onUpdate:sortBy":e[8]||(e[8]=l=>Q.sortBy=l),headers:$t,items:K.value,"items-length":tt.value,loading:fe.value,"items-per-page-options":[10,20,50,100],hover:"",density:"compact",class:"rounded-ts-lg rounded-te-lg","onUpdate:options":St},{item:a(({item:l,index:c})=>{var n,x;return[r("tr",{class:Qe({"odd-row":c%2===0,"even-row":c%2!==0})},[r("td",null,_(l.designRequestNumber),1),r("td",Rl,[l.applicationDate?(i(),f("div",Ml,[r("div",null,_(oe(l.applicationDate)),1),r("div",Fl,[t(k,{size:"14",style:{"padding-bottom":"2px"}},{default:a(()=>e[41]||(e[41]=[b(" mdi-clock-outline ")])),_:1}),b(" "+_(Le(l.applicationDate)),1)])])):P("",!0)]),r("td",null,_((n=l.applicant)==null?void 0:n.name)+" ("+_((x=l.applicant)==null?void 0:x.userId)+")",1),r("td",null,_(Ae(l.productType,l)),1),r("td",Ol,[t(Nt,{"max-height":"320",disabled:A(l.status)},{activator:a(({props:u})=>[A(l.status)?(i(),f("div",{key:0,class:Qe(["status-text",At(l.status)])},_(Y(l.status)),3)):(i(),h(_e,We({key:1},u,{color:$e(l.status),size:"small",label:"",variant:"outlined",class:"font-weight-medium",loading:pe.value.has(l._id)}),{default:a(()=>[b(_(Y(l.status))+" ",1),t(k,{size:"small",class:"ms-1"},{default:a(()=>e[42]||(e[42]=[b(" mdi-chevron-down ")])),_:1})]),_:2},1040,["color","loading"]))]),default:a(()=>[t(Ze,null,{default:a(()=>[(i(),f(C,null,M(lt,u=>t(Ee,{key:u.value,onClick:g=>Qt(l._id,u.value)},{default:a(()=>[t(Xe,null,{default:a(()=>[b(_(u.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:2},1024)]),_:2},1032,["disabled"])]),r("td",jl,[t(Nt,{"max-height":"320",disabled:A(l.status)},{activator:a(({props:u})=>[l.assignedDesigner?(i(),h(V,We({key:0},u,{color:"blue-darken-1",variant:"outlined",class:["px-3",{"disabled-btn":A(l.status)}],size:"small",loading:me.value.has(l._id),disabled:A(l.status)}),{default:a(()=>[b(_(l.assignedDesigner.name)+" ",1),A(l.status)?P("",!0):(i(),h(k,{key:0,size:"small",class:"ms-1"},{default:a(()=>e[43]||(e[43]=[b(" mdi-chevron-down ")])),_:1}))]),_:2},1040,["loading","disabled","class"])):(i(),h(V,We({key:1},u,{color:"grey",variant:"outlined",class:["px-3",{"disabled-btn":A(l.status)}],size:"small",loading:me.value.has(l._id),disabled:A(l.status)}),{default:a(()=>[e[45]||(e[45]=b(" å°šæœªæŒ‡æ´¾ ")),A(l.status)?P("",!0):(i(),h(k,{key:0,size:"small",class:"ms-1"},{default:a(()=>e[44]||(e[44]=[b(" mdi-chevron-down ")])),_:1}))]),_:2},1040,["loading","disabled","class"]))]),default:a(()=>[t(Ze,null,{default:a(()=>[(i(!0),f(C,null,M(ae.value,u=>(i(),h(Ee,{key:u._id,onClick:g=>yt(l._id,u._id)},{default:a(()=>[t(Xe,null,{default:a(()=>[b(_(u.name)+_(u.userId?` (${u.userId})`:""),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),t(Z),t(Ee,{onClick:u=>yt(l._id,null)},{default:a(()=>[t(Xe,{class:"text-red-darken-1"},{default:a(()=>[t(k,{size:"small",class:"me-2"},{default:a(()=>e[46]||(e[46]=[b(" mdi-close ")])),_:1}),e[47]||(e[47]=b(" æ¸…é™¤æŒ‡æ´¾ "))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["disabled"])]),r("td",Al,[l.departmentNote?(i(),f("div",Bl,[A(l.status)?(i(),f("div",{key:1,class:"department-note-text disabled",innerHTML:Vt(l.departmentNote)},null,8,Hl)):(i(),f("div",{key:0,class:"department-note-text clickable",onClick:u=>wt(l),innerHTML:Vt(l.departmentNote)},null,8,Ll))])):(i(),f("div",Jl,[A(l.status)?(i(),h(V,{key:1,color:"grey",variant:"outlined",size:"small",class:"px-3 disabled-btn",disabled:""},{default:a(()=>e[49]||(e[49]=[b(" æ–°å¢å‚™è¨» ")])),_:1})):(i(),h(V,{key:0,color:"grey",variant:"outlined",size:"small",class:"px-3",onClick:u=>wt(l)},{default:a(()=>e[48]||(e[48]=[b(" æ–°å¢å‚™è¨» ")])),_:2},1032,["onClick"]))]))]),r("td",Gl,[t(V,{icon:"",color:"blue-grey-darken-2",variant:"plain",size:"small",ripple:!1,onClick:u=>Xt(l)},{default:a(()=>[t(k,null,{default:a(()=>e[50]||(e[50]=[b("mdi-book-open-variant-outline")])),_:1})]),_:2},1032,["onClick"]),t(V,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",ripple:!1,disabled:A(l.status),class:Qe({"disabled-btn":A(l.status)}),onClick:u=>Ht(l)},{default:a(()=>[t(k,null,{default:a(()=>e[51]||(e[51]=[b("mdi-pencil")])),_:1})]),_:2},1032,["disabled","class","onClick"])])],2)]}),_:1},8,["items-per-page","page","sort-by","items","items-length","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),t(le,{modelValue:Ve.show,"onUpdate:modelValue":e[13]||(e[13]=l=>Ve.show=l),"max-width":"1200",persistent:""},{default:a(()=>[t(T,{class:"rounded-lg edit-dialog"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-1 mb-2 bg-light-blue-darken-2"},{default:a(()=>[t(k,{icon:"mdi-pencil",size:"18",color:"white",class:"me-2"}),e[53]||(e[53]=r("span",{class:"card-title"},"ç·¨è¼¯ç”³è«‹å–®",-1)),t(G),t(V,{icon:"",variant:"plain",ripple:!1,class:"opacity-100",onClick:Be},{default:a(()=>[t(k,null,{default:a(()=>e[52]||(e[52]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"px-6 py-7"},{default:a(()=>[t(Ye,{ref_key:"editForm",ref:at,modelValue:st.value,"onUpdate:modelValue":e[12]||(e[12]=l=>st.value=l)},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"12",class:"sub-title text-blue-grey-darken-2 d-flex align-center justify-center"},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"5",class:"d-flex align-center justify-center"},{default:a(()=>[t(Z,{class:"border-opacity-25",color:"light-blue-darken-2"})]),_:1}),t(v,{cols:"2",class:"d-flex align-center justify-center text-light-blue-darken-2"},{default:a(()=>[t(k,{size:"18",class:"me-2 text-light-blue-darken-2"},{default:a(()=>e[54]||(e[54]=[b(" mdi-package-variant ")])),_:1}),e[55]||(e[55]=b(" åŸºæœ¬è³‡è¨Š "))]),_:1}),t(v,{cols:"5",class:"d-flex align-center justify-center"},{default:a(()=>[t(Z,{class:"border-opacity-25",color:"light-blue-darken-2"})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[t(ye,{modelValue:y.productType,"onUpdate:modelValue":e[9]||(e[9]=l=>y.productType=l),items:ve.value,"item-title":"label","item-value":"value",label:"* ç”³è«‹é¡å‹",variant:"outlined",density:"compact",disabled:""},null,8,["modelValue","items"])]),_:1}),t(v,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[t(Te,{modelValue:y.applicant,"onUpdate:modelValue":e[10]||(e[10]=l=>y.applicant=l),items:ot.value,"item-title":"label","item-value":"value",label:"* ç”³è«‹äºº",variant:"outlined",density:"compact",disabled:"",clearable:"","menu-props":{maxHeight:400}},null,8,["modelValue","items"])]),_:1})]),_:1}),y.productType&&y.applicant?(i(),h(S,{key:0},{default:a(()=>{var l,c;return[t(v,{cols:"12",class:"sub-title text-blue-grey-darken-2 d-flex align-center justify-center"},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"5",class:"d-flex align-center justify-center"},{default:a(()=>[t(Z,{class:"border-opacity-25",color:"light-blue-darken-2"})]),_:1}),t(v,{cols:"2",class:"d-flex align-center justify-center text-light-blue-darken-2"},{default:a(()=>[t(k,{size:"18",class:"me-2 text-light-blue-darken-2"},{default:a(()=>e[56]||(e[56]=[b(" mdi-form-textbox ")])),_:1}),e[57]||(e[57]=b(" ç”³è«‹è³‡è¨Š "))]),_:1}),t(v,{cols:"5",class:"d-flex align-center justify-center"},{default:a(()=>[t(Z,{class:"border-opacity-25",color:"light-blue-darken-2"})]),_:1})]),_:1})]),_:1}),y.productType==="printing"?(i(),f(C,{key:0},[t(v,{cols:"12"},{default:a(()=>[t(T,{class:"mb-4 printing-checkbox-card elevation-0"},{default:a(()=>[t(J,{class:"py-4"},{default:a(()=>[r("div",Kl,[t(k,{icon:"mdi-checkbox-multiple-marked-outline",size:"20",class:"me-2"}),e[58]||(e[58]=b(" è«‹é¸æ“‡éœ€è¦çš„å°åˆ·é¡å‹ "))]),t(S,null,{default:a(()=>{var n;return[(i(!0),f(C,null,M((n=te.value)==null?void 0:n.subTypes,x=>(i(),h(v,{key:x.name,cols:"12",sm:"6",md:"3"},{default:a(()=>[t(he,{modelValue:y.printingTypes[x.name],"onUpdate:modelValue":u=>y.printingTypes[x.name]=u,label:x.label,color:"light-blue-darken-2","hide-details":"",density:"compact",class:"printing-checkbox"},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]),_:1}),(l=te.value)!=null&&l.requiredFiles&&nl.value?(i(),h(v,{key:0,cols:"12",class:"mb-4"},{default:a(()=>[t(T,{class:"pa-4 elevation-0 upload-file-card"},{default:a(()=>[e[59]||(e[59]=r("div",{class:"d-flex align-center mb-4"},[r("span",{class:"sub-title font-weight-bold text-light-blue-darken-3"},"â€» å…±åŒæ¬„ä½: ä¸Šå‚³æª”æ¡ˆ")],-1)),r("div",Ql,[(i(!0),f(C,null,M(y.files,(n,x)=>(i(),f("div",{key:x,class:"d-flex align-center mb-1"},[t(k,{size:"small",class:"me-2"},{default:a(()=>[b(_(ee(n)?"mdi-image":"mdi-file"),1)]),_:2},1024),r("span",Wl,_(Ue(W(n),20)),1)]))),128)),!y.files||y.files.length===0?(i(),f("div",Zl," ( ç„¡ ) ")):P("",!0)])]),_:1})]),_:1})):P("",!0),(i(!0),f(C,null,M((c=te.value)==null?void 0:c.sections,(n,x)=>{var u;return i(),f(C,{key:x},[(u=y.printingTypes)!=null&&u[x]?(i(),h(v,{key:0,cols:"12"},{default:a(()=>[t(T,{class:"mb-4 printing-section-card elevation-0"},{default:a(()=>[r("div",Xl,[r("span",Yl,"â€» "+_(n.title),1)]),t(Z,{class:"mb-0"}),t(J,{class:"pt-4 pb-4 px-5"},{default:a(()=>[t(S,null,{default:a(()=>[(i(!0),f(C,null,M(n.fields,g=>{var p,$,U;return i(),h(v,{key:g.name,cols:((p=g.cols)==null?void 0:p.xs)||12,sm:(($=g.cols)==null?void 0:$.sm)||6,lg:((U=g.cols)==null?void 0:U.lg)||4},{default:a(()=>[g.type==="text"?(i(),h(L,{key:0,"model-value":F(y,g.name),label:g.label,variant:"outlined",density:"compact",rules:g.required?[E=>!!E||`è«‹è¼¸å…¥${g.label.replace("* ","")}`]:[],"onUpdate:modelValue":E=>xe(y,g.name,E)},null,8,["model-value","label","rules","onUpdate:modelValue"])):g.type==="textarea"?(i(),h(ie,{key:1,"model-value":F(y,g.name),label:g.label,variant:"outlined",density:"compact",rules:g.required?[E=>!!E||`è«‹è¼¸å…¥${g.label.replace("* ","")}`]:[],"auto-grow":"",rows:"5","onUpdate:modelValue":E=>xe(y,g.name,E)},null,8,["model-value","label","rules","onUpdate:modelValue"])):g.type==="date"?(i(),h(d,{key:2,"model-value":F(y,g.name),label:g.label,variant:"outlined",density:"compact","prepend-icon":"",clearable:"",rules:g.required?[E=>!!E||`è«‹é¸æ“‡${g.label.replace("* ","")}`]:[],"cancel-text":"å–æ¶ˆ","ok-text":"ç¢ºèª","onUpdate:modelValue":E=>xe(y,g.name,E)},null,8,["model-value","label","rules","onUpdate:modelValue"])):g.type==="number"?(i(),h(L,{key:3,"model-value":F(y,g.name),label:g.label,type:"number",variant:"outlined",density:"compact",rules:[...g.required?[E=>E!==""&&E!==null&&E!==void 0||`è«‹è¼¸å…¥${g.label.replace("* ","")}`]:[],E=>E>=g.min||`${g.label.replace("* ","")}ä¸èƒ½å°æ–¼${g.min}`],"onUpdate:modelValue":E=>xe(y,g.name,E)},null,8,["model-value","label","rules","onUpdate:modelValue"])):g.type==="select"?(i(),h(ye,{key:4,"model-value":F(y,g.name),items:g.items,"item-title":"title","item-value":"value",label:g.label,variant:"outlined",density:"compact",rules:g.required?[E=>E!=null||`è«‹é¸æ“‡${g.label.replace("* ","")}`]:[],"onUpdate:modelValue":E=>xe(y,g.name,E)},null,8,["model-value","items","label","rules","onUpdate:modelValue"])):P("",!0)]),_:2},1032,["cols","sm","lg"])}),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):P("",!0)],64)}),128))],64)):qe.value.length>0?(i(!0),f(C,{key:1},M(It.value,n=>{var x,u,g;return i(),h(v,{key:n.name,cols:((x=n.cols)==null?void 0:x.xs)||12,sm:((u=n.cols)==null?void 0:u.sm)||6,lg:((g=n.cols)==null?void 0:g.lg)||4},{default:a(()=>[n.illustrations&&n.illustrations.length?(i(),f("div",ea,[n.type==="text"?(i(),h(L,{key:0,modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,label:n.label,variant:"outlined",density:"compact",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:n.required?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:[]},null,8,["modelValue","onUpdate:modelValue","label","rules"])):P("",!0),r("div",ta,[(i(!0),f(C,null,M(n.illustrations,(p,$)=>(i(),f("img",{key:p,src:be(zt)+p.replace(/^\//,""),alt:n.label+" ç¤ºæ„åœ–"+($+1),style:{"max-width":"560px","border-radius":"8px"}},null,8,la))),128))])])):n.type==="text"?(i(),f("div",aa,[t(L,{modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,label:n.label,variant:"outlined",density:"compact",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:n.required?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:[]},null,8,["modelValue","onUpdate:modelValue","label","rules"])])):n.type==="textarea"?(i(),h(ie,{key:2,modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,label:n.label,variant:"outlined",density:"compact",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:n.required?[p=>!!p||`è«‹è¼¸å…¥${n.label.replace("* ","")}`]:[],"auto-grow":"",rows:"5"},null,8,["modelValue","onUpdate:modelValue","label","rules"])):n.type==="date"?(i(),h(d,{key:3,modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,label:n.label,variant:"outlined",density:"compact","prepend-icon":"",clearable:"",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>!!p||`è«‹é¸æ“‡${n.label.replace("* ","")}`]:n.required?[p=>!!p||`è«‹é¸æ“‡${n.label.replace("* ","")}`]:[],"cancel-text":"å–æ¶ˆ","ok-text":"ç¢ºèª"},null,8,["modelValue","onUpdate:modelValue","label","rules"])):n.type==="number"?(i(),h(L,{key:4,modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,modelModifiers:{number:!0},label:n.label,type:"number",variant:"outlined",density:"compact",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>p!==""&&p!==null&&p!==void 0||`è«‹è¼¸å…¥${n.label.replace("* ","")}`,p=>p>=n.min||`${n.label.replace("* ","")}ä¸èƒ½å°æ–¼${n.min}`]:n.required?[p=>p!==""&&p!==null&&p!==void 0||`è«‹è¼¸å…¥${n.label.replace("* ","")}`,p=>p>=n.min||`${n.label.replace("* ","")}ä¸èƒ½å°æ–¼${n.min}`]:[]},null,8,["modelValue","onUpdate:modelValue","label","rules"])):n.type==="file"?(i(),f("div",sa,[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",na,[t(k,{size:"16",color:"grey-darken-1",class:"me-2"},{default:a(()=>e[60]||(e[60]=[b(" mdi-file-document ")])),_:1}),r("span",oa,_(n.label||"ä¸Šå‚³æª”æ¡ˆ"),1)]),r("div",ra,[y[n.name]&&y[n.name].length>0?(i(),f("div",ia,[(i(!0),f(C,null,M(y[n.name],(p,$)=>(i(),f("div",{key:$,class:"d-flex align-center mb-1"},[t(k,{size:"small",class:"me-2"},{default:a(()=>[b(_(ee(p)?"mdi-image":"mdi-file"),1)]),_:2},1024),r("span",da,_(Ue(W(p),20)),1)]))),128))])):(i(),f("div",ua," ( ç„¡ ) "))])]),_:2},1024)])):n.type==="select"?(i(),f("div",ca,[t(ye,{modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,items:n.items,"item-title":"title","item-value":"value",label:n.label,variant:"outlined",density:"compact",rules:n.conditionalRequired&&y[n.conditionalRequired.field]===n.conditionalRequired.value?[p=>p!=null||`è«‹é¸æ“‡${n.label.replace("* ","")}`]:n.required?[p=>p!=null||`è«‹é¸æ“‡${n.label.replace("* ","")}`]:[]},null,8,["modelValue","onUpdate:modelValue","items","label","rules"]),n.link?(i(),h(V,{key:0,href:n.link.url,target:"_blank",rel:"noopener noreferrer",color:"blue-darken-1",variant:"text",size:"small",class:"mt-1","prepend-icon":"mdi-open-in-new"},{default:a(()=>[b(_(n.link.text),1)]),_:2},1032,["href"])):P("",!0)])):n.type==="array"?(i(),f("div",ma,[r("div",pa,[r("div",ga,[t(k,{icon:"mdi-map-marker-multiple",size:"20",color:"grey-darken-1",class:"me-2"}),r("span",ba,_(n.label),1)])]),!y[n.name]||y[n.name].length===0?(i(),f("div",ya,[t(k,{icon:"mdi-map-marker-off",size:"48",color:"grey-lighten-1",class:"mb-3"}),e[61]||(e[61]=r("div",{class:"text-grey-lighten-1"}," å°šæœªæ–°å¢ä»»ä½•è¡Œç¨‹ ",-1))])):(i(),h(S,{key:1},{default:a(()=>[(i(!0),f(C,null,M(y[n.name],(p,$)=>(i(),h(v,{key:$,cols:"12",md:"6",class:"mb-1"},{default:a(()=>[r("div",fa,[r("div",va,[r("span",ka,"è¡Œç¨‹ "+_($+1),1)]),t(S,{class:"pb-2"},{default:a(()=>[t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:y[n.name][$].groupName,"onUpdate:modelValue":U=>y[n.name][$].groupName=U,label:"* åœ˜é«”åç¨±",variant:"outlined",density:"compact",class:"mb-1",rules:[U=>!!U||"è«‹è¼¸å…¥åœ˜é«”åç¨±"],clearable:""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:y[n.name][$].departureDate,"onUpdate:modelValue":U=>y[n.name][$].departureDate=U,label:"å‡ºç™¼æ—¥æœŸ",variant:"outlined",density:"compact",class:"mb-1",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:y[n.name][$].agentPrice,"onUpdate:modelValue":U=>y[n.name][$].agentPrice=U,modelModifiers:{number:!0},label:"* åŒæ¥­åƒ¹",type:"number",variant:"outlined",density:"compact",class:"mb-1",rules:[U=>U!==""&&U!==null&&U!==void 0||"è«‹è¼¸å…¥åŒæ¥­åƒ¹",U=>U>=0||"åŒæ¥­åƒ¹ä¸èƒ½å°æ–¼0"],clearable:"","prepend-inner-icon":"mdi-currency-usd"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:y[n.name][$].retailPrice,"onUpdate:modelValue":U=>y[n.name][$].retailPrice=U,modelModifiers:{number:!0},label:"* ç›´å®¢åƒ¹",type:"number",variant:"outlined",density:"compact",class:"mb-1",rules:[U=>U!==""&&U!==null&&U!==void 0||"è«‹è¼¸å…¥ç›´å®¢åƒ¹",U=>U>=0||"ç›´å®¢åƒ¹ä¸èƒ½å°æ–¼0"],clearable:"","prepend-inner-icon":"mdi-currency-usd"},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),t(v,{cols:"12",class:"pb-0"},{default:a(()=>[t(ie,{modelValue:y[n.name][$].tripHighlights,"onUpdate:modelValue":U=>y[n.name][$].tripHighlights=U,label:"è¡Œç¨‹ç‰¹è‰²",variant:"outlined",density:"compact",class:"mb-1","auto-grow":"",rows:"3",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:2},1024))])):n.type==="checkbox"&&n.name!=="useInfoBookletCover"?(i(),h(he,{key:8,modelValue:y[n.name],"onUpdate:modelValue":p=>y[n.name]=p,label:n.label,density:"compact",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])):n.type==="checkbox"&&n.name==="useInfoBookletCover"?(i(),h(he,{key:9,modelValue:y.coachSign.useInfoBookletCover,"onUpdate:modelValue":e[11]||(e[11]=p=>y.coachSign.useInfoBookletCover=p),label:n.label,density:"compact",color:"primary","hide-details":"","true-value":!0,"false-value":!1},null,8,["modelValue","label"])):P("",!0)]),_:2},1032,["cols","sm","lg"])}),128)):P("",!0)]}),_:1})):P("",!0)]),_:1},8,["modelValue"])]),_:1}),t(Pe,{class:"px-6 py-4 mb-2"},{default:a(()=>[t(G),t(V,{variant:"outlined",color:"grey-darken-1",onClick:Be},{default:a(()=>e[62]||(e[62]=[b(" å–æ¶ˆ ")])),_:1}),t(V,{color:"teal-darken-1",variant:"outlined",class:"ms-2",loading:Se.value,onClick:Gt},{default:a(()=>e[63]||(e[63]=[b(" å„²å­˜ ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:we.show,"onUpdate:modelValue":e[14]||(e[14]=l=>we.show=l),"max-width":"800"},{default:a(()=>[t(T,null,{default:a(()=>[t(re,{class:"d-flex align-center"},{default:a(()=>[e[65]||(e[65]=r("span",null,"åœ–ç‰‡é è¦½",-1)),t(G),t(V,{icon:"",variant:"text",onClick:s.closeImagePreview},{default:a(()=>[t(k,null,{default:a(()=>e[64]||(e[64]=[b("mdi-close")])),_:1})]),_:1},8,["onClick"])]),_:1}),t(J,{class:"text-center"},{default:a(()=>[we.currentImage?(i(),f("img",{key:0,src:we.currentImage,style:{"max-width":"100%","max-height":"500px","object-fit":"contain"},alt:"é è¦½åœ–ç‰‡"},null,8,xa)):P("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:D.show,"onUpdate:modelValue":e[16]||(e[16]=l=>D.show=l),fullscreen:"",transition:"fade-transition",onKeydown:Ct(gt,["esc"])},{default:a(()=>[t(T,{class:"lightbox-card"},{default:a(()=>[t(V,{icon:"",class:"lightbox-close-btn",style:{position:"absolute",top:"24px",right:"32px","z-index":"1001",background:"rgba(0,0,0,0.5)"},color:"white",size:"large",onClick:gt},{default:a(()=>[t(k,{size:"32",color:"white"},{default:a(()=>e[66]||(e[66]=[b(" mdi-close ")])),_:1})]),_:1}),t(V,{icon:"",class:"lightbox-download-btn me-2",style:{position:"absolute",top:"24px",right:"90px","z-index":"1001",background:"rgba(0,0,0,0.5)"},size:"large",onClick:e[15]||(e[15]=l=>He(D.currentImage))},{default:a(()=>[t(k,{size:"28",color:"white"},{default:a(()=>e[67]||(e[67]=[b(" mdi-download ")])),_:1})]),_:1}),r("div",_a,[D.images.length>1?(i(),h(V,{key:0,icon:"mdi-chevron-left",size:"large",color:"white",class:"lightbox-nav-btn lightbox-prev",onClick:Bt},{default:a(()=>[t(k,{size:"32",color:"white"},{default:a(()=>e[68]||(e[68]=[b(" mdi-chevron-left ")])),_:1})]),_:1})):P("",!0),D.currentImage?(i(),f("img",{key:1,src:D.currentImage,class:"lightbox-image",alt:"ç‡ˆç®±é è¦½åœ–ç‰‡"},null,8,ha)):P("",!0),D.images.length>1?(i(),h(V,{key:2,icon:"mdi-chevron-right",size:"large",color:"white",class:"lightbox-nav-btn lightbox-next",onClick:Lt},{default:a(()=>[t(k,{size:"32",color:"white"},{default:a(()=>e[69]||(e[69]=[b(" mdi-chevron-right ")])),_:1})]),_:1})):P("",!0)]),e[70]||(e[70]=r("div",{class:"text-center mt-2",style:{color:"#fff",opacity:"0.7"}}," é»æ“Šå³ä¸Šè§’é—œé–‰ï¼Œæˆ–æŒ‰ ESC é›¢é–‹é è¦½ ",-1))]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:ue.show,"onUpdate:modelValue":e[18]||(e[18]=l=>ue.show=l),"max-width":"1200"},{default:a(()=>[t(T,{class:"rounded-lg pb-2"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-1 bg-blue-grey-darken-2"},{default:a(()=>[t(k,{icon:"mdi-text-box-outline",size:"18",color:"white",class:"me-2"}),e[73]||(e[73]=r("span",{class:"card-title"},"ç”³è«‹å–®è©³ç´°è³‡è¨Š",-1)),t(G),t(V,{color:"white",variant:"outlined",size:"small","prepend-icon":"mdi-content-copy",class:"me-2",onClick:dl},{default:a(()=>e[71]||(e[71]=[b(" è¤‡è£½è³‡è¨Š ")])),_:1}),t(V,{icon:"",variant:"plain",color:"white",ripple:!1,class:"opacity-100",onClick:kt},{default:a(()=>[t(k,null,{default:a(()=>e[72]||(e[72]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"px-6 py-4"},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[r("div",wa,[t(k,{icon:"mdi-package-variant",size:"18",color:"blue-grey-darken-2",class:"me-2"}),e[74]||(e[74]=r("span",{class:"text-blue-grey-darken-2 card-title"},"åŸºæœ¬è³‡è¨Š",-1))]),t(S,null,{default:a(()=>[t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",Va,[t(k,{icon:"mdi-identifier",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[75]||(e[75]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ç”³è«‹ç·¨è™Ÿ",-1))]),r("div",Da,_(m.designRequestNumber||"( ç„¡ )"),1)]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",Ca,[t(k,{icon:"mdi-shape",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[76]||(e[76]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ç”³è«‹é¡å‹",-1))]),r("div",Na,_(m.productType?Ae(m.productType,m):"( ç„¡ )"),1)]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",$a,[t(k,{icon:"mdi-calendar-clock",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[77]||(e[77]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ç”³è«‹æ—¥æœŸ",-1))]),r("div",Ia,[b(_(oe(m.applicationDate))+" ",1),r("span",Ua,_(Le(m.applicationDate)),1)])]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>{var l;return[r("div",za,[t(k,{icon:"mdi-account-circle",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[78]||(e[78]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ç”³è«‹äºº",-1))]),r("div",Ta,_((l=m.applicant)!=null&&l.name?`${m.applicant.name} (${m.applicant.userId})`:"( ç„¡ )"),1)]}),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",Ea,[t(k,{icon:"mdi-progress-check",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[79]||(e[79]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ç‹€æ…‹",-1))]),r("div",Pa,[t(_e,{color:$e(m.status),size:"small",label:"",class:"font-weight-medium elevation-0"},{default:a(()=>[b(_(Y(m.status)),1)]),_:1},8,["color"])])]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>{var l;return[r("div",Sa,[t(k,{icon:"mdi-account-edit",size:"16",color:"blue-grey-darken-1",class:"me-2"}),e[80]||(e[80]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"è™•ç†äººå“¡",-1))]),r("div",qa,_(((l=m.assignedDesigner)==null?void 0:l.name)||"å°šæœªæŒ‡æ´¾"),1)]}),_:1})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12"},{default:a(()=>[r("div",Ra,[t(k,{icon:"mdi-form-textbox",size:"18",color:"blue-grey-darken-2",class:"me-2"}),e[81]||(e[81]=r("span",{class:"text-blue-grey-darken-2 card-title"},"ç”³è«‹è³‡è¨Š",-1))]),m.productType==="printing"?(i(),h(S,{key:0},{default:a(()=>{var l;return[m.files&&m.files.length>0?(i(),h(v,{key:0,cols:"12"},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",Ma,[t(k,{size:"16",color:"blue-grey-darken-1",class:"me-2"},{default:a(()=>e[82]||(e[82]=[b(" mdi-file-document ")])),_:1}),e[83]||(e[83]=r("span",{class:"sub-card-title font-weight-bold text-blue-grey-darken-1"},"ä¸Šå‚³æª”æ¡ˆ",-1))]),r("div",Fa,[r("div",Oa,[(i(!0),f(C,null,M(m.files,(c,n)=>(i(),f("div",{key:n,class:"d-flex align-center mb-2 px-2 rounded-sm",style:{border:"1px solid #e6e6e6"}},[t(k,{size:"small",class:"me-2",color:ee(c)?"blue":"grey"},{default:a(()=>[b(_(ee(c)?"mdi-image":"mdi-file"),1)]),_:2},1032,["color"]),r("span",ja,_(Ue(W(c),25)),1),ee(c)?(i(),h(V,{key:0,icon:"",size:"small",color:"blue",variant:"text",class:"me-1",onClick:x=>pt(m.files,n)},{default:a(()=>[t(k,null,{default:a(()=>e[84]||(e[84]=[b("mdi-eye")])),_:1})]),_:2},1032,["onClick"])):P("",!0),t(V,{icon:"",size:"small",color:"green",variant:"text",onClick:x=>He(c)},{default:a(()=>[t(k,null,{default:a(()=>e[85]||(e[85]=[b("mdi-download")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(V,{color:"green-darken-1",variant:"outlined",size:"small","prepend-icon":"mdi-download-multiple",class:"mt-2",onClick:e[17]||(e[17]=c=>bt(m.files))},{default:a(()=>e[86]||(e[86]=[b(" ä¸‹è¼‰æ‰€æœ‰æª”æ¡ˆ ")])),_:1})])])]),_:1})]),_:1})):P("",!0),(i(!0),f(C,null,M((l=te.value)==null?void 0:l.sections,(c,n)=>{var x;return i(),f(C,{key:n},[(x=m.printingTypes)!=null&&x[n]?(i(),h(v,{key:0,cols:"12"},{default:a(()=>[t(T,{class:"info-printing-card pa-3 mb-4",variant:"outlined"},{default:a(()=>[r("div",Aa,[t(k,{size:"16",color:"blue-grey-darken-1",class:"me-2"},{default:a(()=>e[87]||(e[87]=[b(" mdi-shape ")])),_:1}),r("span",Ba,"â€» "+_(c.title),1)]),t(Z,{class:"mb-3"}),t(S,null,{default:a(()=>[(i(!0),f(C,null,M(c.fields,u=>{var g,p,$;return i(),h(v,{key:u.name,cols:((g=u.cols)==null?void 0:g.xs)||12,sm:((p=u.cols)==null?void 0:p.sm)||6,lg:(($=u.cols)==null?void 0:$.lg)||4},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",La,[t(k,{icon:xt(u.type),size:"16",color:"blue-grey-darken-1",class:"me-2"},null,8,["icon"]),r("span",Ha,_(Ie(u.label)),1)]),r("div",Ja,[u.type==="text"?(i(),f(C,{key:0},[F(m,u.name)?(i(),f("span",Ga,_(F(m,u.name)),1)):(i(),f("span",Ka,"( ç„¡ )"))],64)):u.type==="textarea"?(i(),f(C,{key:1},[F(m,u.name)?(i(),f("span",Qa,_(F(m,u.name)),1)):(i(),f("span",Wa,"( ç„¡ )"))],64)):u.type==="date"?(i(),f(C,{key:2},[b(_(F(m,u.name)?oe(F(m,u.name)):"( ç„¡ )"),1)],64)):u.type==="number"?(i(),f(C,{key:3},[b(_(F(m,u.name)!==null&&F(m,u.name)!==void 0&&F(m,u.name)!==""?F(m,u.name):"( ç„¡ )"),1)],64)):u.type==="select"?(i(),f(C,{key:4},[b(_(typeof F(m,u.name)=="boolean"?F(m,u.name)?"æ˜¯":"å¦":"( ç„¡ )"),1)],64)):P("",!0)])]),_:2},1024)]),_:2},1032,["cols","sm","lg"])}),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):P("",!0)],64)}),128))]}),_:1})):(i(),h(S,{key:1},{default:a(()=>[(i(!0),f(C,null,M(mt.value,l=>{var c,n,x;return i(),h(v,{key:l.name,cols:((c=l.cols)==null?void 0:c.xs)||12,sm:((n=l.cols)==null?void 0:n.sm)||6,lg:((x=l.cols)==null?void 0:x.lg)||4},{default:a(()=>[t(T,{class:"info-item-card pa-3",variant:"outlined"},{default:a(()=>[r("div",Za,[t(k,{icon:xt(l.type),size:"16",color:"blue-grey-darken-1",class:"me-2"},null,8,["icon"]),r("span",Xa,_(Ie(l.label)),1)]),r("div",Ya,[l.type==="text"?(i(),f(C,{key:0},[m[l.name]?(i(),f("span",es,_(m[l.name]),1)):(i(),f("span",ts,"( ç„¡ )"))],64)):l.type==="textarea"?(i(),f(C,{key:1},[m[l.name]?(i(),f("span",ls,_(m[l.name]),1)):(i(),f("span",as,"( ç„¡ )"))],64)):l.type==="date"?(i(),f(C,{key:2},[b(_(m[l.name]?oe(m[l.name]):"( ç„¡ )"),1)],64)):l.type==="number"?(i(),f(C,{key:3},[b(_(m[l.name]!==null&&m[l.name]!==void 0&&m[l.name]!==""?m[l.name]:"( ç„¡ )"),1)],64)):l.type==="checkbox"?(i(),f(C,{key:4},[t(k,{color:m[l.name]?"success":"grey"},{default:a(()=>[b(_(m[l.name]?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"]),b(" "+_(m[l.name]?"æ˜¯":"å¦"),1)],64)):l.type==="select"?(i(),f(C,{key:5},[b(_(typeof m[l.name]=="boolean"?m[l.name]?"æ˜¯":"å¦":"( ç„¡ )"),1)],64)):l.type==="file"?(i(),f(C,{key:6},[m[l.name]&&m[l.name].length>0?(i(),f("div",ss,[(i(!0),f(C,null,M(m[l.name],(u,g)=>(i(),f("div",{key:g,class:"d-flex align-center mb-2 px-2 rounded-sm",style:{border:"1px solid #e6e6e6"}},[t(k,{size:"small",class:"me-2",color:ee(u)?"blue":"grey"},{default:a(()=>[b(_(ee(u)?"mdi-image":"mdi-file"),1)]),_:2},1032,["color"]),r("span",ns,_(Ue(W(u),25)),1),ee(u)?(i(),h(V,{key:0,icon:"",size:"small",color:"blue",variant:"text",class:"me-1",onClick:p=>pt(m[l.name],g)},{default:a(()=>[t(k,null,{default:a(()=>e[88]||(e[88]=[b("mdi-eye")])),_:1})]),_:2},1032,["onClick"])):P("",!0),t(V,{icon:"",size:"small",color:"green",variant:"text",onClick:p=>He(u)},{default:a(()=>[t(k,null,{default:a(()=>e[89]||(e[89]=[b("mdi-download")])),_:1})]),_:2},1032,["onClick"])]))),128)),t(V,{color:"green-darken-1",variant:"outlined",size:"small","prepend-icon":"mdi-download-multiple",class:"mt-2",onClick:u=>bt(m[l.name])},{default:a(()=>e[90]||(e[90]=[b(" ä¸‹è¼‰æ‰€æœ‰æª”æ¡ˆ ")])),_:2},1032,["onClick"])])):(i(),f("span",os,"( ç„¡ )"))],64)):l.type==="array"?(i(),f("div",rs,[!m[l.name]||m[l.name].length===0?(i(),f("div",is,[t(k,{icon:"mdi-map-marker-off",size:"48",color:"grey-lighten-1",class:"mb-3"}),e[91]||(e[91]=r("div",{class:"text-grey-lighten-1"}," å°šæœªæ–°å¢ä»»ä½•è¡Œç¨‹ ",-1))])):(i(),h(S,{key:1},{default:a(()=>[(i(!0),f(C,null,M(m[l.name],(u,g)=>(i(),h(v,{key:g,cols:"12",md:"6",class:"mb-1"},{default:a(()=>[r("div",ds,[r("div",us,[r("span",cs,"è¡Œç¨‹ "+_(g+1),1)]),t(S,{class:"pb-2"},{default:a(()=>[t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:m[l.name][g].groupName,"onUpdate:modelValue":p=>m[l.name][g].groupName=p,label:"* åœ˜é«”åç¨±",variant:"outlined",density:"compact",class:"mb-1",readonly:"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:m[l.name][g].departureDate,"onUpdate:modelValue":p=>m[l.name][g].departureDate=p,label:"å‡ºç™¼æ—¥æœŸ",variant:"outlined",density:"compact",class:"mb-1",readonly:"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:m[l.name][g].agentPrice,"onUpdate:modelValue":p=>m[l.name][g].agentPrice=p,modelModifiers:{number:!0},label:"* åŒæ¥­åƒ¹",type:"number",variant:"outlined",density:"compact",class:"mb-1",readonly:"",clearable:"","prepend-inner-icon":"mdi-currency-usd"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(v,{cols:"12",lg:"6",class:"pb-0"},{default:a(()=>[t(L,{modelValue:m[l.name][g].retailPrice,"onUpdate:modelValue":p=>m[l.name][g].retailPrice=p,modelModifiers:{number:!0},label:"* ç›´å®¢åƒ¹",type:"number",variant:"outlined",density:"compact",class:"mb-1",readonly:"",clearable:"","prepend-inner-icon":"mdi-currency-usd"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(v,{cols:"12",class:"pb-0"},{default:a(()=>[t(ie,{modelValue:m[l.name][g].tripHighlights,"onUpdate:modelValue":p=>m[l.name][g].tripHighlights=p,label:"è¡Œç¨‹ç‰¹è‰²",variant:"outlined",density:"compact",class:"mb-1",readonly:"","auto-grow":"",rows:"3",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:2},1024))])):P("",!0)])]),_:2},1024)]),_:2},1032,["cols","sm","lg"])}),128))]),_:1}))]),_:1})]),_:1})]),_:1}),t(Pe,{class:"px-6 py-4"},{default:a(()=>[t(G),t(V,{variant:"outlined",color:"grey",onClick:kt},{default:a(()=>e[92]||(e[92]=[b(" é—œé–‰ ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:j.show,"onUpdate:modelValue":e[19]||(e[19]=l=>j.show=l),"max-width":"500",persistent:""},{default:a(()=>[t(T,{class:"rounded-lg pb-4"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-4 bg-orange-darken-2"},{default:a(()=>[t(k,{icon:"mdi-alert-circle",size:"20",color:"white",class:"me-3"}),e[93]||(e[93]=r("span",{class:"card-title text-white"},"ç¢ºèªç‹€æ…‹è®Šæ›´",-1))]),_:1}),t(J,{class:"px-6 pt-6 pb-0"},{default:a(()=>[r("div",ms,[r("p",ps,[e[94]||(e[94]=b(" æ‚¨æ˜¯å¦ç¢ºå®šè¦å°‡ç”³è«‹å–® ")),r("strong",null,_(j.designRequestNumber),1),e[95]||(e[95]=b(" çš„ç‹€æ…‹å¾ ")),t(_e,{color:$e(j.currentStatus),size:"small",label:"",class:"font-weight-medium mx-1"},{default:a(()=>[b(_(Y(j.currentStatus)),1)]),_:1},8,["color"]),e[96]||(e[96]=b(" æ›´æ”¹ç‚º ")),t(_e,{color:$e(j.newStatus),size:"small",label:"",class:"font-weight-medium mx-1"},{default:a(()=>[b(_(Y(j.newStatus)),1)]),_:1},8,["color"]),e[97]||(e[97]=b(" ï¼Ÿ "))]),r("div",gs,[r("div",bs,[t(k,{icon:"mdi-alert-octagon",size:"20",color:"orange-darken-2",class:"me-2"}),e[98]||(e[98]=r("span",{class:"text-orange-darken-2 font-weight-bold"},"é‡è¦æé†’",-1))]),e[99]||(e[99]=r("p",{class:"text-body-2 text-grey-darken-1 mb-0"},[b(" æ›´æ”¹ç‚ºçµæ¡ˆç‹€æ…‹å¾Œï¼Œ"),r("strong",null,"ç”³è«‹è€…ä¸Šå‚³çš„æ‰€æœ‰åœ–ç‰‡åŠæª”æ¡ˆå°‡æœƒè¢«æ°¸ä¹…åˆªé™¤"),b("ï¼Œæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚ ")],-1))])])]),_:1}),t(Pe,{class:"px-6 py-4"},{default:a(()=>[t(G),t(V,{variant:"outlined",color:"grey-darken-1",onClick:Zt},{default:a(()=>e[100]||(e[100]=[b(" å–æ¶ˆè®Šæ›´ ")])),_:1}),t(V,{color:"orange-darken-2",class:"ms-2",variant:"outlined",loading:pe.value.has(j.designRequestId),onClick:Wt},{default:a(()=>e[101]||(e[101]=[b(" ç¢ºèªè®Šæ›´ ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:De.show,"onUpdate:modelValue":e[22]||(e[22]=l=>De.show=l),"max-width":"1000",persistent:""},{default:a(()=>[t(T,{class:"rounded-lg"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-1 bg-blue-grey-darken-2"},{default:a(()=>[t(k,{icon:"mdi-email-multiple",size:"20",color:"white",class:"me-3"}),e[103]||(e[103]=r("span",{class:"card-title text-white"},"é€šçŸ¥è¨­å®šç®¡ç†",-1)),t(G),t(V,{icon:"",variant:"plain",color:"white",ripple:!1,class:"opacity-100",onClick:tl},{default:a(()=>[t(k,null,{default:a(()=>e[102]||(e[102]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"px-6 py-6"},{default:a(()=>[t(Ye,{ref_key:"notificationEmailFormRef",ref:ce},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[r("div",ys,[t(k,{icon:"mdi-plus-circle",size:"18",color:"blue-grey-darken-2",class:"me-2"}),e[104]||(e[104]=r("span",{class:"text-blue-grey-darken-2 card-title"},"æ–°å¢é€šçŸ¥è¨­å®š",-1))])]),_:1}),t(v,{cols:"12"},{default:a(()=>[t(Te,{modelValue:R.user,"onUpdate:modelValue":e[20]||(e[20]=l=>R.user=l),items:ul.value,"item-title":"label","item-value":"value",label:"* é¸æ“‡ç”¨æˆ¶",variant:"outlined",density:"compact",rules:[l=>!!l||"è«‹é¸æ“‡ç”¨æˆ¶"],"prepend-inner-icon":"mdi-account",filter:je,clearable:""},null,8,["modelValue","items","rules"])]),_:1}),t(v,{cols:"12",class:"pt-0 mb-3"},{default:a(()=>[t(T,{class:"pa-4 elevation-0 notification-email-card"},{default:a(()=>[r("div",fs,[t(k,{icon:"mdi-checkbox-multiple-marked-outline",size:"18",color:"grey-darken-1",class:"me-2"}),e[105]||(e[105]=r("span",{class:"text-grey-darken-1 font-weight-bold"},"é¸æ“‡éœ€è¦é€šçŸ¥çš„å¤§åˆ†é¡",-1))]),t(S,null,{default:a(()=>[(i(),f(C,null,M(ct,l=>t(v,{key:l.value,cols:"12",sm:"6",md:"2"},{default:a(()=>[t(he,{"model-value":R.categories.includes(l.value),label:l.label,color:"grey-darken-1","hide-details":"",density:"compact","onUpdate:modelValue":c=>rl(l.value,c)},null,8,["model-value","label","onUpdate:modelValue"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12"},{default:a(()=>[t(ie,{modelValue:R.note,"onUpdate:modelValue":e[21]||(e[21]=l=>R.note=l),label:"å‚™è¨»",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",class:"d-flex justify-end pt-0"},{default:a(()=>[t(V,{color:"teal-darken-2",variant:"outlined",size:be(de)?"default":"small",loading:Re.value,onClick:ll},{default:a(()=>e[106]||(e[106]=[b(" æ–°å¢ ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},512),t(Z,{class:"my-6"}),r("div",null,[r("div",vs,[t(k,{icon:"mdi-format-list-bulleted",size:"18",color:"blue-grey-darken-2",class:"me-2"}),e[107]||(e[107]=r("span",{class:"text-blue-grey-darken-2 card-title"},"é€šçŸ¥è¨­å®šåˆ—è¡¨",-1))]),Je.value?(i(),f("div",ks,[t(Ul,{indeterminate:"",color:"blue-grey-darken-2",size:"40"})])):(i(),f(C,{key:1},[Ce.value.length===0?(i(),f("div",xs,[t(k,{icon:"mdi-email-off",size:"48",color:"grey-lighten-1",class:"mb-3"}),e[108]||(e[108]=r("div",{class:"text-grey-lighten-1"}," å°šæœªè¨­å®šä»»ä½•EMAIL ",-1))])):(i(),h(Ze,{key:1},{default:a(()=>[(i(!0),f(C,null,M(Ce.value,l=>(i(),h(Ee,{key:l._id,class:"mb-3 border rounded px-4 py-3",style:{"flex-direction":"column","align-items":"flex-start"}},{default:a(()=>{var c,n;return[r("div",_s,[t(k,{icon:"mdi-account-circle",size:"22",color:"blue-grey-darken-2",class:"me-3"}),r("span",hs,_((c=l.user)==null?void 0:c.name),1),r("span",ws,_((n=l.user)==null?void 0:n.email),1),r("span",Vs,"å‚™è¨»ï¼š"+_(l.note||""),1),t(G),t(V,{icon:"",color:"light-blue-darken-4",variant:"plain",size:"small",onClick:x=>cl(l)},{default:a(()=>[t(k,null,{default:a(()=>e[109]||(e[109]=[b("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),t(V,{icon:"",color:"red-darken-1",variant:"plain",size:"small",loading:Ge.value===l._id,onClick:x=>al(l)},{default:a(()=>[t(k,null,{default:a(()=>e[110]||(e[110]=[b("mdi-delete")])),_:1})]),_:2},1032,["loading","onClick"])]),r("div",Ds,[(i(!0),f(C,null,M(l.categories,x=>(i(),h(_e,{key:x,color:"blue-grey-darken-2","text-color":"white",class:"me-2 mb-1 font-weight-bold",size:"small",label:""},{default:a(()=>[b(_(ol(x)),1)]),_:2},1024))),128))])]}),_:2},1024))),128))]),_:1}))],64))])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(le,{modelValue:Ne.show,"onUpdate:modelValue":e[24]||(e[24]=l=>Ne.show=l),"max-width":"800",persistent:""},{default:a(()=>[t(T,{class:"rounded-lg"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-2 bg-blue-darken-1"},{default:a(()=>[t(k,{icon:"mdi-pencil",size:"20",color:"white",class:"me-3"}),e[112]||(e[112]=r("span",{class:"card-title text-white"},"ç·¨è¼¯é€šçŸ¥è¨­å®š",-1)),t(G),t(V,{icon:"",variant:"text",color:"white",onClick:ht},{default:a(()=>[t(k,null,{default:a(()=>e[111]||(e[111]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"px-6 py-6"},{default:a(()=>[t(Ye,{ref_key:"editEmailFormRef",ref:Me},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[r("div",Cs,[t(k,{icon:"mdi-account-circle",size:"18",color:"blue-darken-1",class:"me-2"}),e[113]||(e[113]=r("span",{class:"text-blue-darken-1 card-title"},"ç”¨æˆ¶è³‡è¨Š",-1))]),t(T,{class:"pa-4 elevation-0 notification-email-card mb-4"},{default:a(()=>[r("div",Ns,[t(k,{icon:"mdi-account",size:"20",color:"grey-darken-1",class:"me-3"}),r("div",null,[r("div",$s,_(I.userName),1),r("div",Is,_(I.userEmail),1)])])]),_:1})]),_:1}),t(v,{cols:"12",class:"pt-0 mb-3"},{default:a(()=>[t(T,{class:"pa-4 elevation-0 notification-email-card"},{default:a(()=>[r("div",Us,[t(k,{icon:"mdi-checkbox-multiple-marked-outline",size:"18",color:"grey-darken-1",class:"me-2"}),e[114]||(e[114]=r("span",{class:"text-grey-darken-1 font-weight-bold"},"é¸æ“‡éœ€è¦é€šçŸ¥çš„å¤§åˆ†é¡",-1))]),t(S,null,{default:a(()=>[(i(),f(C,null,M(ct,l=>t(v,{key:l.value,cols:"12",sm:"6",md:"4"},{default:a(()=>[t(he,{"model-value":I.categories.includes(l.value),label:l.label,color:"grey-darken-1","hide-details":"",density:"compact","onUpdate:modelValue":c=>il(l.value,c)},null,8,["model-value","label","onUpdate:modelValue"])]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12"},{default:a(()=>[t(ie,{modelValue:I.note,"onUpdate:modelValue":e[23]||(e[23]=l=>I.note=l),label:"å‚™è¨»",variant:"outlined",density:"compact",rows:"2","prepend-inner-icon":"mdi-note-text"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",class:"d-flex justify-end pt-0"},{default:a(()=>[t(V,{color:"blue-darken-1",variant:"outlined",loading:Fe.value,onClick:ml},{default:a(()=>e[115]||(e[115]=[b(" æ›´æ–° ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Dl,{modelValue:X.show,"onUpdate:modelValue":e[25]||(e[25]=l=>X.show=l),title:"ç¢ºèªåˆªé™¤é€šçŸ¥è¨­å®š",message:X.message,"confirm-button-text":"ç¢ºèª","cancel-button-text":"å–æ¶ˆ",onConfirm:sl},null,8,["modelValue","message"]),t(Cl,{modelValue:H.show,"onUpdate:modelValue":e[26]||(e[26]=l=>H.show=l),"max-width":320,title:"ç¢ºèªæŒ‡æ´¾è™•ç†äººå“¡",message:H.message,"confirm-button-text":"ç¢ºèª","cancel-button-text":"å–æ¶ˆ","confirm-button-color":"blue-darken-1","header-color":"bg-blue-darken-1","header-icon":"mdi-account-check",onConfirm:Kt},null,8,["modelValue","message"]),t(le,{modelValue:q.show,"onUpdate:modelValue":e[30]||(e[30]=l=>q.show=l),"max-width":"600",persistent:""},{default:a(()=>[t(T,{class:"rounded-lg"},{default:a(()=>[t(re,{class:"d-flex align-center px-6 py-1 bg-blue-grey-darken-2"},{default:a(()=>[t(k,{icon:"mdi-pencil",size:"20",color:"white",class:"me-3"}),e[117]||(e[117]=r("span",{class:"card-title text-white"},"ç·¨è¼¯éƒ¨é–€å‚™è¨»",-1)),t(G),t(V,{icon:"",variant:"text",color:"white",onClick:Ke},{default:a(()=>[t(k,null,{default:a(()=>e[116]||(e[116]=[b("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"px-6 py-6"},{default:a(()=>[t(S,null,{default:a(()=>[t(v,{cols:"12"},{default:a(()=>[t(k,{icon:"mdi-identifier",size:"18",color:"blue-grey-darken-2",class:"me-2"}),r("span",zs,"ç”³è«‹ç·¨è™Ÿï¼š"+_(q.designRequestNumber),1)]),_:1}),t(v,{cols:"12"},{default:a(()=>[t(ie,{modelValue:q.newNote,"onUpdate:modelValue":e[27]||(e[27]=l=>q.newNote=l),label:"éƒ¨é–€å‚™è¨»",variant:"outlined",density:"compact",rows:"6",placeholder:"è«‹è¼¸å…¥éƒ¨é–€å‚™è¨»å…§å®¹","hide-details":"","auto-grow":""},null,8,["modelValue"]),r("div",Ts,[t(L,{modelValue:ne.value,"onUpdate:modelValue":e[28]||(e[28]=l=>ne.value=l),label:"è«‹è¼¸å…¥æ¬²æ’å…¥çš„ç¶²å€",variant:"underlined",density:"compact",class:"me-2 mt-2","hide-details":"",clearable:"",onKeydown:e[29]||(e[29]=Ct(vl(()=>{},["prevent"]),["enter"]))},null,8,["modelValue"]),t(V,{color:"success",variant:"outlined",size:"small",disabled:!ne.value,onClick:pl},{default:a(()=>e[118]||(e[118]=[b(" ç¢ºèª ")])),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1}),t(Pe,{class:"px-6 pb-6"},{default:a(()=>[t(G),t(V,{variant:"outlined",size:et.value,color:"grey-darken-1",onClick:Ke},{default:a(()=>e[119]||(e[119]=[b(" å–æ¶ˆ ")])),_:1},8,["size"]),t(V,{color:"teal-darken-1",class:"ms-2",variant:"outlined",size:et.value,loading:Oe.value,onClick:gl},{default:a(()=>e[120]||(e[120]=[b(" å„²å­˜ ")])),_:1},8,["size","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},sn=xl(Es,[["__scopeId","data-v-bc22d893"]]);export{sn as default};

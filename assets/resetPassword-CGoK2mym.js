import{r as c,aV as _,$ as S,a8 as s,bH as o,u as a,bM as C,a7 as f,a0 as $}from"./@vue-Cr_z6yfx.js";import{u as h,b as B}from"./vue-router-BFBClpR6.js";import{u as F,a as v}from"./vee-validate-BXV9nMa7.js";import{b as M,c as w,a as U}from"./yup-WHNMwcW8.js";import{_ as I,u as N}from"./index-BBlsm_-Y.js";import{i as R}from"./vuetify-use-dialog-C5oZ13xz.js";import{Q as q,U as E,v as T,w as i,d as b,g as j}from"./vuetify-CbddcmEc.js";import"./perfect-debounce-Cp2ysxOb.js";import"./hookable-B8xFkYCm.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-DzadwsAs.js";import"./core-js-D2hAHviU.js";/* empty css             */import"./pinia-DBRIaiZ_.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./jspdf-DacfHTdZ.js";import"./@babel-BsCcpEdk.js";import"./fflate-EnPhvkmS.js";import"./unplugin-vue-router-B1N3mqWX.js";import"./axios-upsvKRUO.js";import"./vue3-google-login-Dx7TV_Hx.js";import"./vue-easy-lightbox-D952uME8.js";const H={id:"background",class:"fill-height d-flex justify-center align-center"},O={__name:"resetPassword",setup(Q){const g=h(),x=B(),y=N(),m=R(),t=c(!1),n=c(!1),V=M({password:w().required("請輸入新密碼").min(8,"密碼長度至少需要8個字元"),confirmPassword:w().required("請再次輸入新密碼").oneOf([U("password")],"兩次輸入的密碼不相符")}),{handleSubmit:k,isSubmitting:p}=F({validationSchema:V}),l=v("password"),d=v("confirmPassword"),P=k(async u=>{try{const e=x.params.token;if(!e)throw new Error("無效的重設密碼連結");const r=await y.resetPassword(e,u.password);m({text:r.message,snackbarProps:{color:"teal-lighten-1"}}),g.push("/login")}catch(e){m({text:e.message,snackbarProps:{color:"red-lighten-1"}})}});return(u,e)=>(_(),S("div",H,[s(q,{class:"reset-password-wrapper pa-0",style:{"max-width":"360px"}},{default:o(()=>[s(E,{disabled:a(p),onSubmit:C(a(P),["prevent"])},{default:o(()=>[s(T,{class:"px-4 ma-0"},{default:o(()=>[s(i,{cols:"12",class:"text-center mt-4 font-weight-bold"},{default:o(()=>e[4]||(e[4]=[f(" 重置密碼 ")])),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{modelValue:a(l).value.value,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).value.value=r),"error-messages":a(l).errorMessage.value,type:t.value?"text":"password","append-inner-icon":t.value?"mdi-eye-off":"mdi-eye",label:"新密碼",density:"compact",variant:"underlined","onClick:appendInner":e[1]||(e[1]=r=>t.value=!t.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),s(i,{cols:"12"},{default:o(()=>[s(b,{modelValue:a(d).value.value,"onUpdate:modelValue":e[2]||(e[2]=r=>a(d).value.value=r),"error-messages":a(d).errorMessage.value,type:n.value?"text":"password","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye",label:"確認新密碼",density:"compact",variant:"underlined","onClick:appendInner":e[3]||(e[3]=r=>n.value=!n.value)},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),s(i,{cols:"12",class:"pb-8"},{default:o(()=>[e[6]||(e[6]=$("div",{class:"text-body-2 text-medium-emphasis mb-6"}," 新密碼必須至少8個字元 ",-1)),s(j,{block:"",elevation:"2",color:"orange-darken-2",type:"submit",loading:a(p)},{default:o(()=>e[5]||(e[5]=[f(" 重置密碼 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]))}},ce=I(O,[["__scopeId","data-v-c443872b"]]);export{ce as default};
